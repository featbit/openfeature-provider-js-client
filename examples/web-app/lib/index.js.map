{"version":3,"file":"index.js","mappings":"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","sources":["webpack://featbit-provider-example/webpack/universalModuleDefinition","webpack://featbit-provider-example/../../dist/FbProvider.js","webpack://featbit-provider-example/../../dist/index.js","webpack://featbit-provider-example/../../dist/translateContext.js","webpack://featbit-provider-example/../../dist/translateResult.js","webpack://featbit-provider-example/./node_modules/@openfeature/core/dist/cjs/index.js","webpack://featbit-provider-example/./node_modules/@openfeature/web-sdk/dist/cjs/index.js","webpack://featbit-provider-example/./src/index.ts","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/Configuration.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/Context.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/FbClientBuilder.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/FbClientCore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IContextProperty.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IDataKind.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IFbClient.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IVersionedData.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/IBootstrapProvider.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/JsonBootstrapProvider.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/NullBootstrapProvider.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/constants.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sources/DataSourceUpdates.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sources/createStreamListeners.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sources/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/DataSyncMode.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/IDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/IRequestor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/NullDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/PollingDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/Requestor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/WebSocketDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/types.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/utils.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/errors.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/EvalResult.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/Evaluator.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/IEvalDetail.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/ReasonKinds.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/data/IFlag.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/data/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventProcessor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventQueue.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventSender.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventSerializer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/EventDispatcher.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/EventSerializer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/IEventProcessor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/IEventQueue.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/IEventSender.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/NullEventProcessor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/event.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/BasicLogger.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/IBasicLoggerOptions.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/ILogger.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/LogLevel.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/SafeLogger.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/format.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/ClientContext.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IClientContext.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IOptions.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IUser.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IValidatedOptions.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/OptionMessages.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/UserBuilder.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/Validators.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IInfo.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IPlatform.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IWebSocket.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserInfo.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserPlatform.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserRequests.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserWebSocket.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/FbClient.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/LocalStorageStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/requests.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/BaseStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/DataKinds.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/IDataSourceUpdates.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/InMemoryStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/serialization.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/store.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/Emits.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/EventEmitter.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/ValueConverters.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/VoidFunction.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/canonicalizeUri.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/debounce.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/http.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/isNullOrUndefined.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/serializeUser.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/sleep.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/version.js","webpack://featbit-provider-example/../../node_modules/@openfeature/core/dist/cjs/index.js","webpack://featbit-provider-example/../../node_modules/@openfeature/web-sdk/dist/cjs/index.js","webpack://featbit-provider-example/webpack/bootstrap","webpack://featbit-provider-example/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, () => {\nreturn ","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbProvider = void 0;\nvar web_sdk_1 = require(\"@openfeature/web-sdk\");\nvar js_client_sdk_1 = require(\"@featbit/js-client-sdk\");\nvar translateContext_1 = require(\"./translateContext\");\nvar translateResult_1 = __importDefault(require(\"./translateResult\"));\n/**\n * Create a ResolutionDetails for an evaluation that produced a type different\n * from the expected type.\n * @param value The default value to populate the ResolutionDetails with.\n * @returns A ResolutionDetails with the default value.\n */\nfunction wrongTypeResult(value) {\n    return {\n        value: value,\n        reason: web_sdk_1.StandardResolutionReasons.ERROR,\n        errorCode: web_sdk_1.ErrorCode.TYPE_MISMATCH,\n    };\n}\n// implement the provider interface\nvar FbProvider = /** @class */ (function () {\n    function FbProvider(options) {\n        var _this = this;\n        var _a;\n        // Adds runtime validation that the provider is used with the expected SDK\n        this.runsOn = \"client\";\n        this.metadata = {\n            name: \"featbit-client-provider\",\n        };\n        this._status = web_sdk_1.ProviderStatus.NOT_READY;\n        this.events = new web_sdk_1.OpenFeatureEventEmitter();\n        try {\n            this.logger = (_a = options.logger) !== null && _a !== void 0 ? _a : new js_client_sdk_1.BasicLogger({\n                level: 'none',\n                destination: console.log\n            });\n            this.fbClient = new js_client_sdk_1.FbClientBuilder(__assign(__assign({}, options), { logger: this.logger })).build();\n            this.fbClient.on('update', function (flagKeys) {\n                return _this.events.emit(web_sdk_1.ProviderEvents.ConfigurationChanged, {\n                    flagsChanged: flagKeys,\n                });\n            });\n        }\n        catch (err) {\n            this.clientConstructionError = err;\n            this.logger.error(\"Encountered unrecoverable initialization error, \".concat(err));\n            this._status = web_sdk_1.ProviderStatus.ERROR;\n        }\n    }\n    FbProvider.prototype.initialize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.fbClient) {\n                            // The client could not be constructed.\n                            if (this.clientConstructionError) {\n                                throw this.clientConstructionError;\n                            }\n                            throw new Error(\"Unknown problem encountered during initialization\");\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.fbClient.waitForInitialization()];\n                    case 2:\n                        _a.sent();\n                        this._status = web_sdk_1.ProviderStatus.READY;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _a.sent();\n                        this._status = web_sdk_1.ProviderStatus.ERROR;\n                        throw error_1;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Determines the boolean variation of a feature flag for a context, along with information about\n     * how it was calculated.\n     *\n     * If the flag does not evaluate to a boolean value, then the defaultValue will be returned.\n     *\n     * @param flagKey The unique key of the feature flag.\n     * @param defaultValue The default value of the flag, to be used if the value is not available\n     *   from FeatBit.\n     * @returns A promise which will resolve to a ResolutionDetails.\n     */\n    FbProvider.prototype.resolveBooleanEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.boolVariation(flagKey, defaultValue);\n        if (typeof variation !== \"boolean\") {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n        return (0, translateResult_1.default)(variation);\n    };\n    FbProvider.prototype.resolveStringEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.stringVariation(flagKey, defaultValue);\n        if (typeof variation !== \"string\") {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n        return (0, translateResult_1.default)(variation);\n    };\n    FbProvider.prototype.resolveNumberEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.numberVariation(flagKey, defaultValue);\n        if (typeof variation !== \"number\") {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n        return (0, translateResult_1.default)(variation);\n    };\n    FbProvider.prototype.resolveObjectEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.jsonVariation(flagKey, defaultValue);\n        if (variation !== undefined) {\n            return (0, translateResult_1.default)(variation);\n        }\n        else {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n    };\n    FbProvider.prototype.onContextChange = function (_oldContext, newContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _user;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _user = (0, translateContext_1.translateContext)(newContext, this.logger);\n                        if (!_user) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.fbClient.identify(_user)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2: return [2 /*return*/, Promise.reject(new Error(\"Something went wrong\"))];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    FbProvider.prototype.getClient = function () {\n        return this.fbClient;\n    };\n    Object.defineProperty(FbProvider.prototype, \"status\", {\n        get: function () {\n            return this._status;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FbProvider.prototype.onClose = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: \n                    // code to shut down your\n                    return [4 /*yield*/, this.fbClient.close()];\n                    case 1:\n                        // code to shut down your\n                        _a.sent();\n                        this._status = web_sdk_1.ProviderStatus.NOT_READY;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return FbProvider;\n}());\nexports.FbProvider = FbProvider;\n//# sourceMappingURL=FbProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbProvider = void 0;\nvar FbProvider_1 = require(\"./FbProvider\");\nObject.defineProperty(exports, \"FbProvider\", { enumerable: true, get: function () { return FbProvider_1.FbProvider; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.translateContext = void 0;\nvar builtInKeys = [\"key\", \"name\", \"custom\", \"targetingKey\"];\nfunction translateContext(evaluationContext, logger) {\n    var custom = (evaluationContext.custom || []);\n    var name = evaluationContext.name || \"\";\n    var key = evaluationContext.targetingKey || evaluationContext.key || evaluationContext.keyId || '';\n    if (key === \"\") {\n        logger.error(\"The EvaluationContext must contain either a 'targetingKey' or a 'key' or a 'keyId' and the \" +\n            \"type must be a string.\");\n    }\n    var user = {\n        keyId: key,\n        name: name,\n        customizedProperties: [],\n    };\n    if (custom) {\n        if (Array.isArray(custom)) {\n            custom.forEach(function (_a) {\n                var name = _a.name, value = _a.value;\n                if (name) {\n                    user.customizedProperties.push({\n                        name: name,\n                        value: value,\n                    });\n                }\n            });\n        }\n        else if (typeof custom === \"object\") {\n            Object.entries(custom).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (key) {\n                    user.customizedProperties.push({\n                        name: key,\n                        value: value,\n                    });\n                }\n            });\n        }\n    }\n    // add properties from evalContext to custom\n    Object.entries(evaluationContext).forEach(function (_a) {\n        var key = _a[0], value = _a[1];\n        if (!builtInKeys.includes(key)) {\n            user.customizedProperties.push({\n                name: key,\n                value: value,\n            });\n        }\n    });\n    return user;\n}\nexports.translateContext = translateContext;\n//# sourceMappingURL=translateContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction translateResult(result) {\n    var resolution = {\n        value: result\n    };\n    return resolution;\n}\nexports.default = translateResult;\n//# sourceMappingURL=translateResult.js.map","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  AllProviderEvents: () => ClientProviderEvents,\n  ClientProviderEvents: () => ClientProviderEvents,\n  DefaultLogger: () => DefaultLogger,\n  ErrorCode: () => ErrorCode,\n  FlagNotFoundError: () => FlagNotFoundError,\n  GeneralError: () => GeneralError,\n  GenericEventEmitter: () => GenericEventEmitter,\n  InvalidContextError: () => InvalidContextError,\n  LOG_LEVELS: () => LOG_LEVELS,\n  OpenFeatureCommonAPI: () => OpenFeatureCommonAPI,\n  OpenFeatureError: () => OpenFeatureError,\n  ParseError: () => ParseError,\n  ProviderNotReadyError: () => ProviderNotReadyError,\n  ProviderStatus: () => ProviderStatus,\n  SafeLogger: () => SafeLogger,\n  ServerProviderEvents: () => ServerProviderEvents,\n  StandardResolutionReasons: () => StandardResolutionReasons,\n  TargetingKeyMissingError: () => TargetingKeyMissingError,\n  TypeMismatchError: () => TypeMismatchError,\n  isObject: () => isObject,\n  isString: () => isString,\n  objectOrUndefined: () => objectOrUndefined,\n  statusMatchesEvent: () => statusMatchesEvent,\n  stringOrUndefined: () => stringOrUndefined\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/errors/open-feature-error-abstract.ts\nvar OpenFeatureError = class extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, OpenFeatureError.prototype);\n    this.name = \"OpenFeatureError\";\n  }\n};\n\n// src/evaluation/evaluation.ts\nvar StandardResolutionReasons = {\n  /**\n   * The resolved value was the result of a dynamic evaluation, such as a rule or specific user-targeting.\n   */\n  TARGETING_MATCH: \"TARGETING_MATCH\",\n  /**\n   * The resolved value was the result of pseudorandom assignment.\n   */\n  SPLIT: \"SPLIT\",\n  /**\n   * The resolved value was the result of the flag being disabled in the management system.\n   */\n  DISABLED: \"DISABLED\",\n  /**\n   *  The resolved value was configured statically, or otherwise fell back to a pre-configured value.\n   */\n  DEFAULT: \"DEFAULT\",\n  /**\n   * The reason for the resolved value could not be determined.\n   */\n  UNKNOWN: \"UNKNOWN\",\n  /**\n   * The resolved value is static (no dynamic evaluation).\n   */\n  STATIC: \"STATIC\",\n  /**\n   * The resolved value was retrieved from cache.\n   */\n  CACHED: \"CACHED\",\n  /**\n   * The resolved value was the result of an error.\n   *\n   * Note: The `errorCode` and `errorMessage` fields may contain additional details of this error.\n   */\n  ERROR: \"ERROR\"\n};\nvar ErrorCode = /* @__PURE__ */ ((ErrorCode2) => {\n  ErrorCode2[\"PROVIDER_NOT_READY\"] = \"PROVIDER_NOT_READY\";\n  ErrorCode2[\"FLAG_NOT_FOUND\"] = \"FLAG_NOT_FOUND\";\n  ErrorCode2[\"PARSE_ERROR\"] = \"PARSE_ERROR\";\n  ErrorCode2[\"TYPE_MISMATCH\"] = \"TYPE_MISMATCH\";\n  ErrorCode2[\"TARGETING_KEY_MISSING\"] = \"TARGETING_KEY_MISSING\";\n  ErrorCode2[\"INVALID_CONTEXT\"] = \"INVALID_CONTEXT\";\n  ErrorCode2[\"GENERAL\"] = \"GENERAL\";\n  return ErrorCode2;\n})(ErrorCode || {});\n\n// src/errors/general-error.ts\nvar GeneralError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, GeneralError.prototype);\n    this.name = \"GeneralError\";\n    this.code = \"GENERAL\" /* GENERAL */;\n  }\n};\n\n// src/errors/flag-not-found-error.ts\nvar FlagNotFoundError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, FlagNotFoundError.prototype);\n    this.name = \"FlagNotFoundError\";\n    this.code = \"FLAG_NOT_FOUND\" /* FLAG_NOT_FOUND */;\n  }\n};\n\n// src/errors/parse-error.ts\nvar ParseError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ParseError.prototype);\n    this.name = \"ParseError\";\n    this.code = \"PARSE_ERROR\" /* PARSE_ERROR */;\n  }\n};\n\n// src/errors/type-mismatch-error.ts\nvar TypeMismatchError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TypeMismatchError.prototype);\n    this.name = \"TypeMismatchError\";\n    this.code = \"TYPE_MISMATCH\" /* TYPE_MISMATCH */;\n  }\n};\n\n// src/errors/targeting-key-missing-error.ts\nvar TargetingKeyMissingError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TargetingKeyMissingError.prototype);\n    this.name = \"TargetingKeyMissingError\";\n    this.code = \"TARGETING_KEY_MISSING\" /* TARGETING_KEY_MISSING */;\n  }\n};\n\n// src/errors/invalid-context-error.ts\nvar InvalidContextError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, InvalidContextError.prototype);\n    this.name = \"InvalidContextError\";\n    this.code = \"INVALID_CONTEXT\" /* INVALID_CONTEXT */;\n  }\n};\n\n// src/errors/provider-not-ready-error.ts\nvar ProviderNotReadyError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ProviderNotReadyError.prototype);\n    this.name = \"ProviderNotReadyError\";\n    this.code = \"PROVIDER_NOT_READY\" /* PROVIDER_NOT_READY */;\n  }\n};\n\n// src/provider/provider.ts\nvar ProviderStatus = /* @__PURE__ */ ((ProviderStatus2) => {\n  ProviderStatus2[\"NOT_READY\"] = \"NOT_READY\";\n  ProviderStatus2[\"READY\"] = \"READY\";\n  ProviderStatus2[\"ERROR\"] = \"ERROR\";\n  ProviderStatus2[\"STALE\"] = \"STALE\";\n  return ProviderStatus2;\n})(ProviderStatus || {});\n\n// src/events/events.ts\nvar ServerProviderEvents = /* @__PURE__ */ ((ServerProviderEvents2) => {\n  ServerProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ServerProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ServerProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ServerProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ServerProviderEvents2;\n})(ServerProviderEvents || {});\nvar ClientProviderEvents = /* @__PURE__ */ ((ClientProviderEvents2) => {\n  ClientProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ClientProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ClientProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ClientProviderEvents2[\"ContextChanged\"] = \"PROVIDER_CONTEXT_CHANGED\";\n  ClientProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ClientProviderEvents2;\n})(ClientProviderEvents || {});\n\n// src/events/event-utils.ts\nvar eventStatusMap = {\n  [\"READY\" /* READY */]: \"PROVIDER_READY\" /* Ready */,\n  [\"ERROR\" /* ERROR */]: \"PROVIDER_ERROR\" /* Error */,\n  [\"STALE\" /* STALE */]: \"PROVIDER_STALE\" /* Stale */,\n  [\"NOT_READY\" /* NOT_READY */]: void 0\n};\nvar statusMatchesEvent = (event, status) => {\n  return !status && event === \"PROVIDER_READY\" /* Ready */ || eventStatusMap[status] === event;\n};\n\n// src/logger/default-logger.ts\nvar DefaultLogger = class {\n  error(...args) {\n    console.error(...args);\n  }\n  warn(...args) {\n    console.warn(...args);\n  }\n  info() {\n  }\n  debug() {\n  }\n};\n\n// src/logger/safe-logger.ts\nvar LOG_LEVELS = [\"error\", \"warn\", \"info\", \"debug\"];\nvar SafeLogger = class {\n  constructor(logger) {\n    this.fallbackLogger = new DefaultLogger();\n    try {\n      for (const level of LOG_LEVELS) {\n        if (!logger[level] || typeof logger[level] !== \"function\") {\n          throw new Error(`The provided logger is missing the ${level} method.`);\n        }\n      }\n      this.logger = logger;\n    } catch (err) {\n      console.error(err);\n      console.error(\"Falling back to the default logger.\");\n      this.logger = this.fallbackLogger;\n    }\n  }\n  error(...args) {\n    this.log(\"error\", ...args);\n  }\n  warn(...args) {\n    this.log(\"warn\", ...args);\n  }\n  info(...args) {\n    this.log(\"info\", ...args);\n  }\n  debug(...args) {\n    this.log(\"debug\", ...args);\n  }\n  log(level, ...args) {\n    try {\n      this.logger[level](...args);\n    } catch (error) {\n      this.fallbackLogger[level](...args);\n    }\n  }\n};\n\n// src/events/generic-event-emitter.ts\nvar GenericEventEmitter = class {\n  constructor(globalLogger) {\n    this.globalLogger = globalLogger;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._handlers = /* @__PURE__ */ new WeakMap();\n  }\n  // here we use E, to restrict the events a provider can manually emit (PROVIDER_CONTEXT_CHANGED is emitted by the SDK)\n  emit(eventType, context) {\n    this.eventEmitter.emit(eventType, context);\n  }\n  addHandler(eventType, handler) {\n    const asyncHandler = (details) => __async(this, null, function* () {\n      yield handler(details);\n    });\n    this._handlers.set(handler, asyncHandler);\n    this.eventEmitter.on(eventType, asyncHandler);\n  }\n  removeHandler(eventType, handler) {\n    const asyncHandler = this._handlers.get(handler);\n    if (!asyncHandler) {\n      return;\n    }\n    this.eventEmitter.removeListener(eventType, asyncHandler);\n  }\n  removeAllHandlers(eventType) {\n    if (eventType) {\n      this.eventEmitter.removeAllListeners(eventType);\n    } else {\n      this.eventEmitter.removeAllListeners();\n    }\n  }\n  getHandlers(eventType) {\n    return this.eventEmitter.listeners(eventType);\n  }\n  setLogger(logger) {\n    this._eventLogger = new SafeLogger(logger);\n    return this;\n  }\n  get _logger() {\n    var _a, _b;\n    return (_b = this._eventLogger) != null ? _b : (_a = this.globalLogger) == null ? void 0 : _a.call(this);\n  }\n};\n\n// src/type-guards.ts\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nfunction stringOrUndefined(value) {\n  return isString(value) ? value : void 0;\n}\nfunction isObject(value) {\n  return typeof value === \"object\";\n}\nfunction objectOrUndefined(value) {\n  return isObject(value) ? value : void 0;\n}\n\n// src/filter.ts\nfunction isDefined(input) {\n  return typeof input !== \"undefined\" && input !== null;\n}\n\n// src/open-feature.ts\nvar OpenFeatureCommonAPI = class {\n  constructor(category) {\n    this._hooks = [];\n    this._context = {};\n    this._logger = new DefaultLogger();\n    this._clientEventHandlers = /* @__PURE__ */ new Map();\n    this._clientProviders = /* @__PURE__ */ new Map();\n    this._clientEvents = /* @__PURE__ */ new Map();\n    this._runsOn = category;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  setLogger(logger) {\n    this._logger = new SafeLogger(logger);\n    return this;\n  }\n  /**\n   * Get metadata about the default provider.\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  get providerMetadata() {\n    return this.getProviderMetadata();\n  }\n  /**\n   * Get metadata about a registered provider using the client name.\n   * An unbound or empty client name will return metadata from the default provider.\n   * @param {string} [clientName] The name to identify the client\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  getProviderMetadata(clientName) {\n    return this.getProviderForClient(clientName).metadata;\n  }\n  /**\n   * Adds a handler for the given provider event type.\n   * The handlers are called in the order they have been added.\n   * API (global) events run for all providers.\n   * @param {AnyProviderEvent} eventType The provider event type to listen to\n   * @param {EventHandler} handler The handler to run on occurrence of the event type\n   */\n  addHandler(eventType, handler) {\n    [.../* @__PURE__ */ new Map([[void 0, this._defaultProvider]]), ...this._clientProviders].forEach((keyProviderTuple) => {\n      var _a;\n      const clientName = keyProviderTuple[0];\n      const provider = keyProviderTuple[1];\n      const shouldRunNow = statusMatchesEvent(eventType, keyProviderTuple[1].status);\n      if (shouldRunNow) {\n        try {\n          handler({ clientName, providerName: provider.metadata.name });\n        } catch (err) {\n          (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n        }\n      }\n    });\n    this._events.addHandler(eventType, handler);\n  }\n  /**\n   * Removes a handler for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to remove the listener for\n   * @param {EventHandler} handler The handler to remove for the provider event type\n   */\n  removeHandler(eventType, handler) {\n    this._events.removeHandler(eventType, handler);\n  }\n  /**\n   * Removes all event handlers.\n   */\n  clearHandlers() {\n    this._events.removeAllHandlers();\n  }\n  /**\n   * Gets the current handlers for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to get the current handlers for\n   * @returns {EventHandler[]} The handlers currently attached to the given provider event type\n   */\n  getHandlers(eventType) {\n    return this._events.getHandlers(eventType);\n  }\n  setProviderAndWait(clientOrProvider, providerOrUndefined) {\n    return __async(this, null, function* () {\n      yield this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    });\n  }\n  setProvider(clientOrProvider, providerOrUndefined) {\n    const maybePromise = this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    if (maybePromise) {\n      maybePromise.catch(() => {\n      });\n    }\n    return this;\n  }\n  setAwaitableProvider(clientOrProvider, providerOrUndefined) {\n    var _a, _b, _c, _d, _e, _f;\n    const clientName = stringOrUndefined(clientOrProvider);\n    const provider = (_a = objectOrUndefined(clientOrProvider)) != null ? _a : objectOrUndefined(providerOrUndefined);\n    if (!provider) {\n      this._logger.debug(\"No provider defined, ignoring setProvider call\");\n      return;\n    }\n    const oldProvider = this.getProviderForClient(clientName);\n    const providerName = provider.metadata.name;\n    if (oldProvider === provider) {\n      this._logger.debug(\"Provider is already set, ignoring setProvider call\");\n      return;\n    }\n    if (!provider.runsOn) {\n      this._logger.debug(`Provider '${provider.metadata.name}' has not defined its intended use.`);\n    } else if (provider.runsOn !== this._runsOn) {\n      throw new GeneralError(`Provider '${provider.metadata.name}' is intended for use on the ${provider.runsOn}.`);\n    }\n    const emitters = this.getAssociatedEventEmitters(clientName);\n    if (typeof provider.initialize === \"function\" && provider.status === void 0) {\n      const activeLogger = this._logger || console;\n      activeLogger.warn(\n        `Provider ${providerName} implements 'initialize' but not 'status'. Please implement 'status'.`\n      );\n    }\n    let initializationPromise = void 0;\n    if ((provider == null ? void 0 : provider.status) === \"NOT_READY\" /* NOT_READY */ && typeof provider.initialize === \"function\") {\n      initializationPromise = (_d = (_c = (_b = provider.initialize) == null ? void 0 : _b.call(provider, this._context)) == null ? void 0 : _c.then(() => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      })) == null ? void 0 : _d.catch((error) => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        throw error;\n      });\n    } else {\n      emitters.forEach((emitter) => {\n        emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      });\n      (_e = this._events) == null ? void 0 : _e.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n    }\n    if (clientName) {\n      this._clientProviders.set(clientName, provider);\n    } else {\n      this._defaultProvider = provider;\n    }\n    this.transferListeners(oldProvider, provider, clientName, emitters);\n    if (![...this._clientProviders.values(), this._defaultProvider].includes(oldProvider)) {\n      (_f = oldProvider == null ? void 0 : oldProvider.onClose) == null ? void 0 : _f.call(oldProvider);\n    }\n    return initializationPromise;\n  }\n  getProviderForClient(name) {\n    var _a;\n    if (!name) {\n      return this._defaultProvider;\n    }\n    return (_a = this._clientProviders.get(name)) != null ? _a : this._defaultProvider;\n  }\n  buildAndCacheEventEmitterForClient(name) {\n    const emitter = this._clientEvents.get(name);\n    if (emitter) {\n      return emitter;\n    }\n    const newEmitter = this._createEventEmitter();\n    this._clientEvents.set(name, newEmitter);\n    const clientProvider = this.getProviderForClient(name);\n    Object.values(ClientProviderEvents).forEach(\n      (eventType) => {\n        var _a;\n        return (_a = clientProvider.events) == null ? void 0 : _a.addHandler(eventType, (details) => __async(this, null, function* () {\n          newEmitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName: name, providerName: clientProvider.metadata.name }));\n        }));\n      }\n    );\n    return newEmitter;\n  }\n  getUnboundEmitters() {\n    const namedProviders = [...this._clientProviders.keys()];\n    const eventEmitterNames = [...this._clientEvents.keys()].filter(isDefined);\n    const unboundEmitterNames = eventEmitterNames.filter((name) => !namedProviders.includes(name));\n    return [\n      // all unbound, named emitters\n      ...unboundEmitterNames.map((name) => this._clientEvents.get(name)),\n      // the default emitter\n      this._clientEvents.get(void 0)\n    ].filter(isDefined);\n  }\n  getAssociatedEventEmitters(clientName) {\n    return clientName ? [this.buildAndCacheEventEmitterForClient(clientName)] : this.getUnboundEmitters();\n  }\n  transferListeners(oldProvider, newProvider, clientName, emitters) {\n    var _a;\n    (_a = this._clientEventHandlers.get(clientName)) == null ? void 0 : _a.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = oldProvider.events) == null ? void 0 : _a2.removeHandler(...eventHandler);\n    });\n    const newClientHandlers = Object.values(ClientProviderEvents).map((eventType) => {\n      const handler = (details) => __async(this, null, function* () {\n        emitters.forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n        });\n        this._events.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n      });\n      return [eventType, handler];\n    });\n    this._clientEventHandlers.set(clientName, newClientHandlers);\n    newClientHandlers.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = newProvider.events) == null ? void 0 : _a2.addHandler(...eventHandler);\n    });\n  }\n  close() {\n    return __async(this, null, function* () {\n      var _a, _b;\n      try {\n        yield (_b = (_a = this == null ? void 0 : this._defaultProvider) == null ? void 0 : _a.onClose) == null ? void 0 : _b.call(_a);\n      } catch (err) {\n        this.handleShutdownError(this._defaultProvider, err);\n      }\n      const providers = Array.from(this._clientProviders);\n      yield Promise.all(\n        providers.map((_0) => __async(this, [_0], function* ([, provider]) {\n          var _a2;\n          try {\n            yield (_a2 = provider.onClose) == null ? void 0 : _a2.call(provider);\n          } catch (err) {\n            this.handleShutdownError(provider, err);\n          }\n        }))\n      );\n    });\n  }\n  clearProvidersAndSetDefault(defaultProvider) {\n    return __async(this, null, function* () {\n      try {\n        yield this.close();\n      } catch (err) {\n        this._logger.error(\"Unable to cleanly close providers. Resetting to the default configuration.\");\n      } finally {\n        this._clientProviders.clear();\n        this._defaultProvider = defaultProvider;\n      }\n    });\n  }\n  handleShutdownError(provider, err) {\n    this._logger.error(`Error during shutdown of provider ${provider.metadata.name}: ${err}`);\n    this._logger.error(err == null ? void 0 : err.stack);\n  }\n};\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __reflectGet = Reflect.get;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __superGet = (cls, obj, key) => __reflectGet(__getProtoOf(cls), key, obj);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/events/events.js\nvar require_events = __commonJS({\n  \"../../node_modules/events/events.js\"(exports, module2) {\n    \"use strict\";\n    var R = typeof Reflect === \"object\" ? Reflect : null;\n    var ReflectApply = R && typeof R.apply === \"function\" ? R.apply : function ReflectApply2(target, receiver, args) {\n      return Function.prototype.apply.call(target, receiver, args);\n    };\n    var ReflectOwnKeys;\n    if (R && typeof R.ownKeys === \"function\") {\n      ReflectOwnKeys = R.ownKeys;\n    } else if (Object.getOwnPropertySymbols) {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n      };\n    } else {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target);\n      };\n    }\n    function ProcessEmitWarning(warning) {\n      if (console && console.warn)\n        console.warn(warning);\n    }\n    var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {\n      return value !== value;\n    };\n    function EventEmitter2() {\n      EventEmitter2.init.call(this);\n    }\n    module2.exports = EventEmitter2;\n    module2.exports.once = once;\n    EventEmitter2.EventEmitter = EventEmitter2;\n    EventEmitter2.prototype._events = void 0;\n    EventEmitter2.prototype._eventsCount = 0;\n    EventEmitter2.prototype._maxListeners = void 0;\n    var defaultMaxListeners = 10;\n    function checkListener(listener) {\n      if (typeof listener !== \"function\") {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n    }\n    Object.defineProperty(EventEmitter2, \"defaultMaxListeners\", {\n      enumerable: true,\n      get: function() {\n        return defaultMaxListeners;\n      },\n      set: function(arg) {\n        if (typeof arg !== \"number\" || arg < 0 || NumberIsNaN(arg)) {\n          throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + \".\");\n        }\n        defaultMaxListeners = arg;\n      }\n    });\n    EventEmitter2.init = function() {\n      if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n      }\n      this._maxListeners = this._maxListeners || void 0;\n    };\n    EventEmitter2.prototype.setMaxListeners = function setMaxListeners(n) {\n      if (typeof n !== \"number\" || n < 0 || NumberIsNaN(n)) {\n        throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + \".\");\n      }\n      this._maxListeners = n;\n      return this;\n    };\n    function _getMaxListeners(that) {\n      if (that._maxListeners === void 0)\n        return EventEmitter2.defaultMaxListeners;\n      return that._maxListeners;\n    }\n    EventEmitter2.prototype.getMaxListeners = function getMaxListeners() {\n      return _getMaxListeners(this);\n    };\n    EventEmitter2.prototype.emit = function emit(type) {\n      var args = [];\n      for (var i = 1; i < arguments.length; i++)\n        args.push(arguments[i]);\n      var doError = type === \"error\";\n      var events = this._events;\n      if (events !== void 0)\n        doError = doError && events.error === void 0;\n      else if (!doError)\n        return false;\n      if (doError) {\n        var er;\n        if (args.length > 0)\n          er = args[0];\n        if (er instanceof Error) {\n          throw er;\n        }\n        var err = new Error(\"Unhandled error.\" + (er ? \" (\" + er.message + \")\" : \"\"));\n        err.context = er;\n        throw err;\n      }\n      var handler = events[type];\n      if (handler === void 0)\n        return false;\n      if (typeof handler === \"function\") {\n        ReflectApply(handler, this, args);\n      } else {\n        var len = handler.length;\n        var listeners = arrayClone(handler, len);\n        for (var i = 0; i < len; ++i)\n          ReflectApply(listeners[i], this, args);\n      }\n      return true;\n    };\n    function _addListener(target, type, listener, prepend) {\n      var m;\n      var events;\n      var existing;\n      checkListener(listener);\n      events = target._events;\n      if (events === void 0) {\n        events = target._events = /* @__PURE__ */ Object.create(null);\n        target._eventsCount = 0;\n      } else {\n        if (events.newListener !== void 0) {\n          target.emit(\n            \"newListener\",\n            type,\n            listener.listener ? listener.listener : listener\n          );\n          events = target._events;\n        }\n        existing = events[type];\n      }\n      if (existing === void 0) {\n        existing = events[type] = listener;\n        ++target._eventsCount;\n      } else {\n        if (typeof existing === \"function\") {\n          existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n        } else if (prepend) {\n          existing.unshift(listener);\n        } else {\n          existing.push(listener);\n        }\n        m = _getMaxListeners(target);\n        if (m > 0 && existing.length > m && !existing.warned) {\n          existing.warned = true;\n          var w = new Error(\"Possible EventEmitter memory leak detected. \" + existing.length + \" \" + String(type) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n          w.name = \"MaxListenersExceededWarning\";\n          w.emitter = target;\n          w.type = type;\n          w.count = existing.length;\n          ProcessEmitWarning(w);\n        }\n      }\n      return target;\n    }\n    EventEmitter2.prototype.addListener = function addListener(type, listener) {\n      return _addListener(this, type, listener, false);\n    };\n    EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;\n    EventEmitter2.prototype.prependListener = function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n    function onceWrapper() {\n      if (!this.fired) {\n        this.target.removeListener(this.type, this.wrapFn);\n        this.fired = true;\n        if (arguments.length === 0)\n          return this.listener.call(this.target);\n        return this.listener.apply(this.target, arguments);\n      }\n    }\n    function _onceWrap(target, type, listener) {\n      var state = { fired: false, wrapFn: void 0, target, type, listener };\n      var wrapped = onceWrapper.bind(state);\n      wrapped.listener = listener;\n      state.wrapFn = wrapped;\n      return wrapped;\n    }\n    EventEmitter2.prototype.once = function once2(type, listener) {\n      checkListener(listener);\n      this.on(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.removeListener = function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n      checkListener(listener);\n      events = this._events;\n      if (events === void 0)\n        return this;\n      list = events[type];\n      if (list === void 0)\n        return this;\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = /* @__PURE__ */ Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit(\"removeListener\", type, list.listener || listener);\n        }\n      } else if (typeof list !== \"function\") {\n        position = -1;\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n        if (position < 0)\n          return this;\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n        if (list.length === 1)\n          events[type] = list[0];\n        if (events.removeListener !== void 0)\n          this.emit(\"removeListener\", type, originalListener || listener);\n      }\n      return this;\n    };\n    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(type) {\n      var listeners, events, i;\n      events = this._events;\n      if (events === void 0)\n        return this;\n      if (events.removeListener === void 0) {\n        if (arguments.length === 0) {\n          this._events = /* @__PURE__ */ Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== void 0) {\n          if (--this._eventsCount === 0)\n            this._events = /* @__PURE__ */ Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === \"removeListener\")\n            continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners(\"removeListener\");\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n      listeners = events[type];\n      if (typeof listeners === \"function\") {\n        this.removeListener(type, listeners);\n      } else if (listeners !== void 0) {\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n      return this;\n    };\n    function _listeners(target, type, unwrap) {\n      var events = target._events;\n      if (events === void 0)\n        return [];\n      var evlistener = events[type];\n      if (evlistener === void 0)\n        return [];\n      if (typeof evlistener === \"function\")\n        return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n      return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n    }\n    EventEmitter2.prototype.listeners = function listeners(type) {\n      return _listeners(this, type, true);\n    };\n    EventEmitter2.prototype.rawListeners = function rawListeners(type) {\n      return _listeners(this, type, false);\n    };\n    EventEmitter2.listenerCount = function(emitter, type) {\n      if (typeof emitter.listenerCount === \"function\") {\n        return emitter.listenerCount(type);\n      } else {\n        return listenerCount.call(emitter, type);\n      }\n    };\n    EventEmitter2.prototype.listenerCount = listenerCount;\n    function listenerCount(type) {\n      var events = this._events;\n      if (events !== void 0) {\n        var evlistener = events[type];\n        if (typeof evlistener === \"function\") {\n          return 1;\n        } else if (evlistener !== void 0) {\n          return evlistener.length;\n        }\n      }\n      return 0;\n    }\n    EventEmitter2.prototype.eventNames = function eventNames() {\n      return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n    };\n    function arrayClone(arr, n) {\n      var copy = new Array(n);\n      for (var i = 0; i < n; ++i)\n        copy[i] = arr[i];\n      return copy;\n    }\n    function spliceOne(list, index) {\n      for (; index + 1 < list.length; index++)\n        list[index] = list[index + 1];\n      list.pop();\n    }\n    function unwrapListeners(arr) {\n      var ret = new Array(arr.length);\n      for (var i = 0; i < ret.length; ++i) {\n        ret[i] = arr[i].listener || arr[i];\n      }\n      return ret;\n    }\n    function once(emitter, name) {\n      return new Promise(function(resolve, reject) {\n        function errorListener(err) {\n          emitter.removeListener(name, resolver);\n          reject(err);\n        }\n        function resolver() {\n          if (typeof emitter.removeListener === \"function\") {\n            emitter.removeListener(\"error\", errorListener);\n          }\n          resolve([].slice.call(arguments));\n        }\n        ;\n        eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n        if (name !== \"error\") {\n          addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n        }\n      });\n    }\n    function addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n      if (typeof emitter.on === \"function\") {\n        eventTargetAgnosticAddListener(emitter, \"error\", handler, flags);\n      }\n    }\n    function eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n      if (typeof emitter.on === \"function\") {\n        if (flags.once) {\n          emitter.once(name, listener);\n        } else {\n          emitter.on(name, listener);\n        }\n      } else if (typeof emitter.addEventListener === \"function\") {\n        emitter.addEventListener(name, function wrapListener(arg) {\n          if (flags.once) {\n            emitter.removeEventListener(name, wrapListener);\n          }\n          listener(arg);\n        });\n      } else {\n        throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n      }\n    }\n  }\n});\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  InMemoryProvider: () => InMemoryProvider,\n  NOOP_PROVIDER: () => NOOP_PROVIDER,\n  OpenFeature: () => OpenFeature,\n  OpenFeatureAPI: () => OpenFeatureAPI,\n  OpenFeatureClient: () => OpenFeatureClient,\n  OpenFeatureEventEmitter: () => OpenFeatureEventEmitter,\n  ProviderEvents: () => import_core2.ClientProviderEvents\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/client/open-feature-client.ts\nvar import_core7 = require(\"@openfeature/core\");\n\n// src/open-feature.ts\nvar import_core6 = require(\"@openfeature/core\");\n\n// src/events/open-feature-event-emitter.ts\nvar import_core = require(\"@openfeature/core\");\nvar import_events = __toESM(require_events());\nvar OpenFeatureEventEmitter = class extends import_core.GenericEventEmitter {\n  constructor() {\n    super();\n    this.eventEmitter = new import_events.default({ captureRejections: true });\n    this.eventEmitter.on(\"error\", (err) => {\n      var _a;\n      (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n    });\n  }\n};\n\n// src/events/events.ts\nvar import_core2 = require(\"@openfeature/core\");\n\n// src/provider/no-op-provider.ts\nvar import_core3 = require(\"@openfeature/core\");\nvar REASON_NO_OP = \"No-op\";\nvar NoopFeatureProvider = class {\n  constructor() {\n    this.metadata = {\n      name: \"No-op Provider\"\n    };\n  }\n  get status() {\n    return import_core3.ProviderStatus.NOT_READY;\n  }\n  resolveBooleanEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveStringEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveNumberEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveObjectEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  noOp(defaultValue) {\n    return {\n      value: defaultValue,\n      reason: REASON_NO_OP\n    };\n  }\n};\nvar NOOP_PROVIDER = new NoopFeatureProvider();\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar import_core5 = require(\"@openfeature/core\");\n\n// src/provider/in-memory-provider/variant-not-found-error.ts\nvar import_core4 = require(\"@openfeature/core\");\nvar VariantNotFoundError = class extends import_core4.OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, VariantNotFoundError.prototype);\n    this.name = \"VariantNotFoundError\";\n    this.code = import_core4.ErrorCode.GENERAL;\n  }\n};\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar InMemoryProvider = class {\n  constructor(flagConfiguration = {}) {\n    this.events = new OpenFeatureEventEmitter();\n    this.runsOn = \"client\";\n    this.status = import_core5.ProviderStatus.NOT_READY;\n    this.metadata = {\n      name: \"in-memory\"\n    };\n    this._flagConfiguration = __spreadValues({}, flagConfiguration);\n  }\n  initialize(context) {\n    return __async(this, null, function* () {\n      try {\n        for (const key in this._flagConfiguration) {\n          this.resolveFlagWithReason(key, context);\n        }\n        this._context = context;\n        this.status = import_core5.ProviderStatus.READY;\n      } catch (error) {\n        this.status = import_core5.ProviderStatus.ERROR;\n        throw error;\n      }\n    });\n  }\n  /**\n   * Overwrites the configured flags.\n   * @param { FlagConfiguration } flagConfiguration new flag configuration\n   */\n  putConfiguration(flagConfiguration) {\n    return __async(this, null, function* () {\n      const flagsChanged = Object.entries(flagConfiguration).filter(([key, value]) => this._flagConfiguration[key] !== value).map(([key]) => key);\n      this.status = import_core5.ProviderStatus.STALE;\n      this.events.emit(import_core2.ClientProviderEvents.Stale);\n      this._flagConfiguration = __spreadValues({}, flagConfiguration);\n      this.events.emit(import_core2.ClientProviderEvents.ConfigurationChanged, { flagsChanged });\n      try {\n        yield this.initialize(this._context);\n        this.events.emit(import_core2.ClientProviderEvents.Ready);\n      } catch (err) {\n        this.events.emit(import_core2.ClientProviderEvents.Error);\n        throw err;\n      }\n    });\n  }\n  resolveBooleanEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveNumberEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveStringEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveObjectEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveAndCheckFlag(flagKey, defaultValue, context, logger) {\n    if (!(flagKey in this._flagConfiguration)) {\n      const message = `no flag found with key ${flagKey}`;\n      logger == null ? void 0 : logger.debug(message);\n      throw new import_core5.FlagNotFoundError(message);\n    }\n    if (this._flagConfiguration[flagKey].disabled) {\n      return { value: defaultValue, reason: import_core5.StandardResolutionReasons.DISABLED };\n    }\n    const resolvedFlag = this.resolveFlagWithReason(flagKey, context);\n    if (resolvedFlag.value === void 0) {\n      const message = `no value associated with variant provided for ${flagKey} found`;\n      logger == null ? void 0 : logger.error(message);\n      throw new VariantNotFoundError(message);\n    }\n    if (typeof resolvedFlag.value != typeof defaultValue) {\n      throw new import_core5.TypeMismatchError();\n    }\n    return resolvedFlag;\n  }\n  resolveFlagWithReason(flagKey, ctx) {\n    try {\n      const resolutionResult = this.lookupFlagValue(flagKey, ctx);\n      return resolutionResult;\n    } catch (error) {\n      if (!(error instanceof import_core5.OpenFeatureError)) {\n        throw new import_core5.GeneralError((error == null ? void 0 : error.message) || \"unknown error\");\n      }\n      throw error;\n    }\n  }\n  lookupFlagValue(flagKey, ctx) {\n    var _a;\n    const flagSpec = this._flagConfiguration[flagKey];\n    const isContextEval = ctx && (flagSpec == null ? void 0 : flagSpec.contextEvaluator);\n    const variant = isContextEval ? (_a = flagSpec.contextEvaluator) == null ? void 0 : _a.call(flagSpec, ctx) : flagSpec.defaultVariant;\n    const value = variant && (flagSpec == null ? void 0 : flagSpec.variants[variant]);\n    const evalReason = isContextEval ? import_core5.StandardResolutionReasons.TARGETING_MATCH : import_core5.StandardResolutionReasons.STATIC;\n    const reason = this.status === import_core5.ProviderStatus.STALE ? import_core5.StandardResolutionReasons.CACHED : evalReason;\n    return __spreadProps(__spreadValues({\n      value\n    }, variant && { variant }), {\n      reason\n    });\n  }\n};\n\n// src/open-feature.ts\nvar GLOBAL_OPENFEATURE_API_KEY = Symbol.for(\"@openfeature/web-sdk/api\");\nvar _globalThis = globalThis;\nvar OpenFeatureAPI = class extends import_core6.OpenFeatureCommonAPI {\n  constructor() {\n    super(\"client\");\n    this._events = new OpenFeatureEventEmitter();\n    this._defaultProvider = NOOP_PROVIDER;\n    this._createEventEmitter = () => new OpenFeatureEventEmitter();\n    this._namedProviderContext = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Gets a singleton instance of the OpenFeature API.\n   * @ignore\n   * @returns {OpenFeatureAPI} OpenFeature API\n   */\n  static getInstance() {\n    const globalApi = _globalThis[GLOBAL_OPENFEATURE_API_KEY];\n    if (globalApi) {\n      return globalApi;\n    }\n    const instance = new OpenFeatureAPI();\n    _globalThis[GLOBAL_OPENFEATURE_API_KEY] = instance;\n    return instance;\n  }\n  setContext(nameOrContext, contextOrUndefined) {\n    return __async(this, null, function* () {\n      var _a, _b;\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrContext);\n      const context = (_b = (_a = (0, import_core6.objectOrUndefined)(nameOrContext)) != null ? _a : (0, import_core6.objectOrUndefined)(contextOrUndefined)) != null ? _b : {};\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.set(clientName, context);\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, context);\n        } else {\n          this._namedProviderContext.set(clientName, context);\n        }\n      } else {\n        const oldContext = this._context;\n        this._context = context;\n        const defaultContextNameProviders = Array.from(this._clientProviders.entries()).filter(([name]) => !this._namedProviderContext.has(name)).reduce((acc, [name, provider]) => {\n          acc.push({ name, provider });\n          return acc;\n        }, []);\n        const allProviders = [\n          // add in the default (no name)\n          { name: void 0, provider: this._defaultProvider },\n          ...defaultContextNameProviders\n        ];\n        yield Promise.all(\n          allProviders.map(\n            (tuple) => this.runProviderContextChangeHandler(tuple.name, tuple.provider, oldContext, context)\n          )\n        );\n      }\n    });\n  }\n  getContext(nameOrUndefined) {\n    const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n    if (clientName) {\n      const context = this._namedProviderContext.get(clientName);\n      if (context) {\n        return context;\n      } else {\n        this._logger.debug(`Unable to find context for '${clientName}'.`);\n      }\n    }\n    return this._context;\n  }\n  clearContext(nameOrUndefined) {\n    return __async(this, null, function* () {\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.delete(clientName);\n          const newContext = this.getContext();\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, newContext);\n        } else {\n          this._namedProviderContext.delete(clientName);\n        }\n      } else {\n        return this.setContext({});\n      }\n    });\n  }\n  /**\n   * Resets the global evaluation context and removes the evaluation context for\n   * all named clients.\n   */\n  clearContexts() {\n    return __async(this, null, function* () {\n      yield this.clearContext();\n      yield Promise.allSettled(Array.from(this._clientProviders.keys()).map((name) => this.clearContext(name)));\n    });\n  }\n  /**\n   * A factory function for creating new named OpenFeature clients. Clients can contain\n   * their own state (e.g. logger, hook, context). Multiple clients can be used\n   * to segment feature flag configuration.\n   *\n   * If there is already a provider bound to this name via {@link this.setProvider setProvider}, this provider will be used.\n   * Otherwise, the default provider is used until a provider is assigned to that name.\n   * @param {string} name The name of the client\n   * @param {string} version The version of the client (only used for metadata)\n   * @returns {Client} OpenFeature Client\n   */\n  getClient(name, version) {\n    return new OpenFeatureClient(\n      // functions are passed here to make sure that these values are always up to date,\n      // and so we don't have to make these public properties on the API class.\n      () => this.getProviderForClient(name),\n      () => this.buildAndCacheEventEmitterForClient(name),\n      () => this._logger,\n      { name, version }\n    );\n  }\n  /**\n   * Clears all registered providers and resets the default provider.\n   * @returns {Promise<void>}\n   */\n  clearProviders() {\n    return __async(this, null, function* () {\n      yield __superGet(OpenFeatureAPI.prototype, this, \"clearProvidersAndSetDefault\").call(this, NOOP_PROVIDER);\n      this._namedProviderContext.clear();\n    });\n  }\n  runProviderContextChangeHandler(clientName, provider, oldContext, newContext) {\n    return __async(this, null, function* () {\n      var _a, _b, _c, _d, _e;\n      const providerName = provider.metadata.name;\n      try {\n        yield (_a = provider.onContextChange) == null ? void 0 : _a.call(provider, oldContext, newContext);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n        });\n        (_b = this._events) == null ? void 0 : _b.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n      } catch (err) {\n        const error = err;\n        const message = `Error running ${(_c = provider == null ? void 0 : provider.metadata) == null ? void 0 : _c.name}'s context change handler: ${error == null ? void 0 : error.message}`;\n        (_d = this._logger) == null ? void 0 : _d.error(`${message}`, err);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n        });\n        (_e = this._events) == null ? void 0 : _e.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n      }\n    });\n  }\n};\nvar OpenFeature = OpenFeatureAPI.getInstance();\n\n// src/client/open-feature-client.ts\nvar OpenFeatureClient = class {\n  constructor(providerAccessor, emitterAccessor, globalLogger, options) {\n    this.providerAccessor = providerAccessor;\n    this.emitterAccessor = emitterAccessor;\n    this.globalLogger = globalLogger;\n    this.options = options;\n    this._hooks = [];\n  }\n  get metadata() {\n    return {\n      name: this.options.name,\n      version: this.options.version,\n      providerMetadata: this.providerAccessor().metadata\n    };\n  }\n  get providerStatus() {\n    var _a;\n    return ((_a = this.providerAccessor()) == null ? void 0 : _a.status) || import_core7.ProviderStatus.READY;\n  }\n  addHandler(eventType, handler) {\n    var _a;\n    this.emitterAccessor().addHandler(eventType, handler);\n    const shouldRunNow = (0, import_core7.statusMatchesEvent)(eventType, this._provider.status);\n    if (shouldRunNow) {\n      try {\n        handler({ clientName: this.metadata.name, providerName: this._provider.metadata.name });\n      } catch (err) {\n        (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n      }\n    }\n  }\n  removeHandler(notificationType, handler) {\n    this.emitterAccessor().removeHandler(notificationType, handler);\n  }\n  getHandlers(eventType) {\n    return this.emitterAccessor().getHandlers(eventType);\n  }\n  setLogger(logger) {\n    this._clientLogger = new import_core7.SafeLogger(logger);\n    return this;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  getBooleanValue(flagKey, defaultValue, options) {\n    return this.getBooleanDetails(flagKey, defaultValue, options).value;\n  }\n  getBooleanDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveBooleanEvaluation, defaultValue, \"boolean\", options);\n  }\n  getStringValue(flagKey, defaultValue, options) {\n    return this.getStringDetails(flagKey, defaultValue, options).value;\n  }\n  getStringDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted string generic argument.\n      this._provider.resolveStringEvaluation,\n      defaultValue,\n      \"string\",\n      options\n    );\n  }\n  getNumberValue(flagKey, defaultValue, options) {\n    return this.getNumberDetails(flagKey, defaultValue, options).value;\n  }\n  getNumberDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted number generic argument.\n      this._provider.resolveNumberEvaluation,\n      defaultValue,\n      \"number\",\n      options\n    );\n  }\n  getObjectValue(flagKey, defaultValue, options) {\n    return this.getObjectDetails(flagKey, defaultValue, options).value;\n  }\n  getObjectDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveObjectEvaluation, defaultValue, \"object\", options);\n  }\n  evaluate(flagKey, resolver, defaultValue, flagType, options = {}) {\n    var _a, _b;\n    const allHooks = [\n      ...OpenFeature.getHooks(),\n      ...this.getHooks(),\n      ...options.hooks || [],\n      ...this._provider.hooks || []\n    ];\n    const allHooksReversed = [...allHooks].reverse();\n    const context = __spreadValues({}, OpenFeature.getContext((_a = this == null ? void 0 : this.options) == null ? void 0 : _a.name));\n    const hookContext = {\n      flagKey,\n      defaultValue,\n      flagValueType: flagType,\n      clientMetadata: this.metadata,\n      providerMetadata: OpenFeature.providerMetadata,\n      context,\n      logger: this._logger\n    };\n    try {\n      this.beforeHooks(allHooks, hookContext, options);\n      const resolution = resolver.call(this._provider, flagKey, defaultValue, context, this._logger);\n      const evaluationDetails = __spreadProps(__spreadValues({}, resolution), {\n        flagMetadata: Object.freeze((_b = resolution.flagMetadata) != null ? _b : {}),\n        flagKey\n      });\n      this.afterHooks(allHooksReversed, hookContext, evaluationDetails, options);\n      return evaluationDetails;\n    } catch (err) {\n      const errorMessage = err == null ? void 0 : err.message;\n      const errorCode = (err == null ? void 0 : err.code) || import_core7.ErrorCode.GENERAL;\n      this.errorHooks(allHooksReversed, hookContext, err, options);\n      return {\n        errorCode,\n        errorMessage,\n        value: defaultValue,\n        reason: import_core7.StandardResolutionReasons.ERROR,\n        flagMetadata: Object.freeze({}),\n        flagKey\n      };\n    } finally {\n      this.finallyHooks(allHooksReversed, hookContext, options);\n    }\n  }\n  beforeHooks(hooks, hookContext, options) {\n    var _a;\n    Object.freeze(hookContext);\n    Object.freeze(hookContext.context);\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.before) == null ? void 0 : _a.call(hook, hookContext, Object.freeze(options.hookHints));\n    }\n  }\n  afterHooks(hooks, hookContext, evaluationDetails, options) {\n    var _a;\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.after) == null ? void 0 : _a.call(hook, hookContext, evaluationDetails, options.hookHints);\n    }\n  }\n  errorHooks(hooks, hookContext, err, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.error) == null ? void 0 : _a.call(hook, hookContext, err, options.hookHints);\n      } catch (err2) {\n        this._logger.error(`Unhandled error during 'error' hook: ${err2}`);\n        if (err2 instanceof Error) {\n          this._logger.error(err2.stack);\n        }\n        this._logger.error(err2 == null ? void 0 : err2.stack);\n      }\n    }\n  }\n  finallyHooks(hooks, hookContext, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.finally) == null ? void 0 : _a.call(hook, hookContext, options.hookHints);\n      } catch (err) {\n        this._logger.error(`Unhandled error during 'finally' hook: ${err}`);\n        if (err instanceof Error) {\n          this._logger.error(err.stack);\n        }\n        this._logger.error(err == null ? void 0 : err.stack);\n      }\n    }\n  }\n  get _provider() {\n    return this.providerAccessor();\n  }\n  get _logger() {\n    return this._clientLogger || this.globalLogger();\n  }\n};\n\n// src/index.ts\n__reExport(src_exports, require(\"@openfeature/core\"), module.exports);\n//# sourceMappingURL=index.js.map\n","import { FbProvider } from '@featbit/openfeature-provider-js-client';\r\nimport { EventDetails, OpenFeature, ProviderEvents } from '@openfeature/web-sdk';\r\nimport { IOptions } from \"@featbit/js-client-sdk\";\r\n\r\n(async () => {\r\n   const streamingUri = 'wss://app-eval.featbit.co';\r\n   const eventsUri = 'https://app-eval.featbit.co';\r\n   const sdkKey = 'Obg68EqYZk27JTxphPgy7At1aJ8GaAtEaIA1fb3IpuEA';\r\n\r\n   const user = {\r\n      name: 'the-user',\r\n      keyId: 'the-user',\r\n      customizedProperties: [],\r\n   };\r\n\r\n   const option: IOptions = {\r\n      sdkKey: sdkKey,\r\n      streamingUri: streamingUri,\r\n      eventsUri: eventsUri,\r\n      user: user,\r\n   };\r\n\r\n   const provider = new FbProvider(option);\r\n\r\n   // uncomment this line if you want to set a different context\r\n   // await OpenFeature.setContext(user);\r\n\r\n   await OpenFeature.setProviderAndWait(provider);\r\n\r\n   OpenFeature.addHandler(ProviderEvents.ConfigurationChanged, (eventDetails: EventDetails) => {\r\n      const client = OpenFeature.getClient();\r\n      const value = client.getStringValue('robot', 'ChatGPT');\r\n      console.log({...eventDetails, value});\r\n   });\r\n\r\n   const client = OpenFeature.getClient();\r\n\r\n   const value = client.getStringValue('robot', 'ChatGPT');\r\n   console.log(value);\r\n})()","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultValues = void 0;\nconst Validators_1 = require(\"./options/Validators\");\nconst OptionMessages_1 = __importDefault(require(\"./options/OptionMessages\"));\nconst InMemoryStore_1 = __importDefault(require(\"./store/InMemoryStore\"));\nconst isNullOrUndefined_1 = require(\"./utils/isNullOrUndefined\");\nconst canonicalizeUri_1 = require(\"./utils/canonicalizeUri\");\nconst NullBootstrapProvider_1 = require(\"./bootstrap/NullBootstrapProvider\");\nconst constants_1 = require(\"./constants\");\nconst DataSyncMode_1 = require(\"./data-sync/DataSyncMode\");\nconst bootstrap_1 = require(\"./bootstrap\");\n// Once things are internal to the implementation of the SDK we can depend on\n// types. Calls to the SDK could contain anything without any regard to typing.\n// So, data we take from external sources must be normalized into something\n// that can be trusted.\n/**\n * These perform cursory validations. Complex objects are implemented with classes\n * and these should allow for conditional construction.\n */\nconst validations = {\n    startWaitTime: Validators_1.TypeValidators.Number,\n    sdkKey: Validators_1.TypeValidators.String,\n    pollingUri: Validators_1.TypeValidators.String,\n    streamingUri: Validators_1.TypeValidators.String,\n    eventsUri: Validators_1.TypeValidators.String,\n    webSocketPingInterval: Validators_1.TypeValidators.Number,\n    logger: Validators_1.TypeValidators.Object,\n    store: Validators_1.TypeValidators.ObjectOrFactory,\n    dataSynchronizer: Validators_1.TypeValidators.ObjectOrFactory,\n    flushInterval: Validators_1.TypeValidators.Number,\n    maxEventsInQueue: Validators_1.TypeValidators.Number,\n    pollingInterval: Validators_1.TypeValidators.Number,\n    offline: Validators_1.TypeValidators.Boolean,\n    dataSyncMode: Validators_1.TypeValidators.String,\n    bootstrap: Validators_1.TypeValidators.Bootstrap,\n    user: Validators_1.TypeValidators.User\n};\n/**\n * @internal\n */\nexports.defaultValues = {\n    startWaitTime: 5000,\n    sdkKey: '',\n    pollingUri: '',\n    streamingUri: '',\n    eventsUri: '',\n    dataSyncMode: DataSyncMode_1.DataSyncModeEnum.STREAMING,\n    sendEvents: true,\n    webSocketPingInterval: 18 * 1000,\n    flushInterval: 2000,\n    maxEventsInQueue: 10000,\n    pollingInterval: 30000,\n    offline: false,\n    store: (options) => new InMemoryStore_1.default(),\n    bootstrap: undefined,\n    user: undefined,\n};\nfunction validateTypesAndNames(options) {\n    let errors = [];\n    const validatedOptions = Object.assign({}, exports.defaultValues);\n    Object.keys(options).forEach((optionName) => {\n        var _a;\n        // We need to tell typescript it doesn't actually know what options are.\n        // If we don't then it complains we are doing crazy things with it.\n        const optionValue = options[optionName];\n        const validator = validations[optionName];\n        if (validator) {\n            if (!validator.is(optionValue)) {\n                if (validator.getType() === 'boolean') {\n                    errors.push(OptionMessages_1.default.wrongOptionTypeBoolean(optionName, typeof optionValue));\n                    validatedOptions[optionName] = !!optionValue;\n                }\n                else if (validator instanceof Validators_1.NumberWithMinimum &&\n                    Validators_1.TypeValidators.Number.is(optionValue)) {\n                    const { min } = validator;\n                    errors.push(OptionMessages_1.default.optionBelowMinimum(optionName, optionValue, min));\n                    validatedOptions[optionName] = min;\n                }\n                else if (validator instanceof Validators_1.UserValidator) {\n                    errors = [...errors, ...validator.messages];\n                    validatedOptions[optionName] = exports.defaultValues[optionName];\n                }\n                else {\n                    errors.push(OptionMessages_1.default.wrongOptionType(optionName, validator.getType(), typeof optionValue));\n                    validatedOptions[optionName] = exports.defaultValues[optionName];\n                }\n            }\n            else {\n                validatedOptions[optionName] = optionValue;\n            }\n        }\n        else {\n            (_a = options.logger) === null || _a === void 0 ? void 0 : _a.warn(OptionMessages_1.default.unknownOption(optionName));\n        }\n    });\n    return { errors, validatedOptions };\n}\nfunction validateEndpoints(options, validatedOptions) {\n    var _a, _b, _c;\n    const { streamingUri, pollingUri, eventsUri } = options;\n    const streamingUriMissing = (0, isNullOrUndefined_1.isNullOrUndefined)(streamingUri) || streamingUri === constants_1.EmptyString;\n    const pollingUriMissing = (0, isNullOrUndefined_1.isNullOrUndefined)(pollingUri) || pollingUri === constants_1.EmptyString;\n    const eventsUriMissing = (0, isNullOrUndefined_1.isNullOrUndefined)(eventsUri) || eventsUri === constants_1.EmptyString;\n    if (!validatedOptions.offline && (eventsUriMissing || (streamingUriMissing && pollingUriMissing))) {\n        if (eventsUriMissing) {\n            (_a = validatedOptions.logger) === null || _a === void 0 ? void 0 : _a.error(OptionMessages_1.default.partialEndpoint('eventsUri'));\n        }\n        if (validatedOptions.dataSyncMode === DataSyncMode_1.DataSyncModeEnum.STREAMING && streamingUriMissing) {\n            (_b = validatedOptions.logger) === null || _b === void 0 ? void 0 : _b.error(OptionMessages_1.default.partialEndpoint('streamingUri'));\n        }\n        if (validatedOptions.dataSyncMode === DataSyncMode_1.DataSyncModeEnum.POLLING && pollingUriMissing) {\n            (_c = validatedOptions.logger) === null || _c === void 0 ? void 0 : _c.error(OptionMessages_1.default.partialEndpoint('pollingUri'));\n        }\n    }\n}\nclass Configuration {\n    constructor(options = {}) {\n        var _a, _b;\n        this.bootstrapProvider = new NullBootstrapProvider_1.NullBootstrapProvider();\n        // The default will handle undefined, but not null.\n        // Because we can be called from JS we need to be extra defensive.\n        options = options || {};\n        // If there isn't a valid logger from the platform, then logs would go nowhere.\n        this.logger = options.logger;\n        const { errors, validatedOptions } = validateTypesAndNames(options);\n        errors.forEach((error) => {\n            var _a;\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.warn(error);\n        });\n        this.user = options.user;\n        validateEndpoints(options, validatedOptions);\n        this.streamingUri = `${(0, canonicalizeUri_1.canonicalizeUri)(validatedOptions.streamingUri)}/streaming`;\n        this.pollingUri = `${(0, canonicalizeUri_1.canonicalizeUri)(validatedOptions.pollingUri)}/api/public/sdk/client/latest-all`;\n        this.eventsUri = `${(0, canonicalizeUri_1.canonicalizeUri)(validatedOptions.eventsUri)}/api/public/insight/track`;\n        this.startWaitTime = validatedOptions.startWaitTime;\n        this.sdkKey = validatedOptions.sdkKey;\n        this.webSocketPingInterval = validatedOptions.webSocketPingInterval;\n        this.flushInterval = validatedOptions.flushInterval;\n        this.maxEventsInQueue = validatedOptions.maxEventsInQueue;\n        this.pollingInterval = validatedOptions.pollingInterval;\n        this.offline = validatedOptions.offline;\n        if (validatedOptions.bootstrap && validatedOptions.bootstrap.length > 0) {\n            try {\n                this.bootstrapProvider = new bootstrap_1.JsonBootstrapProvider(validatedOptions.bootstrap);\n            }\n            catch (_) {\n                (_a = this.logger) === null || _a === void 0 ? void 0 : _a.error('Failed to parse bootstrap JSON, use NullBootstrapProvider.');\n            }\n        }\n        if (this.offline) {\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.info('Offline mode enabled. No data synchronization with the FeatBit server will occur.');\n        }\n        this.dataSyncMode = validatedOptions.dataSyncMode;\n        if (Validators_1.TypeValidators.Function.is(validatedOptions.dataSynchronizer)) {\n            // @ts-ignore\n            this.dataSynchronizerFactory = validatedOptions.dataSynchronizer;\n        }\n        else {\n            // The processor is already created, just have the method return it.\n            // @ts-ignore\n            this.dataSynchronizerFactory = () => validatedOptions.dataSynchronizer;\n        }\n        if (Validators_1.TypeValidators.Function.is(validatedOptions.store)) {\n            // @ts-ignore\n            this.storeFactory = validatedOptions.store;\n        }\n        else {\n            // The store is already created, just have the method return it.\n            // @ts-ignore\n            this.storeFactory = () => validatedOptions.store;\n        }\n    }\n}\nexports.default = Configuration;\n//# sourceMappingURL=Configuration.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Context {\n    /**\n     * Contexts should be created using the static factory method {@link Context.fromUser}.\n     *\n     * The factory methods are static functions within the class because they access private\n     * implementation details, so they cannot be free functions.\n     */\n    constructor(valid, message) {\n        this.valid = valid;\n        this.message = message;\n    }\n    static fromUser(user) {\n        if (!user) {\n            return Context.contextForError('No user specified');\n        }\n        const { keyId, name } = user;\n        if (keyId === undefined || keyId === null || keyId.trim() === '') {\n            return Context.contextForError('key is mandatory');\n        }\n        const context = new Context(true);\n        context._user = user;\n        return context;\n    }\n    get user() {\n        return this._user;\n    }\n    get keyId() {\n        return this._user.keyId;\n    }\n    value(property) {\n        var _a, _b, _c, _d, _e;\n        if (property === 'keyId') {\n            return (_a = this._user) === null || _a === void 0 ? void 0 : _a.keyId;\n        }\n        else if (property === 'name') {\n            return (_b = this._user) === null || _b === void 0 ? void 0 : _b.name;\n        }\n        else {\n            return (_e = (_d = (_c = this._user) === null || _c === void 0 ? void 0 : _c.customizedProperties) === null || _d === void 0 ? void 0 : _d.find(x => x.name === property)) === null || _e === void 0 ? void 0 : _e.value;\n        }\n    }\n    static contextForError(message) {\n        return new Context(false, message);\n    }\n}\nexports.default = Context;\n//# sourceMappingURL=Context.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbClientBuilder = void 0;\nconst FbClient_1 = __importDefault(require(\"./platform/browser/FbClient\"));\n/**\n * Creates an instance of the FeatBit client.\n *\n * Applications should instantiate a single instance for the lifetime of the application.\n * The client will begin attempting to connect to FeatBit as soon as it is created. To\n * determine when it is ready to use, call {@link IFbClient.waitForInitialization}, or register an\n * event listener for the `\"ready\"` event using {@link IFbClient.on}.\n *\n * **Important:** Do **not** try to instantiate `FbClient` with its constructor\n * (`new FbClientNode()`); the SDK does not currently support\n * this.\n *\n * @return\n *   The new {@link IFbClient} instance.\n */\nclass FbClientBuilder {\n    constructor(options) {\n        this._options = options !== null && options !== void 0 ? options : {};\n    }\n    /**\n     * Creates a new instance of the FeatBit client.\n     */\n    build() {\n        return new FbClient_1.default(this._options, this._platform);\n    }\n    platform(platform) {\n        this._platform = platform;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.startWaitTime}.\n     */\n    startWaitTime(startWaitTime) {\n        this._options.startWaitTime = startWaitTime;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.sdkKey}.\n     */\n    sdkKey(sdkKey) {\n        this._options.sdkKey = sdkKey;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.user}.\n     */\n    user(user) {\n        this._options.user = user;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.streamingUri}.\n     */\n    streamingUri(streamingUri) {\n        this._options.streamingUri = streamingUri;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.pollingUri}.\n     */\n    pollingUri(pollingUri) {\n        this._options.pollingUri = pollingUri;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.eventsUri}.\n     */\n    eventsUri(eventsUri) {\n        this._options.eventsUri = eventsUri;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.dataSyncMode}.\n     */\n    dataSyncMode(mode) {\n        this._options.dataSyncMode = mode;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.pollingInterval}.\n     */\n    pollingInterval(pollingInterval) {\n        this._options.pollingInterval = pollingInterval;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.flushInterval}.\n     */\n    flushInterval(flushInterval) {\n        this._options.flushInterval = flushInterval;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.maxEventsInQueue}.\n     */\n    maxEventsInQueue(maxEventsInQueue) {\n        this._options.maxEventsInQueue = maxEventsInQueue;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.logger}.\n     */\n    logger(logger) {\n        this._options.logger = logger;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.offline}.\n     */\n    offline(offline) {\n        this._options.offline = offline;\n        return this;\n    }\n    /**\n     * Use the JsonBootstrapProvider.\n     */\n    bootstrap(flags) {\n        this._options.bootstrap = flags;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.dataSynchronizer}.\n     */\n    dataSynchronizer(dataSynchronizer) {\n        this._options.dataSynchronizer = dataSynchronizer;\n        return this;\n    }\n}\nexports.FbClientBuilder = FbClientBuilder;\n//# sourceMappingURL=FbClientBuilder.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbClientCore = void 0;\nconst Configuration_1 = __importDefault(require(\"./Configuration\"));\nconst ClientContext_1 = __importDefault(require(\"./options/ClientContext\"));\nconst DataSourceUpdates_1 = __importDefault(require(\"./data-sources/DataSourceUpdates\"));\nconst createStreamListeners_1 = require(\"./data-sources/createStreamListeners\");\nconst WebSocketDataSynchronizer_1 = __importDefault(require(\"./data-sync/WebSocketDataSynchronizer\"));\nconst PollingDataSynchronizer_1 = __importDefault(require(\"./data-sync/PollingDataSynchronizer\"));\nconst Requestor_1 = __importDefault(require(\"./data-sync/Requestor\"));\nconst DataKinds_1 = __importDefault(require(\"./store/DataKinds\"));\nconst Evaluator_1 = __importDefault(require(\"./evaluation/Evaluator\"));\nconst ReasonKinds_1 = require(\"./evaluation/ReasonKinds\");\nconst errors_1 = require(\"./errors\");\nconst Context_1 = __importDefault(require(\"./Context\"));\nconst ValueConverters_1 = require(\"./utils/ValueConverters\");\nconst NullDataSynchronizer_1 = require(\"./data-sync/NullDataSynchronizer\");\nconst NullEventProcessor_1 = require(\"./events/NullEventProcessor\");\nconst DefaultEventProcessor_1 = require(\"./events/DefaultEventProcessor\");\nconst event_1 = require(\"./events/event\");\nconst DataSyncMode_1 = require(\"./data-sync/DataSyncMode\");\nconst Validators_1 = require(\"./options/Validators\");\nvar ClientState;\n(function (ClientState) {\n    ClientState[ClientState[\"Initializing\"] = 0] = \"Initializing\";\n    ClientState[ClientState[\"Initialized\"] = 1] = \"Initialized\";\n    ClientState[ClientState[\"Failed\"] = 2] = \"Failed\";\n})(ClientState || (ClientState = {}));\nclass FbClientCore {\n    constructor(options, platform, callbacks) {\n        this.options = options;\n        this.platform = platform;\n        this.state = ClientState.Initializing;\n        this.onError = callbacks.onError;\n        this.onFailed = callbacks.onFailed;\n        this.onReady = callbacks.onReady;\n        const { onUpdate, hasEventListeners } = callbacks;\n        const config = new Configuration_1.default(options);\n        if (!config.sdkKey && !config.offline) {\n            throw new Error('You must configure the client with an SDK key');\n        }\n        if (!config.user) {\n            throw new Error('You must configure the client with a user');\n        }\n        this.config = config;\n        this.logger = config.logger;\n        this.init(platform, onUpdate, hasEventListeners);\n    }\n    init(platform, onUpdate, hasEventListeners) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            const clientContext = new ClientContext_1.default(this.config.sdkKey, this.config, platform);\n            this.store = this.config.storeFactory(clientContext);\n            yield this.store.identify(this.config.user);\n            this.dataSourceUpdates = new DataSourceUpdates_1.default(this.store, hasEventListeners, onUpdate);\n            this.evaluator = new Evaluator_1.default(this.store);\n            // use bootstrap provider to populate store\n            yield this.config.bootstrapProvider.populate(this.config.user.keyId, this.dataSourceUpdates);\n            if (this.config.offline) {\n                this.eventProcessor = new NullEventProcessor_1.NullEventProcessor();\n                this.dataSynchronizer = new NullDataSynchronizer_1.NullDataSynchronizer();\n                this.initSuccess();\n            }\n            else {\n                this.eventProcessor = new DefaultEventProcessor_1.DefaultEventProcessor(clientContext);\n                const listeners = (0, createStreamListeners_1.createStreamListeners)(this.dataSourceUpdates, this.logger, {\n                    put: () => this.initSuccess(),\n                    patch: () => this.initSuccess()\n                });\n                const dataSynchronizer = this.config.dataSyncMode === DataSyncMode_1.DataSyncModeEnum.STREAMING\n                    ? new WebSocketDataSynchronizer_1.default(this.config.sdkKey, this.config.user, clientContext, platform.webSocket, () => this.store.version, listeners, this.config.webSocketPingInterval)\n                    : new PollingDataSynchronizer_1.default(this.config, new Requestor_1.default(this.config.sdkKey, this.config, this.platform.info, this.platform.requests), () => this.store.version, listeners, (e) => this.dataSourceErrorHandler(e));\n                this.dataSynchronizer = (_c = (_b = (_a = this.config).dataSynchronizerFactory) === null || _b === void 0 ? void 0 : _b.call(_a, clientContext, this.store, this.dataSourceUpdates, () => this.initSuccess(), (e) => this.dataSourceErrorHandler(e))) !== null && _c !== void 0 ? _c : dataSynchronizer;\n            }\n            this.start();\n        });\n    }\n    identify(user) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const validator = new Validators_1.UserValidator();\n            if (!validator.is(user)) {\n                validator.messages.forEach((error) => {\n                    var _a;\n                    (_a = this.logger) === null || _a === void 0 ? void 0 : _a.warn(error);\n                });\n                return;\n            }\n            this.config.user = user;\n            yield this.store.identify(user);\n            this.dataSynchronizer.identify(user);\n            const [flags] = this.store.all(DataKinds_1.default.Flags);\n            if (Object.keys(flags).length === 0) {\n                yield this.config.bootstrapProvider.populate(user.keyId, this.dataSourceUpdates);\n            }\n        });\n    }\n    start() {\n        if (this.config.offline) {\n            return;\n        }\n        this.dataSynchronizer.start();\n        setTimeout(() => {\n            var _a, _b;\n            if (!this.initialized()) {\n                const msg = `FbClient failed to start successfully within ${this.config.startWaitTime} milliseconds. ` +\n                    'This error usually indicates a connection issue with FeatBit or an invalid sdkKey.' +\n                    'Please double-check your sdkKey and streamingUri/pollingUri configuration. ' +\n                    'We will continue to initialize the FbClient, it still have a chance to get to work ' +\n                    'if it\\'s a temporary network issue';\n                const error = new Error(msg);\n                this.state = ClientState.Failed;\n                this.rejectionReason = error;\n                (_a = this.initReject) === null || _a === void 0 ? void 0 : _a.call(this, error);\n                return (_b = this.logger) === null || _b === void 0 ? void 0 : _b.warn(msg);\n            }\n        }, this.config.startWaitTime);\n    }\n    initialized() {\n        return this.state === ClientState.Initialized;\n    }\n    waitForInitialization() {\n        // An initialization promise is only created if someone is going to use that promise.\n        // If we always created an initialization promise, and there was no call waitForInitialization\n        // by the time the promise was rejected, then that would result in an unhandled promise\n        // rejection.\n        // Initialization promise was created by a previous call to waitForInitialization.\n        if (this.initializedPromise) {\n            return this.initializedPromise;\n        }\n        // Initialization completed before waitForInitialization was called, so we have completed\n        // and there was no promise. So we make a resolved promise and return it.\n        if (this.state === ClientState.Initialized) {\n            this.initializedPromise = Promise.resolve(this);\n            return this.initializedPromise;\n        }\n        // Initialization failed before waitForInitialization was called, so we have completed\n        // and there was no promise. So we make a rejected promise and return it.\n        if (this.state === ClientState.Failed) {\n            this.initializedPromise = Promise.reject(this.rejectionReason);\n            return this.initializedPromise;\n        }\n        if (!this.initializedPromise) {\n            this.initializedPromise = new Promise((resolve, reject) => {\n                this.initResolve = resolve;\n                this.initReject = reject;\n            });\n        }\n        return this.initializedPromise;\n    }\n    boolVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.bool).value;\n    }\n    boolVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.bool);\n    }\n    jsonVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.json).value;\n    }\n    jsonVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.json);\n    }\n    numberVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.number).value;\n    }\n    numberVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.number);\n    }\n    stringVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.string).value;\n    }\n    stringVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.string);\n    }\n    variation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.string).value;\n    }\n    variationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.string);\n    }\n    getAllVariations() {\n        var _a;\n        const context = Context_1.default.fromUser(this.config.user);\n        if (!context.valid) {\n            const error = new errors_1.ClientError(`${(_a = context.message) !== null && _a !== void 0 ? _a : 'User not valid;'} returning default value.`);\n            this.onError(error);\n            return Promise.resolve([]);\n        }\n        const [flags, _] = this.store.all(DataKinds_1.default.Flags);\n        const result = Object.keys(flags).map(flagKey => {\n            var _a;\n            const evalResult = this.evaluator.evaluate(flagKey);\n            return { flagKey, kind: evalResult.kind, reason: evalResult.reason, value: (_a = evalResult.value) === null || _a === void 0 ? void 0 : _a.variation };\n        });\n        return Promise.resolve(result);\n    }\n    close() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.eventProcessor.close();\n            (_a = this.dataSynchronizer) === null || _a === void 0 ? void 0 : _a.close();\n            this.store.close();\n        });\n    }\n    track(eventName, metricValue) {\n        const metricEvent = new event_1.MetricEvent(this.config.user, eventName, this.platform.info.appType, metricValue !== null && metricValue !== void 0 ? metricValue : 1);\n        this.eventProcessor.record(metricEvent);\n        return;\n    }\n    flush(callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.eventProcessor.flush();\n                callback === null || callback === void 0 ? void 0 : callback(true);\n                return true;\n            }\n            catch (err) {\n                callback === null || callback === void 0 ? void 0 : callback(false);\n                return false;\n            }\n        });\n    }\n    evaluateCore(flagKey, defaultValue, typeConverter) {\n        var _a, _b, _c;\n        const context = Context_1.default.fromUser(this.config.user);\n        if (!context.valid) {\n            const error = new errors_1.ClientError(`${(_a = context.message) !== null && _a !== void 0 ? _a : 'User not valid;'} returning default value.`);\n            this.onError(error);\n            return { flagKey, kind: ReasonKinds_1.ReasonKinds.Error, reason: error.message, value: defaultValue };\n        }\n        const evalResult = this.evaluator.evaluate(flagKey);\n        if (evalResult.kind === ReasonKinds_1.ReasonKinds.FlagNotFound) {\n            // flag not found, return default value\n            const error = new errors_1.ClientError(evalResult.reason);\n            this.onError(error);\n            return { flagKey, kind: evalResult.kind, reason: evalResult.reason, value: defaultValue };\n        }\n        if (!this.initialized()) {\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.warn('Variation called before FeatBit client initialization completed (did you wait for the' +\n                \"'ready' event?)\");\n        }\n        else {\n            // send event\n            this.eventProcessor.record(evalResult.toEvalEvent(this.config.user));\n        }\n        const { isSucceeded, value } = typeConverter((_c = evalResult.value) === null || _c === void 0 ? void 0 : _c.variation);\n        return isSucceeded\n            ? { flagKey, kind: evalResult.kind, reason: evalResult.reason, value }\n            : { flagKey, kind: ReasonKinds_1.ReasonKinds.WrongType, reason: 'type mismatch', value: defaultValue };\n    }\n    dataSourceErrorHandler(e) {\n        var _a;\n        const error = e.code === 401 ? new Error('Authentication failed. Double check your SDK key.') : e;\n        this.onError(error);\n        this.onFailed(error);\n        if (!this.initialized()) {\n            this.state = ClientState.Failed;\n            this.rejectionReason = error;\n            (_a = this.initReject) === null || _a === void 0 ? void 0 : _a.call(this, error);\n        }\n    }\n    initSuccess() {\n        var _a, _b;\n        if (!this.initialized()) {\n            this.state = ClientState.Initialized;\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.info('FbClient started successfully.');\n            (_b = this.initResolve) === null || _b === void 0 ? void 0 : _b.call(this, this);\n            this.onReady();\n        }\n    }\n}\nexports.FbClientCore = FbClientCore;\n//# sourceMappingURL=FbClientCore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IContextProperty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDataKind.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IFbClient.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IVersionedData.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IBootstrapProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonBootstrapProvider = void 0;\nconst serialization_1 = require(\"../store/serialization\");\nconst isNullOrUndefined_1 = require(\"../utils/isNullOrUndefined\");\nclass JsonBootstrapProvider {\n    constructor(bootstrap) {\n        const flags = (bootstrap || []).map((flag) => (Object.assign(Object.assign({}, flag), { variationOptions: flag.variationOptions || [{ id: null, variation: flag.variation }] })));\n        const data = (0, serialization_1.deserializeAll)(flags);\n        this.dataSet = {\n            flags: data.flags,\n            version: 0\n        };\n    }\n    populate(userKeyId, dataSourceUpdates, callback) {\n        return new Promise((resolve, reject) => {\n            if ((0, isNullOrUndefined_1.isNullOrUndefined)(this.dataSet)) {\n                return resolve();\n            }\n            const internalCallback = () => {\n                resolve();\n                callback === null || callback === void 0 ? void 0 : callback();\n            };\n            dataSourceUpdates.init(userKeyId, this.dataSet, internalCallback);\n        });\n    }\n}\nexports.JsonBootstrapProvider = JsonBootstrapProvider;\n//# sourceMappingURL=JsonBootstrapProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NullBootstrapProvider = void 0;\nclass NullBootstrapProvider {\n    constructor() {\n        this.dataSet = {\n            flags: {},\n            version: 0\n        };\n    }\n    populate(userKeyId, dataSourceUpdates, callback) {\n        return new Promise((resolve, reject) => {\n            resolve();\n            callback === null || callback === void 0 ? void 0 : callback();\n        });\n    }\n}\nexports.NullBootstrapProvider = NullBootstrapProvider;\n//# sourceMappingURL=NullBootstrapProvider.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./IBootstrapProvider\"), exports);\n__exportStar(require(\"./JsonBootstrapProvider\"), exports);\n__exportStar(require(\"./NullBootstrapProvider\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MinInt = exports.EmptyString = void 0;\nexports.EmptyString = '';\nexports.MinInt = 0x80000000;\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DataKinds_1 = __importDefault(require(\"../store/DataKinds\"));\n/**\n * @internal\n */\nclass DataSourceUpdates {\n    constructor(store, hasEventListeners, onChange) {\n        this.store = store;\n        this.hasEventListeners = hasEventListeners;\n        this.onChange = onChange;\n    }\n    init(userKeyId, allData, callback) {\n        if (userKeyId !== this.store.user.keyId) {\n            callback === null || callback === void 0 ? void 0 : callback();\n            return;\n        }\n        const checkForChanges = this.hasEventListeners();\n        const doInit = (oldData) => __awaiter(this, void 0, void 0, function* () {\n            yield this.store.init(allData);\n            Promise.resolve().then(() => {\n                if (checkForChanges) {\n                    const updatedKeys = Object.keys(allData)\n                        .flatMap((namespace) => {\n                        const oldDataForKind = (oldData === null || oldData === void 0 ? void 0 : oldData[namespace]) || {};\n                        const newDataForKind = allData[namespace];\n                        const mergedData = Object.assign(Object.assign({}, oldDataForKind), newDataForKind);\n                        return Object.keys(mergedData)\n                            .filter((key) => this.isUpdated(oldDataForKind && oldDataForKind[key], newDataForKind && newDataForKind[key]));\n                    });\n                    updatedKeys.length > 0 && this.onChange(updatedKeys);\n                }\n            });\n            callback === null || callback === void 0 ? void 0 : callback();\n        });\n        if (checkForChanges) {\n            const [flags, version] = this.store.all(DataKinds_1.default.Flags);\n            const oldData = {\n                flags,\n                version\n            };\n            doInit(oldData);\n        }\n        else {\n            doInit();\n        }\n    }\n    upsert(userKeyId, kind, data, callback) {\n        if (userKeyId !== this.store.user.keyId) {\n            callback === null || callback === void 0 ? void 0 : callback();\n            return;\n        }\n        const { key } = data;\n        const checkForChanges = this.hasEventListeners();\n        const doUpsert = (oldItem) => __awaiter(this, void 0, void 0, function* () {\n            yield this.store.upsert(kind, data);\n            Promise.resolve().then(() => {\n                if (checkForChanges && this.isUpdated(oldItem, data[key])) {\n                    this.onChange([key]);\n                }\n            });\n            callback === null || callback === void 0 ? void 0 : callback();\n        });\n        if (checkForChanges) {\n            const item = this.store.get(kind, key);\n            doUpsert(item || undefined);\n        }\n        else {\n            doUpsert();\n        }\n    }\n    isUpdated(oldData, newData) {\n        return !oldData || !newData || newData.version > oldData.version;\n    }\n}\nexports.default = DataSourceUpdates;\n//# sourceMappingURL=DataSourceUpdates.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createStreamListeners = exports.createPatchListener = exports.createPutListener = void 0;\nconst serialization_1 = require(\"../store/serialization\");\nconst createPutListener = (dataSourceUpdates, logger, onPutCompleteHandler = () => {\n}) => ({\n    deserializeData: serialization_1.deserializeAll,\n    processJson: (userKeyId, { flags }) => __awaiter(void 0, void 0, void 0, function* () {\n        const initData = {\n            flags: flags,\n            version: 0\n        };\n        logger === null || logger === void 0 ? void 0 : logger.debug('Initializing all data');\n        dataSourceUpdates.init(userKeyId, initData, onPutCompleteHandler);\n    }),\n});\nexports.createPutListener = createPutListener;\nconst createPatchListener = (dataSourceUpdates, logger, onPatchCompleteHandler = () => {\n}) => ({\n    deserializeData: serialization_1.deserializePatch,\n    processJson: (userKeyId, data) => __awaiter(void 0, void 0, void 0, function* () {\n        if ((data === null || data === void 0 ? void 0 : data.length) === 0) {\n            onPatchCompleteHandler === null || onPatchCompleteHandler === void 0 ? void 0 : onPatchCompleteHandler();\n            return;\n        }\n        data === null || data === void 0 ? void 0 : data.forEach(item => {\n            logger === null || logger === void 0 ? void 0 : logger.debug(`Updating ${item.data.key} in ${item.kind.namespace}`);\n            dataSourceUpdates.upsert(userKeyId, item.kind, item.data, onPatchCompleteHandler);\n        });\n    }),\n});\nexports.createPatchListener = createPatchListener;\nconst createStreamListeners = (dataSourceUpdates, logger, onCompleteHandlers) => {\n    const listeners = new Map();\n    listeners.set('put', (0, exports.createPutListener)(dataSourceUpdates, logger, onCompleteHandlers === null || onCompleteHandlers === void 0 ? void 0 : onCompleteHandlers.put));\n    listeners.set('patch', (0, exports.createPatchListener)(dataSourceUpdates, logger, onCompleteHandlers === null || onCompleteHandlers === void 0 ? void 0 : onCompleteHandlers.patch));\n    return listeners;\n};\nexports.createStreamListeners = createStreamListeners;\n//# sourceMappingURL=createStreamListeners.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./createStreamListeners\"), exports);\n__exportStar(require(\"./DataSourceUpdates\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataSyncModeEnum = void 0;\nvar DataSyncModeEnum;\n(function (DataSyncModeEnum) {\n    DataSyncModeEnum[\"POLLING\"] = \"polling\";\n    DataSyncModeEnum[\"STREAMING\"] = \"streaming\";\n})(DataSyncModeEnum || (exports.DataSyncModeEnum = DataSyncModeEnum = {}));\n//# sourceMappingURL=DataSyncMode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDataSynchronizer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IRequestor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NullDataSynchronizer = void 0;\nclass NullDataSynchronizer {\n    close() {\n    }\n    start() {\n    }\n    stop() {\n    }\n    identify() {\n    }\n}\nexports.NullDataSynchronizer = NullDataSynchronizer;\n//# sourceMappingURL=NullDataSynchronizer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"../errors\");\nconst types_1 = require(\"./types\");\nconst http_1 = require(\"../utils/http\");\nclass PollingDataSynchronizer {\n    constructor(config, requestor, getStoreTimestamp, listeners, errorHandler) {\n        this.requestor = requestor;\n        this.getStoreTimestamp = getStoreTimestamp;\n        this.listeners = listeners;\n        this.errorHandler = errorHandler;\n        this.stopped = false;\n        this.logger = config.logger;\n        this.pollingInterval = config.pollingInterval;\n        this.user = config.user;\n    }\n    poll() {\n        var _a;\n        if (this.stopped) {\n            return;\n        }\n        const startTime = Date.now();\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.debug('Polling for feature flag and segments updates');\n        this.requestor.requestData(this.getStoreTimestamp(), this.user, (err, body) => {\n            var _a, _b, _c, _d, _e, _f, _g;\n            const elapsed = Date.now() - startTime;\n            const sleepFor = Math.max(this.pollingInterval - elapsed, 0);\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.debug('Elapsed: %d ms, sleeping for %d ms', elapsed, sleepFor);\n            if (err) {\n                const { status } = err;\n                if (status && !(0, errors_1.isHttpRecoverable)(status)) {\n                    const message = (0, http_1.httpErrorMessage)(err, 'polling request');\n                    (_b = this.logger) === null || _b === void 0 ? void 0 : _b.error(message);\n                    (_c = this.errorHandler) === null || _c === void 0 ? void 0 : _c.call(this, new errors_1.PollingError(message, status));\n                    // It is not recoverable, return and do not trigger another\n                    // poll.\n                    return;\n                }\n                (_d = this.logger) === null || _d === void 0 ? void 0 : _d.warn((0, http_1.httpErrorMessage)(err, 'polling request', 'will retry'));\n            }\n            else {\n                let featureFlags = [];\n                let userKeyId = (_e = this.user) === null || _e === void 0 ? void 0 : _e.keyId;\n                let processStreamResponse = this.listeners.get('patch');\n                if (body) {\n                    const message = JSON.parse(body);\n                    if (message.messageType === 'data-sync') {\n                        switch (message.data.eventType) {\n                            case types_1.StreamResponseEventType.patch:\n                                processStreamResponse = this.listeners.get('patch');\n                                break;\n                            case types_1.StreamResponseEventType.full:\n                                processStreamResponse = this.listeners.get('put');\n                                break;\n                        }\n                        ({ featureFlags, userKeyId } = message.data);\n                    }\n                }\n                const data = (_f = processStreamResponse === null || processStreamResponse === void 0 ? void 0 : processStreamResponse.deserializeData) === null || _f === void 0 ? void 0 : _f.call(processStreamResponse, featureFlags);\n                (_g = processStreamResponse === null || processStreamResponse === void 0 ? void 0 : processStreamResponse.processJson) === null || _g === void 0 ? void 0 : _g.call(processStreamResponse, userKeyId, data);\n            }\n            // Falling through, there was some type of error and we need to trigger\n            // a new poll.\n            this.timeoutHandle = setTimeout(() => {\n                this.poll();\n            }, sleepFor);\n        });\n    }\n    identify(user) {\n        this.user = Object.assign({}, user);\n    }\n    close() {\n        this.stop();\n    }\n    start() {\n        this.poll();\n    }\n    stop() {\n        if (this.timeoutHandle) {\n            clearTimeout(this.timeoutHandle);\n            this.timeoutHandle = undefined;\n        }\n        this.stopped = true;\n    }\n}\nexports.default = PollingDataSynchronizer;\n//# sourceMappingURL=PollingDataSynchronizer.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"../errors\");\nconst http_1 = require(\"../utils/http\");\n/**\n * @internal\n */\nclass Requestor {\n    constructor(sdkKey, config, info, requests) {\n        this.requests = requests;\n        this.headers = (0, http_1.defaultHeaders)(sdkKey, info);\n        this.uri = config.pollingUri;\n    }\n    /**\n     * Perform a request and utilize the ETag cache. The ETags are cached in the\n     * requestor instance.\n     */\n    request(requestUrl, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = yield this.requests.fetch(requestUrl, options);\n            const body = yield res.text();\n            return { res, body };\n        });\n    }\n    requestData(timestamp, payload, cb) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const options = {\n                method: 'POST',\n                headers: this.headers,\n                body: JSON.stringify(payload)\n            };\n            try {\n                const { res, body } = yield this.request(`${this.uri}?timestamp=${timestamp !== null && timestamp !== void 0 ? timestamp : 0}`, options);\n                if (res.status !== 200 && res.status !== 304) {\n                    const err = new errors_1.StreamingError(`Unexpected status code: ${res.status}`, res.status);\n                    return cb(err, undefined);\n                }\n                return cb(undefined, res.status === 304 ? null : body);\n            }\n            catch (err) {\n                return cb(err, undefined);\n            }\n        });\n    }\n}\nexports.default = Requestor;\n//# sourceMappingURL=Requestor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass WebSocketDataSynchronizer {\n    constructor(sdkKey, user, clientContext, socket, getStoreTimestamp, listeners, webSocketPingInterval) {\n        this.getStoreTimestamp = getStoreTimestamp;\n        this.listeners = listeners;\n        const { logger, streamingUri } = clientContext;\n        this.logger = logger;\n        this.socket = socket;\n        this.socket.config({\n            sdkKey,\n            streamingUri,\n            pingInterval: webSocketPingInterval,\n            user,\n            logger,\n            getStoreTimestamp\n        });\n        this.listeners.forEach(({ deserializeData, processJson }, eventName) => {\n            var _a;\n            (_a = this.socket) === null || _a === void 0 ? void 0 : _a.addListener(eventName, (event) => {\n                var _a;\n                (_a = this.logger) === null || _a === void 0 ? void 0 : _a.debug(`Received ${eventName} event`);\n                if (event === null || event === void 0 ? void 0 : event.data) {\n                    const { featureFlags, userKeyId } = event.data;\n                    const data = deserializeData(featureFlags);\n                    processJson(userKeyId, data);\n                }\n            });\n        });\n    }\n    identify(user) {\n        var _a;\n        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.identify(user);\n    }\n    start() {\n        var _a;\n        this.logConnectionStarted();\n        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.connect();\n    }\n    logConnectionStarted() {\n        var _a;\n        this.connectionAttemptStartTime = Date.now();\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.info(`Stream connection attempt StartTime ${this.connectionAttemptStartTime}`);\n    }\n    close() {\n        this.stop();\n    }\n    stop() {\n        var _a;\n        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.close();\n        this.socket = undefined;\n    }\n}\nexports.default = WebSocketDataSynchronizer;\n//# sourceMappingURL=WebSocketDataSynchronizer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DataSyncMode\"), exports);\n__exportStar(require(\"./IDataSynchronizer\"), exports);\n__exportStar(require(\"./IRequestor\"), exports);\n__exportStar(require(\"./NullDataSynchronizer\"), exports);\n__exportStar(require(\"./PollingDataSynchronizer\"), exports);\n__exportStar(require(\"./Requestor\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./WebSocketDataSynchronizer\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamResponseEventType = void 0;\nvar StreamResponseEventType;\n(function (StreamResponseEventType) {\n    StreamResponseEventType[\"full\"] = \"full\";\n    StreamResponseEventType[\"patch\"] = \"patch\";\n})(StreamResponseEventType || (exports.StreamResponseEventType = StreamResponseEventType = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateConnectionToken = void 0;\n/********************** encode text begin *****************************/\nconst alphabet = {\n    \"0\": \"Q\",\n    \"1\": \"B\",\n    \"2\": \"W\",\n    \"3\": \"S\",\n    \"4\": \"P\",\n    \"5\": \"H\",\n    \"6\": \"D\",\n    \"7\": \"X\",\n    \"8\": \"Z\",\n    \"9\": \"U\",\n};\nfunction encodeNumber(param, length) {\n    var s = \"000000000000\" + param;\n    const numberWithLeadingZeros = s.slice(s.length - length);\n    return numberWithLeadingZeros.split('').map(n => alphabet[n]).join('');\n}\n// generate connection token\nfunction generateConnectionToken(text) {\n    text = text.replace(/=*$/, '');\n    const timestamp = Date.now();\n    const timestampCode = encodeNumber(timestamp, timestamp.toString().length);\n    // get random number less than the length of the text as the start point, and it must be greater or equal to 2\n    const start = Math.max(Math.floor(Math.random() * text.length), 2);\n    return `${encodeNumber(start, 3)}${encodeNumber(timestampCode.length, 2)}${text.slice(0, start)}${timestampCode}${text.slice(start)}`;\n}\nexports.generateConnectionToken = generateConnectionToken;\n/********************** encode text end *****************************/ \n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isHttpRecoverable = exports.ClientError = exports.UnexpectedResponseError = exports.StreamingError = exports.PollingError = void 0;\nclass PollingError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.status = status;\n        this.name = 'FbPollingError';\n    }\n}\nexports.PollingError = PollingError;\nclass StreamingError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n        this.name = 'FbStreamingError';\n    }\n}\nexports.StreamingError = StreamingError;\nclass UnexpectedResponseError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'FbUnexpectedResponseError';\n    }\n}\nexports.UnexpectedResponseError = UnexpectedResponseError;\nclass ClientError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'FbClientError';\n    }\n}\nexports.ClientError = ClientError;\nfunction isHttpRecoverable(status) {\n    if (status >= 400 && status < 500) {\n        return status === 400 || status === 408 || status === 429;\n    }\n    return true;\n}\nexports.isHttpRecoverable = isHttpRecoverable;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ReasonKinds_1 = require(\"./ReasonKinds\");\nconst event_1 = require(\"../events/event\");\n/**\n * A class which encapsulates the result of an evaluation. It allows for differentiating between\n * successful and error result types.\n *\n * @internal\n */\nclass EvalResult {\n    constructor(kind, value, reason) {\n        this.kind = kind;\n        this.value = value;\n        this.reason = reason;\n    }\n    static flagNotFound(flagKey) {\n        return new EvalResult(ReasonKinds_1.ReasonKinds.FlagNotFound, null, `flag not found: ${flagKey}`);\n    }\n    static matched(val) {\n        return new EvalResult(ReasonKinds_1.ReasonKinds.Match, val, 'target match');\n    }\n    toEvalEvent(user) {\n        var _a, _b, _c;\n        if (this.kind !== ReasonKinds_1.ReasonKinds.Match) {\n            return null;\n        }\n        const targetedVariation = (_a = this.value) === null || _a === void 0 ? void 0 : _a.variations.find(v => { var _a; return v.value === ((_a = this.value) === null || _a === void 0 ? void 0 : _a.variation); });\n        return new event_1.EvalEvent(user, (_b = this.value) === null || _b === void 0 ? void 0 : _b.id, targetedVariation, (_c = this.value) === null || _c === void 0 ? void 0 : _c.sendToExperiment);\n    }\n}\nexports.default = EvalResult;\n//# sourceMappingURL=EvalResult.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EvalResult_1 = __importDefault(require(\"./EvalResult\"));\nconst DataKinds_1 = __importDefault(require(\"../store/DataKinds\"));\n/**\n * @internal\n */\nclass Evaluator {\n    constructor(store) {\n        this.store = store;\n    }\n    /**\n     * Evaluate the given flag against the given context.\n     * @param flagKey The key of the feature flag.\n     */\n    evaluate(flagKey) {\n        const flag = this.store.get(DataKinds_1.default.Flags, flagKey);\n        if (!flag) {\n            return EvalResult_1.default.flagNotFound(flagKey);\n        }\n        return EvalResult_1.default.matched(flag);\n    }\n}\nexports.default = Evaluator;\n//# sourceMappingURL=Evaluator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IEvalDetail.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReasonKinds = void 0;\n/**\n * Different kinds of error which may be encountered during evaluation.\n */\nvar ReasonKinds;\n(function (ReasonKinds) {\n    ReasonKinds[\"ClientNotReady\"] = \"ClientNotReady\";\n    ReasonKinds[\"Match\"] = \"Match\";\n    ReasonKinds[\"WrongType\"] = \"WrongType\";\n    ReasonKinds[\"FlagNotFound\"] = \"FlagNotFound\";\n    ReasonKinds[\"Error\"] = \"Error\";\n})(ReasonKinds || (exports.ReasonKinds = ReasonKinds = {}));\n//# sourceMappingURL=ReasonKinds.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VariationDataType = void 0;\nvar VariationDataType;\n(function (VariationDataType) {\n    VariationDataType[\"string\"] = \"string\";\n    VariationDataType[\"boolean\"] = \"boolean\";\n    VariationDataType[\"number\"] = \"number\";\n    VariationDataType[\"json\"] = \"json\";\n    VariationDataType[\"empty\"] = \"\";\n})(VariationDataType || (exports.VariationDataType = VariationDataType = {}));\n//# sourceMappingURL=IFlag.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./IFlag\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./data\"), exports);\n__exportStar(require(\"./EvalResult\"), exports);\n__exportStar(require(\"./Evaluator\"), exports);\n__exportStar(require(\"./IEvalDetail\"), exports);\n__exportStar(require(\"./ReasonKinds\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventProcessor = void 0;\nconst EventDispatcher_1 = require(\"./EventDispatcher\");\nconst event_1 = require(\"./event\");\nconst isNullOrUndefined_1 = require(\"../utils/isNullOrUndefined\");\nconst DefaultEventQueue_1 = require(\"./DefaultEventQueue\");\nclass DefaultEventProcessor {\n    constructor(clientContext) {\n        this.closed = false;\n        const { logger, flushInterval, maxEventsInQueue } = clientContext;\n        this.logger = logger;\n        this.flushInterval = flushInterval;\n        this.eventQueue = new DefaultEventQueue_1.DefaultEventQueue(maxEventsInQueue, this.logger);\n        this.eventDispatcher = new EventDispatcher_1.EventDispatcher(clientContext, this.eventQueue);\n        this.flushLoop();\n    }\n    flushLoop() {\n        if (this.closed) {\n            return;\n        }\n        setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.flush();\n            }\n            catch (err) {\n                this.logger.error('Unexpected error while flushing events in event processor.', err);\n            }\n            this.flushLoop();\n        }), this.flushInterval);\n    }\n    flush() {\n        const flushEvent = new event_1.FlushEvent();\n        this.record(flushEvent);\n        return flushEvent.waitForCompletion();\n    }\n    close() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.closed) {\n                return;\n            }\n            // send a shutdown event to dispatcher\n            const shutdown = new event_1.ShutdownEvent();\n            this.record(shutdown);\n            try {\n                yield shutdown.waitForCompletion();\n            }\n            catch (err) {\n                this.logger.error('Event processor shutdown but not complete.');\n            }\n            // mark the event queue as complete for adding\n            this.eventQueue.close();\n            this.closed = true;\n        });\n    }\n    record(event) {\n        if ((0, isNullOrUndefined_1.isNullOrUndefined)(event)) {\n            return false;\n        }\n        if (!this.eventQueue.addEvent(event)) {\n            if (event instanceof event_1.FlushEvent) {\n                event.complete();\n            }\n            return false;\n        }\n        return true;\n    }\n}\nexports.DefaultEventProcessor = DefaultEventProcessor;\n//# sourceMappingURL=DefaultEventProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventQueue = void 0;\nclass DefaultEventQueue {\n    constructor(capacity, logger) {\n        this.capacity = capacity;\n        this.logger = logger;\n        this.closed = false;\n        this.events = [];\n    }\n    addEvent(event) {\n        if (this.closed) {\n            return false;\n        }\n        if (this.events.length >= this.capacity) {\n            this.logger.warn(\"Events are being produced faster than they can be processed. We shouldn't see this.\");\n            return false;\n        }\n        this.events.push(event);\n        return true;\n    }\n    clear() {\n        this.events = [];\n    }\n    shift() {\n        return this.events.shift();\n    }\n    close() {\n        this.closed = true;\n    }\n    get eventsSnapshot() {\n        return [...this.events];\n    }\n    get length() {\n        return this.events.length;\n    }\n    get isEmpty() {\n        return this.length === 0;\n    }\n}\nexports.DefaultEventQueue = DefaultEventQueue;\n//# sourceMappingURL=DefaultEventQueue.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventSender = void 0;\nconst IEventSender_1 = require(\"./IEventSender\");\nconst http_1 = require(\"../utils/http\");\nconst errors_1 = require(\"../errors\");\nconst sleep_1 = __importDefault(require(\"../utils/sleep\"));\nclass DefaultEventSender {\n    constructor(clientContext) {\n        const { sdkKey, eventsUri, platform } = clientContext;\n        const { info, requests } = platform;\n        this.defaultHeaders = (0, http_1.defaultHeaders)(sdkKey, info);\n        this.eventsUri = eventsUri;\n        this.requests = requests;\n    }\n    send(payload, retry) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = {\n                status: IEventSender_1.DeliveryStatus.Succeeded,\n            };\n            const headers = Object.assign(Object.assign({}, this.defaultHeaders), { 'content-type': 'application/json' });\n            let error;\n            try {\n                const { status } = yield this.requests.fetch(this.eventsUri, {\n                    headers,\n                    body: payload,\n                    method: 'POST',\n                });\n                if (status >= 200 && status <= 299) {\n                    return res;\n                }\n                error = new errors_1.UnexpectedResponseError((0, http_1.httpErrorMessage)({ status, message: 'some events were dropped' }, 'event posting'));\n                if (!(0, errors_1.isHttpRecoverable)(status)) {\n                    res.status = IEventSender_1.DeliveryStatus.FailedAndMustShutDown;\n                    res.error = error;\n                    return res;\n                }\n            }\n            catch (err) {\n                error = err;\n            }\n            // recoverable but not retrying\n            if (error && !retry) {\n                res.status = IEventSender_1.DeliveryStatus.Failed;\n                res.error = error;\n                return res;\n            }\n            // wait 1 second before retrying\n            yield (0, sleep_1.default)();\n            return this.send(payload, false);\n        });\n    }\n}\nexports.DefaultEventSender = DefaultEventSender;\n//# sourceMappingURL=DefaultEventSender.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventSerializer = void 0;\nconst event_1 = require(\"./event\");\nclass DefaultEventSerializer {\n    serialize(events) {\n        const payload = events\n            .map(event => event instanceof event_1.EvalEvent || event instanceof event_1.MetricEvent ? event.toPayload() : null)\n            .filter(event => event !== null);\n        return JSON.stringify(payload);\n    }\n}\nexports.DefaultEventSerializer = DefaultEventSerializer;\n//# sourceMappingURL=DefaultEventSerializer.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventDispatcher = void 0;\nconst IEventSender_1 = require(\"./IEventSender\");\nconst DefaultEventQueue_1 = require(\"./DefaultEventQueue\");\nconst DefaultEventSender_1 = require(\"./DefaultEventSender\");\nconst event_1 = require(\"./event\");\nconst DefaultEventSerializer_1 = require(\"./DefaultEventSerializer\");\nconst sleep_1 = __importDefault(require(\"../utils/sleep\"));\nclass EventDispatcher {\n    constructor(clientContext, queue) {\n        this.maxEventPerRequest = 50;\n        this.stopped = false;\n        const { logger, maxEventsInQueue } = clientContext;\n        this.logger = logger;\n        this.buffer = new DefaultEventQueue_1.DefaultEventQueue(maxEventsInQueue, this.logger);\n        this.sender = new DefaultEventSender_1.DefaultEventSender(clientContext);\n        this.serializer = new DefaultEventSerializer_1.DefaultEventSerializer();\n        this.dispatchLoop(queue).then();\n    }\n    dispatchLoop(queue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.logger.debug('Start dispatch loop.');\n            let running = true;\n            while (running) {\n                try {\n                    const event = queue.shift();\n                    if (event === undefined) {\n                        yield (0, sleep_1.default)(1000);\n                        continue;\n                    }\n                    if (event instanceof event_1.PayloadEvent) {\n                        this.addEventToBuffer(event);\n                    }\n                    else if (event instanceof event_1.FlushEvent) {\n                        yield this.triggerFlush(event);\n                    }\n                    else if (event instanceof event_1.ShutdownEvent) {\n                        yield this.triggerFlush(event);\n                        this.stopped = true;\n                        running = false;\n                    }\n                }\n                catch (err) {\n                    this.logger.error('Unexpected error in event dispatcher.', err);\n                }\n            }\n            this.logger.debug('Finish dispatch loop.');\n        });\n    }\n    addEventToBuffer(event) {\n        if (this.stopped) {\n            return;\n        }\n        if (this.buffer.addEvent(event)) {\n            this.logger.debug('Added event to buffer.');\n        }\n        else {\n            this.logger.warn('Exceeded event queue capacity, event will be dropped. Increase capacity to avoid dropping events.');\n        }\n    }\n    triggerFlush(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.stopped) {\n                event.complete();\n                return;\n            }\n            if (this.buffer.isEmpty) {\n                event.complete();\n                this.logger.debug('Flush empty buffer.');\n                // There are no events to flush. If we don't complete the message, then the async task may never\n                // complete (if it had a non-zero positive timeout, then it would complete after the timeout).\n                return;\n            }\n            const snapshot = this.buffer.eventsSnapshot;\n            this.buffer.clear();\n            try {\n                yield this.flushEvents(snapshot);\n                this.logger.debug(`${snapshot.length} events has been flushed.`);\n            }\n            catch (err) {\n                this.logger.warn('Exception happened when flushing events', err);\n            }\n            event.complete();\n        });\n    }\n    flushEvents(events) {\n        return __awaiter(this, void 0, void 0, function* () {\n            events = this.getUniqueEvents(events);\n            const total = events.length;\n            for (let i = 0; i < total; i += this.maxEventPerRequest) {\n                const length = Math.min(this.maxEventPerRequest, total - i);\n                const slice = events.slice(i, i + length);\n                const payload = this.serializer.serialize(slice);\n                const { status } = yield this.sender.send(payload, true);\n                if (status === IEventSender_1.DeliveryStatus.FailedAndMustShutDown) {\n                    this.stopped = true;\n                }\n            }\n        });\n    }\n    getUniqueEvents(events) {\n        const uniqueEvents = [];\n        const hashes = [];\n        for (const event of events) {\n            if (!hashes.includes(event.hash)) {\n                uniqueEvents.push(event);\n                hashes.push(event.hash);\n            }\n        }\n        return uniqueEvents;\n    }\n}\nexports.EventDispatcher = EventDispatcher;\n//# sourceMappingURL=EventDispatcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=EventSerializer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IEventProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IEventQueue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeliveryStatus = void 0;\nvar DeliveryStatus;\n(function (DeliveryStatus) {\n    DeliveryStatus[DeliveryStatus[\"Succeeded\"] = 0] = \"Succeeded\";\n    DeliveryStatus[DeliveryStatus[\"Failed\"] = 1] = \"Failed\";\n    DeliveryStatus[DeliveryStatus[\"FailedAndMustShutDown\"] = 2] = \"FailedAndMustShutDown\";\n})(DeliveryStatus || (exports.DeliveryStatus = DeliveryStatus = {}));\n//# sourceMappingURL=IEventSender.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NullEventProcessor = void 0;\nclass NullEventProcessor {\n    flush() {\n        return Promise.resolve();\n    }\n    close() {\n        return Promise.resolve();\n    }\n    record(event) {\n        return false;\n    }\n}\nexports.NullEventProcessor = NullEventProcessor;\n//# sourceMappingURL=NullEventProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EvalEvent = exports.MetricEvent = exports.PayloadEvent = exports.ShutdownEvent = exports.FlushEvent = exports.AsyncEvent = void 0;\nclass AsyncEvent {\n    get hash() {\n        return this.timestamp.toString();\n    }\n    constructor() {\n        this.timestamp = (new Date()).getTime();\n        this.isCompletedPromise = new Promise((resolve) => {\n            this.resolveFn = resolve;\n        });\n    }\n    waitForCompletion() {\n        return this.isCompletedPromise;\n    }\n    complete() {\n        var _a;\n        (_a = this.resolveFn) === null || _a === void 0 ? void 0 : _a.call(this, this);\n    }\n}\nexports.AsyncEvent = AsyncEvent;\nclass FlushEvent extends AsyncEvent {\n}\nexports.FlushEvent = FlushEvent;\nclass ShutdownEvent extends AsyncEvent {\n}\nexports.ShutdownEvent = ShutdownEvent;\nclass PayloadEvent {\n    constructor() {\n        this.timestamp = (new Date()).getTime();\n    }\n    get hash() {\n        return this.timestamp.toString();\n    }\n    toPayload() {\n    }\n    ;\n}\nexports.PayloadEvent = PayloadEvent;\nclass MetricEvent extends PayloadEvent {\n    constructor(user, eventName, appType, metricValue) {\n        super();\n        this.user = user;\n        this.eventName = eventName;\n        this.appType = appType;\n        this.metricValue = metricValue;\n    }\n    userPayload() {\n        return {\n            keyId: this.user.keyId,\n            name: this.user.name,\n            customizedProperties: this.user.customizedProperties\n        };\n    }\n    toPayload() {\n        return {\n            user: this.userPayload(),\n            metrics: [{\n                    route: 'index/metric',\n                    timestamp: this.timestamp,\n                    numericValue: this.metricValue,\n                    appType: this.appType,\n                    eventName: this.eventName,\n                    type: 'CustomEvent'\n                }]\n        };\n    }\n    get hash() {\n        const payload = this.toPayload();\n        const hasObject = {\n            user: payload.user,\n            metrics: payload.metrics.map((m) => (Object.assign(Object.assign({}, m), { timestamp: undefined })))\n        };\n        return JSON.stringify(hasObject);\n    }\n}\nexports.MetricEvent = MetricEvent;\nclass EvalEvent extends PayloadEvent {\n    constructor(user, flagKey, variation, sendToExperiment) {\n        super();\n        this.user = user;\n        this.flagKey = flagKey;\n        this.variation = variation;\n        this.sendToExperiment = sendToExperiment;\n    }\n    userPayload() {\n        return {\n            keyId: this.user.keyId,\n            name: this.user.name,\n            customizedProperties: this.user.customizedProperties\n        };\n    }\n    toPayload() {\n        return {\n            user: this.userPayload(),\n            variations: [{\n                    featureFlagKey: this.flagKey,\n                    sendToExperiment: this.sendToExperiment,\n                    timestamp: this.timestamp,\n                    variation: this.variation\n                }]\n        };\n    }\n    get hash() {\n        const payload = this.toPayload();\n        const hasObject = {\n            user: payload.user,\n            variations: payload.variations.map((m) => (Object.assign(Object.assign({}, m), { timestamp: undefined })))\n        };\n        return JSON.stringify(hasObject);\n    }\n}\nexports.EvalEvent = EvalEvent;\n//# sourceMappingURL=event.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DefaultEventProcessor\"), exports);\n__exportStar(require(\"./DefaultEventQueue\"), exports);\n__exportStar(require(\"./DefaultEventSender\"), exports);\n__exportStar(require(\"./DefaultEventSerializer\"), exports);\n__exportStar(require(\"./event\"), exports);\n__exportStar(require(\"./EventDispatcher\"), exports);\n__exportStar(require(\"./EventSerializer\"), exports);\n__exportStar(require(\"./IEventProcessor\"), exports);\n__exportStar(require(\"./IEventQueue\"), exports);\n__exportStar(require(\"./IEventSender\"), exports);\n__exportStar(require(\"./NullEventProcessor\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./bootstrap\"), exports);\n__exportStar(require(\"./data-sources\"), exports);\n__exportStar(require(\"./evaluation\"), exports);\n__exportStar(require(\"./events\"), exports);\n__exportStar(require(\"./logging\"), exports);\n__exportStar(require(\"./options\"), exports);\n__exportStar(require(\"./platform\"), exports);\n__exportStar(require(\"./store\"), exports);\n__exportStar(require(\"./data-sync\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./Configuration\"), exports);\n__exportStar(require(\"./constants\"), exports);\n__exportStar(require(\"./Context\"), exports);\n__exportStar(require(\"./errors\"), exports);\n__exportStar(require(\"./FbClientBuilder\"), exports);\n__exportStar(require(\"./IContextProperty\"), exports);\n__exportStar(require(\"./IDataKind\"), exports);\n__exportStar(require(\"./IFbClient\"), exports);\n__exportStar(require(\"./IVersionedData\"), exports);\n__exportStar(require(\"./FbClientCore\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BasicLogger = void 0;\nconst format_1 = __importDefault(require(\"./format\"));\nconst LogPriority = {\n    debug: 0,\n    info: 1,\n    warn: 2,\n    error: 3,\n    none: 4,\n};\nconst LevelNames = ['debug', 'info', 'warn', 'error', 'none'];\n/**\n * A basic logger which handles filtering by level.\n *\n * With the default options it will write to `console.error`\n * and it will use the formatting provided by `console.error`.\n * If the destination is overwritten, then it will use an included\n * formatter similar to `util.format`.\n *\n * If a formatter is available, then that should be overridden\n * as well for performance.\n */\nclass BasicLogger {\n    /**\n     * This should only be used as a default fallback and not as a convenient\n     * solution. In most cases you should construct a new instance with the\n     * appropriate options for your specific needs.\n     */\n    static get() {\n        return new BasicLogger({});\n    }\n    constructor(options) {\n        var _a, _b, _c;\n        this.logLevel = (_b = LogPriority[(_a = options.level) !== null && _a !== void 0 ? _a : 'info']) !== null && _b !== void 0 ? _b : LogPriority.info;\n        this.name = (_c = options.name) !== null && _c !== void 0 ? _c : 'FeatBit';\n        // eslint-disable-next-line no-console\n        this.destination = options.destination;\n        this.formatter = options.formatter;\n    }\n    tryFormat(...args) {\n        var _a;\n        try {\n            if (this.formatter) {\n                // In case the provided formatter fails.\n                return (_a = this.formatter) === null || _a === void 0 ? void 0 : _a.call(this, ...args);\n            }\n            return (0, format_1.default)(...args);\n        }\n        catch (_b) {\n            return (0, format_1.default)(...args);\n        }\n    }\n    tryWrite(msg) {\n        try {\n            this.destination(msg);\n        }\n        catch (_a) {\n            // eslint-disable-next-line no-console\n            console.error(msg);\n        }\n    }\n    log(level, args) {\n        if (level >= this.logLevel) {\n            const prefix = `${LevelNames[level]}: [${this.name}]`;\n            try {\n                if (this.destination) {\n                    this.tryWrite(`${prefix} ${this.tryFormat(...args)}`);\n                }\n                else {\n                    // `console.error` has its own formatter.\n                    // So we don't need to do anything.\n                    // eslint-disable-next-line no-console\n                    console.error(...args);\n                }\n            }\n            catch (_a) {\n                // If all else fails do not break.\n                // eslint-disable-next-line no-console\n                console.error(...args);\n            }\n        }\n    }\n    error(...args) {\n        this.log(LogPriority.error, args);\n    }\n    warn(...args) {\n        this.log(LogPriority.warn, args);\n    }\n    info(...args) {\n        this.log(LogPriority.info, args);\n    }\n    debug(...args) {\n        this.log(LogPriority.debug, args);\n    }\n}\nexports.BasicLogger = BasicLogger;\n//# sourceMappingURL=BasicLogger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IBasicLoggerOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=ILogger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=LogLevel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeLogger = void 0;\nconst Validators_1 = require(\"../options/Validators\");\nconst loggerRequirements = {\n    error: Validators_1.TypeValidators.Function,\n    warn: Validators_1.TypeValidators.Function,\n    info: Validators_1.TypeValidators.Function,\n    debug: Validators_1.TypeValidators.Function,\n};\n/**\n * The safeLogger logic exists because we allow the application to pass in a custom logger, but\n * there is no guarantee that the logger works correctly and if it ever throws exceptions there\n * could be serious consequences (e.g. an uncaught exception within an error event handler, due\n * to the SDK trying to log the error, can terminate the application). An exception could result\n * from faulty logic in the logger implementation, or it could be that this is not a logger at\n * all but some other kind of object; the former is handled by a catch block that logs an error\n * message to the SDK's default logger, and we can at least partly guard against the latter by\n * checking for the presence of required methods at configuration time.\n */\nclass SafeLogger {\n    /**\n     * Construct a safe logger with the specified logger.\n     * @param logger The logger to use.\n     * @param fallback A fallback logger to use in case an issue is  encountered using\n     * the provided logger.\n     */\n    constructor(logger, fallback) {\n        Object.entries(loggerRequirements).forEach(([level, validator]) => {\n            if (!validator.is(logger[level])) {\n                throw new Error(`Provided logger instance must support logger.${level}(...) method`);\n                // Note that the SDK normally does not throw exceptions to the application, but that rule\n                // does not apply to FbClientNode.init() which will throw an exception if the parameters are so\n                // invalid that we cannot proceed with creating the client. An invalid logger meets those\n                // criteria since the SDK calls the logger during nearly all of its operations.\n            }\n        });\n        this.logger = logger;\n        this.fallback = fallback;\n    }\n    log(level, args) {\n        try {\n            this.logger[level](...args);\n        }\n        catch (_a) {\n            // If all else fails do not break.\n            this.fallback[level](...args);\n        }\n    }\n    error(...args) {\n        this.log('error', args);\n    }\n    warn(...args) {\n        this.log('warn', args);\n    }\n    info(...args) {\n        this.log('info', args);\n    }\n    debug(...args) {\n        this.log('debug', args);\n    }\n}\nexports.SafeLogger = SafeLogger;\n//# sourceMappingURL=SafeLogger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Validators_1 = require(\"../options/Validators\");\n/**\n * Attempt to produce a string representation of a value.\n * The format should be roughly comparable to `util.format`\n * aside from object which will be JSON versus the `util.inspect`\n * format.\n * @param val\n * @returns A string representation of the value if possible.\n */\nfunction tryStringify(val) {\n    if (typeof val === 'string') {\n        return val;\n    }\n    if (val === undefined) {\n        return 'undefined';\n    }\n    if (val === null) {\n        return 'null';\n    }\n    if (Object.prototype.hasOwnProperty.call(val, 'toString')) {\n        try {\n            return val.toString();\n        }\n        catch (_a) {\n            /* Keep going */\n        }\n    }\n    if (typeof val === 'bigint') {\n        return `${val}n`;\n    }\n    try {\n        return JSON.stringify(val);\n    }\n    catch (error) {\n        if (error instanceof TypeError && error.message.indexOf('circular') >= 0) {\n            return '[Circular]';\n        }\n        return '[Not Stringifiable]';\n    }\n}\n/**\n * Attempt to produce a numeric representation.\n * BigInts have an `n` suffix.\n * @param val\n * @returns The numeric representation or 'NaN' if not numeric.\n */\nfunction toNumber(val) {\n    // Symbol has to be treated special because it will\n    // throw an exception if an attempt is made to convert it.\n    if (typeof val === 'symbol') {\n        return 'NaN';\n    }\n    if (typeof val === 'bigint') {\n        return `${val}n`;\n    }\n    return String(Number(val));\n}\n/**\n * Attempt to produce an integer representation.\n * BigInts have an `n` suffix.\n * @param val\n * @returns The integer representation or 'NaN' if not numeric.\n */\nfunction toInt(val) {\n    if (typeof val === 'symbol') {\n        return 'NaN';\n    }\n    if (typeof val === 'bigint') {\n        return `${val}n`;\n    }\n    return String(parseInt(val, 10));\n}\n/**\n * Attempt to produce a float representation.\n * BigInts have an `n` suffix.\n * @param val\n * @returns The integer representation or 'NaN' if not numeric.\n */\nfunction toFloat(val) {\n    if (typeof val === 'symbol') {\n        return 'NaN';\n    }\n    return String(parseFloat(val));\n}\n// Based on:\n// https://nodejs.org/api/util.html#utilformatformat-args\n// The result will not match browser exactly, but it should get the\n// right information through.\nconst escapes = {\n    s: (val) => tryStringify(val),\n    d: (val) => toNumber(val),\n    i: (val) => toInt(val),\n    f: (val) => toFloat(val),\n    j: (val) => tryStringify(val),\n    o: (val) => tryStringify(val),\n    O: (val) => tryStringify(val),\n    c: () => '',\n};\n/**\n * A basic formatted for use where `util.format` is not available.\n * This will not be as performant, but it will produce formatted\n * messages.\n *\n * @internal\n *\n * @param args\n * @returns Formatted string.\n */\nfunction format(...args) {\n    var _a;\n    const formatString = args.shift();\n    if (Validators_1.TypeValidators.String.is(formatString)) {\n        let out = '';\n        let i = 0;\n        while (i < formatString.length) {\n            const char = formatString.charAt(i);\n            if (char === '%') {\n                const nextIndex = i + 1;\n                if (nextIndex < formatString.length) {\n                    const nextChar = formatString.charAt(i + 1);\n                    if (nextChar in escapes && args.length) {\n                        const value = args.shift();\n                        // This rule is for math.\n                        // eslint-disable-next-line no-unsafe-optional-chaining\n                        out += (_a = escapes[nextChar]) === null || _a === void 0 ? void 0 : _a.call(escapes, value);\n                    }\n                    else if (nextChar === '%') {\n                        out += '%';\n                    }\n                    else {\n                        out += `%${nextChar}`;\n                    }\n                    i += 2;\n                }\n            }\n            else {\n                out += char;\n                i += 1;\n            }\n        }\n        // If there are any args left after we exhaust the format string\n        // then just stick those on the end.\n        if (args.length) {\n            if (out.length) {\n                out += ' ';\n            }\n            out += args.map(tryStringify).join(' ');\n        }\n        return out;\n    }\n    return args.map(tryStringify).join(' ');\n}\nexports.default = format;\n//# sourceMappingURL=format.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./BasicLogger\"), exports);\n__exportStar(require(\"./format\"), exports);\n__exportStar(require(\"./IBasicLoggerOptions\"), exports);\n__exportStar(require(\"./ILogger\"), exports);\n__exportStar(require(\"./LogLevel\"), exports);\n__exportStar(require(\"./SafeLogger\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The client context provides basic configuration and platform support which are required\n * when building SDK components.\n */\nclass ClientContext {\n    constructor(sdkKey, configuration, platform) {\n        this.sdkKey = sdkKey;\n        this.platform = platform;\n        this.logger = configuration.logger;\n        this.offline = configuration.offline;\n        this.flushInterval = configuration.flushInterval;\n        this.maxEventsInQueue = configuration.maxEventsInQueue;\n        this.streamingUri = configuration.streamingUri;\n        this.pollingUri = configuration.pollingUri;\n        this.eventsUri = configuration.eventsUri;\n    }\n}\nexports.default = ClientContext;\n//# sourceMappingURL=ClientContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IClientContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IUser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IValidatedOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Messages for issues which can be encountered from processing the configuration options.\n */\nclass OptionMessages {\n    static optionBelowMinimum(name, value, min) {\n        return `Config option \"${name}\" had invalid value of ${value}, using minimum of ${min} instead`;\n    }\n    static unknownOption(name) {\n        return `Ignoring unknown config option \"${name}\"`;\n    }\n    static wrongOptionType(name, expectedType, actualType) {\n        return `Config option \"${name}\" should be of type ${expectedType}, got ${actualType}, using default value`;\n    }\n    static wrongOptionTypeBoolean(name, actualType) {\n        return `Config option \"${name}\" should be a boolean, got ${actualType}, converting to boolean`;\n    }\n    static partialEndpoint(name) {\n        return `You have set custom uris without specifying the ${name} URI; connections may not work properly`;\n    }\n    static mandatory(name) {\n        return `${name} is mandatory`;\n    }\n    static invalidOptionValue(name) {\n        return `Invalid option value: ${name}`;\n    }\n    static missingKeyInBootstrapValue(key) {\n        return `Missing key \"${key}\" in bootstrap value`;\n    }\n}\nexports.default = OptionMessages;\n//# sourceMappingURL=OptionMessages.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserBuilder = void 0;\n/**\n * Creates an instance of the FeatBit user.\n *\n * @return\n *   The new {@link IUser} instance.\n */\nclass UserBuilder {\n    constructor(keyId) {\n        this._keyId = '';\n        this._name = '';\n        this._custom = [];\n        this._keyId = keyId;\n    }\n    name(name) {\n        this._name = name;\n        return this;\n    }\n    custom(propertyName, value) {\n        var _a;\n        (_a = this._custom) === null || _a === void 0 ? void 0 : _a.push({ name: propertyName, value: `${value}` });\n        return this;\n    }\n    build() {\n        return {\n            name: this._name,\n            keyId: this._keyId,\n            customizedProperties: this._custom\n        };\n    }\n}\nexports.UserBuilder = UserBuilder;\n//# sourceMappingURL=UserBuilder.js.map","\"use strict\";\n/* eslint-disable class-methods-use-this */\n/* eslint-disable max-classes-per-file */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeValidators = exports.KindValidator = exports.DateValidator = exports.UserValidator = exports.BootstrapValidator = exports.NullableBoolean = exports.Function = exports.StringMatchingRegex = exports.NumberWithMinimum = exports.TypeArray = exports.Type = exports.FactoryOrInstance = void 0;\n// The classes here are static, but needs to be instantiated to\n// support the generic functionality. Which is why we do not care about using\n// `this`\n// These validators are also of trivial complexity, so we are allowing more than\n// one per file.\nconst OptionMessages_1 = __importDefault(require(\"./OptionMessages\"));\n/**\n * Validate a factory or instance.\n */\nclass FactoryOrInstance {\n    is(factoryOrInstance) {\n        if (Array.isArray(factoryOrInstance)) {\n            return false;\n        }\n        const anyFactory = factoryOrInstance;\n        const typeOfFactory = typeof anyFactory;\n        return typeOfFactory === 'function' || typeOfFactory === 'object';\n    }\n    getType() {\n        return 'factory method or object';\n    }\n}\nexports.FactoryOrInstance = FactoryOrInstance;\n/**\n * Validate a basic type.\n */\nclass Type {\n    constructor(typeName, example) {\n        this.typeName = typeName;\n        this.typeOf = typeof example;\n    }\n    is(u) {\n        if (Array.isArray(u)) {\n            return false;\n        }\n        return typeof u === this.typeOf;\n    }\n    getType() {\n        return this.typeName;\n    }\n}\nexports.Type = Type;\n/**\n * Validate an array of the specified type.\n *\n * This does not validate instances of types. All class instances\n * of classes will simply objects.\n */\nclass TypeArray {\n    constructor(typeName, example) {\n        this.typeName = typeName;\n        this.typeOf = typeof example;\n    }\n    is(u) {\n        if (Array.isArray(u)) {\n            if (u.length > 0) {\n                return u.every((val) => typeof val === this.typeOf);\n            }\n            return true;\n        }\n        return false;\n    }\n    getType() {\n        return this.typeName;\n    }\n}\nexports.TypeArray = TypeArray;\n/**\n * Validate a value is a number and is greater or eval than a minimum.\n */\nclass NumberWithMinimum extends Type {\n    constructor(min) {\n        super(`number with minimum value of ${min}`, 0);\n        this.min = min;\n    }\n    is(u) {\n        return typeof u === this.typeOf && u >= this.min;\n    }\n}\nexports.NumberWithMinimum = NumberWithMinimum;\n/**\n * Validate a value is a string and it matches the given expression.\n */\nclass StringMatchingRegex extends Type {\n    constructor(expression) {\n        super(`string matching ${expression}`, '');\n        this.expression = expression;\n    }\n    is(u) {\n        return !!u.match(this.expression);\n    }\n}\nexports.StringMatchingRegex = StringMatchingRegex;\n/**\n * Validate a value is a function.\n */\nclass Function {\n    is(u) {\n        // We cannot inspect the parameters and there isn't really\n        // a generic function type we can instantiate.\n        // So the type guard is here just to make TS comfortable\n        // calling something after using this guard.\n        return typeof u === 'function';\n    }\n    getType() {\n        return 'function';\n    }\n}\nexports.Function = Function;\nclass NullableBoolean {\n    is(u) {\n        return typeof u === 'boolean' || typeof u === 'undefined' || u === null;\n    }\n    getType() {\n        return 'boolean | undefined | null';\n    }\n}\nexports.NullableBoolean = NullableBoolean;\nclass BootstrapValidator {\n    constructor() {\n        this.messages = [];\n    }\n    is(u) {\n        if (typeof u !== 'object' || u === null) {\n            this.messages.push(OptionMessages_1.default.invalidOptionValue('bootstrap'));\n            return false;\n        }\n        try {\n            const bootstrap = u;\n            for (let flag of bootstrap) {\n                const hasMandatoryKeys = ['id', 'variation'].every((key) => Object.keys(flag).includes(key));\n                const keys = Object.keys(flag);\n                if (keys.includes('id')) {\n                    this.messages.push(OptionMessages_1.default.missingKeyInBootstrapValue('id'));\n                }\n                if (keys.includes('variation')) {\n                    this.messages.push(OptionMessages_1.default.missingKeyInBootstrapValue('variation'));\n                }\n                if (this.messages.length > 0) {\n                    return false;\n                }\n            }\n        }\n        catch (_) {\n            this.messages.push(OptionMessages_1.default.wrongOptionType('bootstrap', this.getType(), typeof u));\n            return false;\n        }\n        return true;\n    }\n    getType() {\n        return 'IFlagBase[]';\n    }\n}\nexports.BootstrapValidator = BootstrapValidator;\nclass UserValidator {\n    constructor() {\n        this.messages = [];\n    }\n    is(u) {\n        if (typeof u !== 'object' || u === null) {\n            this.messages.push(OptionMessages_1.default.mandatory('user'));\n            return false;\n        }\n        const user = u;\n        if (typeof user.keyId !== 'string' || user.keyId.trim() === '') {\n            this.messages.push(OptionMessages_1.default.mandatory('user.keyId'));\n            return false;\n        }\n        if (typeof user.name !== 'string' || user.name.trim() === '') {\n            this.messages.push(OptionMessages_1.default.mandatory('user.name'));\n            return false;\n        }\n        return true;\n    }\n    getType() {\n        return 'user';\n    }\n}\nexports.UserValidator = UserValidator;\n// Our reference SDK, Go, parses date/time strings with the time.RFC3339Nano format.\n// This regex should match strings that are valid in that format, and no others.\n// Acceptable:\n//   2019-10-31T23:59:59Z, 2019-10-31T23:59:59.100Z,\n//   2019-10-31T23:59:59-07, 2019-10-31T23:59:59-07:00, etc.\n// Unacceptable: no \"T\", no time zone designation\nconst DATE_REGEX = /^\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d\\d*)?(Z|[-+]\\d\\d(:\\d\\d)?)/;\n/**\n * Validate a value is a date. Values which are numbers are treated as dates and any string\n * which if compliant with `time.RFC3339Nano` is a date.\n */\nclass DateValidator {\n    is(u) {\n        return typeof u === 'number' || (typeof u === 'string' && DATE_REGEX.test(u));\n    }\n    getType() {\n        return 'date';\n    }\n}\nexports.DateValidator = DateValidator;\n/**\n * Validates that a string is a valid kind.\n */\nclass KindValidator extends StringMatchingRegex {\n    constructor() {\n        super(/^(\\w|\\.|-)+$/);\n    }\n    is(u) {\n        return super.is(u) && u !== 'kind';\n    }\n}\nexports.KindValidator = KindValidator;\n/**\n * A set of standard type validators.\n */\nclass TypeValidators {\n    static createTypeArray(typeName, example) {\n        return new TypeArray(typeName, example);\n    }\n    static numberWithMin(min) {\n        return new NumberWithMinimum(min);\n    }\n    static stringMatchingRegex(expression) {\n        return new StringMatchingRegex(expression);\n    }\n}\nexports.TypeValidators = TypeValidators;\nTypeValidators.String = new Type('string', '');\nTypeValidators.Number = new Type('number', 0);\nTypeValidators.ObjectOrFactory = new FactoryOrInstance();\nTypeValidators.Object = new Type('object', {});\nTypeValidators.StringArray = new TypeArray('string[]', '');\nTypeValidators.Boolean = new Type('boolean', true);\nTypeValidators.User = new Type('object', {});\nTypeValidators.Bootstrap = new Type('object', {});\nTypeValidators.Function = new Function();\nTypeValidators.Date = new DateValidator();\nTypeValidators.Kind = new KindValidator();\nTypeValidators.NullableBoolean = new NullableBoolean();\n//# sourceMappingURL=Validators.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ClientContext\"), exports);\n__exportStar(require(\"./IClientContext\"), exports);\n__exportStar(require(\"./IOptions\"), exports);\n__exportStar(require(\"./IUser\"), exports);\n__exportStar(require(\"./IValidatedOptions\"), exports);\n__exportStar(require(\"./OptionMessages\"), exports);\n__exportStar(require(\"./UserBuilder\"), exports);\n__exportStar(require(\"./Validators\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IInfo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IPlatform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IWebSocket.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst version_1 = require(\"../../version\");\nclass BrowserInfo {\n    get appType() {\n        return 'Browser-Client-SDK';\n    }\n    platformData() {\n        return {\n            os: {},\n            name: 'Browser',\n            additional: {},\n        };\n    }\n    sdkData() {\n        return {\n            name: version_1.name,\n            version: version_1.version,\n            userAgentBase: this.appType\n        };\n    }\n}\nexports.default = BrowserInfo;\n//# sourceMappingURL=BrowserInfo.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BrowserInfo_1 = __importDefault(require(\"./BrowserInfo\"));\nconst BrowserRequests_1 = require(\"./BrowserRequests\");\nconst BrowserWebSocket_1 = __importDefault(require(\"./BrowserWebSocket\"));\nclass BrowserPlatform {\n    constructor(options) {\n        this.info = new BrowserInfo_1.default();\n        this.requests = new BrowserRequests_1.BrowserRequests();\n        this.webSocket = new BrowserWebSocket_1.default();\n    }\n}\nexports.default = BrowserPlatform;\n//# sourceMappingURL=BrowserPlatform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserRequests = void 0;\nclass BrowserRequests {\n    fetch(url, options = {}) {\n        return fetch(url, options);\n    }\n}\nexports.BrowserRequests = BrowserRequests;\n//# sourceMappingURL=BrowserRequests.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Emits_1 = require(\"../../utils/Emits\");\nconst EventEmitter_1 = require(\"../../utils/EventEmitter\");\nconst utils_1 = require(\"../../data-sync/utils\");\nconst types_1 = require(\"../../data-sync/types\");\nconst socketConnectionIntervals = [1000, 3000, 5000, 7000, 11000, 13000, 30000, 60000];\nclass BrowserWebSocket {\n    constructor() {\n        this.retryCounter = 0;\n        this.closed = false;\n        this._config = {};\n        this.emitter = new EventEmitter_1.EventEmitter();\n    }\n    identify(user) {\n        this._config.user = user;\n        this.doDataSync();\n    }\n    connect() {\n        var _a, _b, _c, _d;\n        let that = this;\n        const startTime = Date.now();\n        const url = this._config.streamingUri.replace(/^http/, 'ws') + `?type=client&token=${(0, utils_1.generateConnectionToken)(this._config.sdkKey)}`;\n        this.ws = new WebSocket(url);\n        // Connection opened\n        (_a = that.ws) === null || _a === void 0 ? void 0 : _a.addEventListener('open', function (event) {\n            // this is the websocket instance to which the current listener is binded to, it's different from that.socket\n            that._config.logger.info(`WebSocket connection succeeded, connection time: ${Date.now() - startTime} ms`);\n            that.doDataSync();\n            that.sendPingMessage();\n        });\n        // Connection closed\n        (_b = that.ws) === null || _b === void 0 ? void 0 : _b.addEventListener('close', function (event) {\n            that._config.logger.warn('WebSocket closed');\n            if (event.code === 4003) { // do not reconnect when 4003\n                return;\n            }\n            that.reconnect();\n        });\n        // Connection error\n        (_c = that.ws) === null || _c === void 0 ? void 0 : _c.addEventListener('error', function (event) {\n            // reconnect\n            that._config.logger.debug('error');\n        });\n        // Listen for messages\n        (_d = that.ws) === null || _d === void 0 ? void 0 : _d.addEventListener('message', function (event) {\n            const message = JSON.parse(event.data);\n            if (message.messageType === 'data-sync') {\n                switch (message.data.eventType) {\n                    case types_1.StreamResponseEventType.patch:\n                        that.emitter.emit('patch', message);\n                        break;\n                    case types_1.StreamResponseEventType.full:\n                        that.emitter.emit('put', message);\n                        break;\n                }\n            }\n        });\n    }\n    close() {\n        var _a;\n        this.closed = true;\n        (_a = this.ws) === null || _a === void 0 ? void 0 : _a.close(4003, 'The client is closed by user');\n        this.ws = undefined;\n    }\n    config(param) {\n        if (param.emitter) {\n            this.emitter = param.emitter;\n        }\n        this._config = Object.assign({}, param);\n    }\n    sendPingMessage() {\n        const payload = {\n            messageType: 'ping',\n            data: null\n        };\n        setTimeout(() => {\n            var _a;\n            try {\n                if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.OPEN) {\n                    this._config.logger.debug('sending ping');\n                    this.ws.send(JSON.stringify(payload));\n                    this.sendPingMessage();\n                }\n                else {\n                    this._config.logger.debug(`socket closed at ${new Date()}`);\n                }\n            }\n            catch (err) {\n                this._config.logger.debug(err);\n            }\n        }, this._config.pingInterval);\n    }\n    doDataSync() {\n        var _a, _b;\n        const payload = {\n            messageType: 'data-sync',\n            data: {\n                timestamp: this._config.getStoreTimestamp(),\n                user: this._config.user\n            }\n        };\n        try {\n            if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.OPEN) {\n                this._config.logger.debug('requesting data');\n                (_b = this.ws) === null || _b === void 0 ? void 0 : _b.send(JSON.stringify(payload));\n            }\n            else {\n                this._config.logger.error(`not requesting data because socket not open`);\n            }\n        }\n        catch (err) {\n            this._config.logger.debug(err);\n        }\n    }\n    reconnect() {\n        if (!this.closed) {\n            this.ws = undefined;\n            const waitTime = socketConnectionIntervals[Math.min(this.retryCounter++, socketConnectionIntervals.length - 1)];\n            this._config.logger.info(`The client will try to reconnect in ${waitTime} milliseconds.`);\n            setTimeout(() => {\n                this._config.logger.info(`The client is trying to reconnect, flag evaluation results may be stale until reconnected, waited for: ${waitTime} milliseconds`);\n                this.connect();\n            }, waitTime);\n        }\n    }\n}\nexports.default = (0, Emits_1.Emits)(BrowserWebSocket);\n//# sourceMappingURL=BrowserWebSocket.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst FbClientCore_1 = require(\"../../FbClientCore\");\nconst BasicLogger_1 = require(\"../../logging/BasicLogger\");\nconst EventEmitter_1 = require(\"../../utils/EventEmitter\");\nconst SafeLogger_1 = require(\"../../logging/SafeLogger\");\nconst Emits_1 = require(\"../../utils/Emits\");\nconst BrowserPlatform_1 = __importDefault(require(\"./BrowserPlatform\"));\nconst LocalStorageStore_1 = __importDefault(require(\"./LocalStorageStore\"));\n/**\n * @ignore\n */\nclass FbClient extends FbClientCore_1.FbClientCore {\n    constructor(options, platform = undefined) {\n        const fallbackLogger = new BasicLogger_1.BasicLogger({\n            level: 'none',\n            destination: console.log\n        });\n        const logger = options.logger ? new SafeLogger_1.SafeLogger(options.logger, fallbackLogger) : fallbackLogger;\n        const emitter = new EventEmitter_1.EventEmitter(logger);\n        let { store } = options;\n        if (!store) {\n            store = new LocalStorageStore_1.default(options);\n        }\n        super(Object.assign(Object.assign({}, options), { logger, store }), platform !== null && platform !== void 0 ? platform : new BrowserPlatform_1.default(Object.assign(Object.assign({}, options), { logger })), {\n            onError: (err) => {\n                if (emitter.listenerCount('error')) {\n                    emitter.emit('error', err);\n                }\n            },\n            onFailed: (err) => {\n                emitter.emit('failed', err);\n            },\n            onReady: () => {\n                emitter.emit('ready');\n            },\n            onUpdate: (keys) => {\n                emitter.emit('update', [keys]);\n                keys.forEach((key) => emitter.emit(`update:${key}`, key));\n            },\n            hasEventListeners: () => emitter\n                .eventNames()\n                .some((name) => name === 'update' || (typeof name === 'string' && name.startsWith('update:'))),\n        });\n        this.emitter = emitter;\n    }\n}\nexports.default = (0, Emits_1.Emits)(FbClient);\n//# sourceMappingURL=FbClient.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"../../store/store\");\nconst BaseStore_1 = require(\"../../store/BaseStore\");\nconst serializeUser_1 = require(\"../../utils/serializeUser\");\nclass LocalStorageStore extends BaseStore_1.BaseStore {\n    constructor(options) {\n        super();\n        this.logger = options.logger;\n    }\n    /* eslint-disable class-methods-use-this */\n    close() {\n        // For the LocalStorage store this is a no-op.\n    }\n    get description() {\n        return 'local-storage-store';\n    }\n    // This method needs to be overridden in the child class\n    saveUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n            localStorage.setItem(store_1.CurrentUserStorageKey, (0, serializeUser_1.serializeUser)(this._user));\n        });\n    }\n    dumpStoreToStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            localStorage.setItem(storageKey, JSON.stringify(this.store));\n        });\n    }\n    loadStoreFromStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            const dataStoreStr = localStorage.getItem(storageKey);\n            let store = null;\n            try {\n                if (dataStoreStr && dataStoreStr.trim().length > 0) {\n                    store = JSON.parse(dataStoreStr);\n                }\n            }\n            catch (err) {\n                this.logger.error(`error while loading local data store: ${storageKey}`, err);\n            }\n            if (!!store) {\n                this.store = store;\n            }\n            else {\n                this.store = {\n                    flags: {},\n                    version: 0\n                };\n            }\n        });\n    }\n}\nexports.default = LocalStorageStore;\n//# sourceMappingURL=LocalStorageStore.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserWebSocket = void 0;\n__exportStar(require(\"./IInfo\"), exports);\n__exportStar(require(\"./IStore\"), exports);\n__exportStar(require(\"./IPlatform\"), exports);\n__exportStar(require(\"./IWebSocket\"), exports);\n__exportStar(require(\"./requests\"), exports);\n__exportStar(require(\"./browser/BrowserRequests\"), exports);\nconst BrowserWebSocket_1 = __importDefault(require(\"./browser/BrowserWebSocket\"));\nexports.BrowserWebSocket = BrowserWebSocket_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\n// These are not full specifications of the interface, but instead subsets\n// based on the functionality needed by the SDK. Exposure of the full standard\n// would require much more per platform implementation for platforms that do not\n// natively support fetch.\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=requests.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseStore = void 0;\nclass BaseStore {\n    constructor() {\n        this.store = {};\n        this.initCalled = false;\n        this._user = {};\n    }\n    identify(user) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._user = Object.assign({}, user);\n            yield this.saveUser();\n            yield this.loadStoreFromStorage();\n        });\n    }\n    get user() {\n        return this._user;\n    }\n    addItem(kind, key, item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let items = this.store[kind.namespace];\n            if (!items) {\n                items = {};\n                this.store[kind.namespace] = items;\n            }\n            if (Object.hasOwnProperty.call(items, key)) {\n                const old = items[key];\n                if (!old || old.version < item.version) {\n                    items[key] = item;\n                }\n            }\n            else {\n                items[key] = item;\n            }\n            if (item.version > this.store.version) {\n                this.store.version = item.version;\n            }\n            yield this.dumpStoreToStorage();\n        });\n    }\n    get(kind, key) {\n        const items = this.store[kind.namespace];\n        if (items) {\n            if (Object.prototype.hasOwnProperty.call(items, key)) {\n                const item = items[key];\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return null;\n    }\n    all(kind) {\n        var _a;\n        const result = {};\n        const items = (_a = this.store[kind.namespace]) !== null && _a !== void 0 ? _a : {};\n        Object.entries(items).forEach(([key, item]) => {\n            if (item) {\n                result[key] = item;\n            }\n        });\n        return [result, this.store.version];\n    }\n    init(allData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.store = allData;\n            Object.keys(allData).map(namespace => {\n                Object.entries(allData[namespace]).forEach(([_, item]) => {\n                    const ele = item;\n                    if (ele.version > this.store.version) {\n                        this.store.version = ele.version;\n                    }\n                });\n            });\n            yield this.dumpStoreToStorage();\n            this.initCalled = true;\n        });\n    }\n    upsert(kind, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.addItem(kind, data.key, data);\n        });\n    }\n    initialized() {\n        return this.initCalled;\n    }\n    /* eslint-disable class-methods-use-this */\n    close() {\n        // For the LocalStorage store this is a no-op.\n    }\n    get version() {\n        return this.store.version;\n    }\n    // This getter needs to be overridden in the child class\n    get description() {\n        return '';\n    }\n    // This method needs to be overridden in the child class\n    saveUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    // This method needs to be overridden in the child class\n    loadStoreFromStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    // This method needs to be overridden in the child class\n    dumpStoreToStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n}\nexports.BaseStore = BaseStore;\n//# sourceMappingURL=BaseStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass DataKinds {\n}\nDataKinds.Flags = {\n    namespace: 'flags'\n};\nexports.default = DataKinds;\n//# sourceMappingURL=DataKinds.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDataSourceUpdates.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"./store\");\nconst BaseStore_1 = require(\"./BaseStore\");\nclass InMemoryStore extends BaseStore_1.BaseStore {\n    constructor() {\n        super();\n        this.allStores = {};\n    }\n    /* eslint-disable class-methods-use-this */\n    close() {\n        // For the LocalStorage store this is a no-op.\n    }\n    get description() {\n        return 'in-memory-store';\n    }\n    saveUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For in-memory store, this is a no-op.\n        });\n    }\n    dumpStoreToStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            this.allStores[storageKey] = Object.assign({}, this.store);\n        });\n    }\n    loadStoreFromStorage() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            this.store = (_a = this.allStores[storageKey]) !== null && _a !== void 0 ? _a : { flags: {}, version: 0 };\n        });\n    }\n}\nexports.default = InMemoryStore;\n//# sourceMappingURL=InMemoryStore.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DataKinds\"), exports);\n__exportStar(require(\"./IDataSourceUpdates\"), exports);\n__exportStar(require(\"./InMemoryStore\"), exports);\n__exportStar(require(\"./serialization\"), exports);\n__exportStar(require(\"./store\"), exports);\n__exportStar(require(\"./BaseStore\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deserializePatch = exports.deserializeAll = void 0;\nconst DataKinds_1 = __importDefault(require(\"./DataKinds\"));\n/**\n * @internal\n */\nfunction deserializeAll(flags) {\n    const result = {\n        [DataKinds_1.default.Flags.namespace]: {}\n    };\n    if (flags === null || flags === void 0 ? void 0 : flags.length) {\n        result[DataKinds_1.default.Flags.namespace] = flags.reduce((acc, cur) => {\n            acc[cur.id] = Object.assign(Object.assign({}, cur), { version: cur.timestamp || 0, key: cur.id, variations: cur.variationOptions });\n            return acc;\n        }, {});\n    }\n    return result;\n}\nexports.deserializeAll = deserializeAll;\n/**\n * @internal\n */\nfunction deserializePatch(flags) {\n    const result = [\n        ...(flags === null || flags === void 0 ? void 0 : flags.map(item => ({\n            data: Object.assign(Object.assign({}, item), { version: item.timestamp, key: item.id, variations: item.variationOptions }),\n            kind: DataKinds_1.default.Flags\n        }))) || []\n    ];\n    return result;\n}\nexports.deserializePatch = deserializePatch;\n//# sourceMappingURL=serialization.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CurrentUserStorageKey = exports.StoreStorageKey = void 0;\nexports.StoreStorageKey = 'fb-datastore';\nexports.CurrentUserStorageKey = 'fb-user';\n//# sourceMappingURL=store.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emits = void 0;\n/**\n * Adds the implementation of an event emitter to something that contains\n * a field of `emitter` with type `EventEmitter`.\n * @param Base The class to derive the mixin from.\n * @returns A class extending the base with an event emitter.\n */\nfunction Emits(Base) {\n    return class WithEvents extends Base {\n        on(eventName, listener, context) {\n            this.emitter.on(eventName, listener, context);\n            return this;\n        }\n        addListener(eventName, listener, context) {\n            this.emitter.addListener(eventName, listener, context);\n            return this;\n        }\n        once(eventName, listener, context) {\n            this.emitter.once(eventName, listener, context);\n            return this;\n        }\n        removeListener(eventName, listener, context) {\n            this.emitter.removeListener(eventName, listener, context);\n            return this;\n        }\n        off(eventName, listener, context) {\n            this.emitter.off(eventName, listener, context);\n            return this;\n        }\n        removeAllListeners(event) {\n            this.emitter.removeAllListeners(event);\n            return this;\n        }\n        listeners(eventName) {\n            return this.emitter.listeners(eventName);\n        }\n        emit(eventName, ...args) {\n            this.emitter.emit(eventName, args);\n            return this;\n        }\n        listenerCount(eventName) {\n            return this.emitter.listenerCount(eventName);\n        }\n        prependListener(eventName, listener, context) {\n            this.emitter.prependListener(eventName, listener, context);\n            return this;\n        }\n        prependOnceListener(eventName, listener, context) {\n            this.emitter.prependOnceListener(eventName, listener, context);\n            return this;\n        }\n        eventNames() {\n            return this.emitter.eventNames();\n        }\n        maybeReportError(error) {\n            this.emitter.maybeReportError(error);\n            return this;\n        }\n    };\n}\nexports.Emits = Emits;\n//# sourceMappingURL=Emits.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor(logger) {\n        this.logger = logger;\n        this.events = {};\n    }\n    listeningTo(event) {\n        return !!this.events[event];\n    }\n    on(event, handler, context) {\n        this.events[event] = this.events[event] || [];\n        this.events[event] = this.events[event].concat({\n            handler: handler,\n            context: context,\n        });\n        return this;\n    }\n    addListener(event, handler, context) {\n        return this.on(event, handler, context);\n    }\n    once(event, handler, context) {\n        const onceHandler = (...args) => {\n            this.off(event, onceHandler, context);\n            handler.apply(context, args);\n        };\n        return this.on(event, onceHandler, context);\n    }\n    off(event, handler, context) {\n        if (!this.events[event]) {\n            return this;\n        }\n        for (let i = 0; i < this.events[event].length; i++) {\n            if (this.events[event][i].handler === handler && this.events[event][i].context === context) {\n                this.events[event] = this.events[event].slice(0, i).concat(this.events[event].slice(i + 1));\n            }\n        }\n        return this;\n    }\n    removeListener(event, handler, context) {\n        return this.off(event, handler, context);\n    }\n    removeAllListeners(event) {\n        if (event) {\n            delete this.events[event];\n        }\n        else {\n            this.events = {};\n        }\n        return this;\n    }\n    listeners(event) {\n        return this.events[event] ? this.events[event].map((event) => event.handler) : [];\n    }\n    emit(event, ...args) {\n        if (!this.events[event]) {\n            return this;\n        }\n        // Copy the list of handlers before iterating, in case any handler adds or removes another handler.\n        // Any such changes should not affect what we do here-- we want to notify every handler that existed\n        // at the moment that the event was fired.\n        const copiedHandlers = [...this.events[event]];\n        for (let i = 0; i < copiedHandlers.length; i++) {\n            copiedHandlers[i].handler.apply(copiedHandlers[i].context, Array.prototype.slice.call(arguments, 1));\n        }\n        return this;\n    }\n    listenerCount(event) {\n        return this.events[event] ? this.events[event].length : 0;\n    }\n    prependListener(event, handler, context) {\n        this.events[event] = this.events[event] || [];\n        this.events[event] = [\n            {\n                handler: handler,\n                context: context,\n            },\n            ...this.events[event]\n        ];\n        return this;\n    }\n    prependOnceListener(event, handler, context) {\n        const onceHandler = (...args) => {\n            this.off(event, onceHandler, context);\n            handler.apply(context, args);\n        };\n        return this.prependListener(event, onceHandler, context);\n    }\n    eventNames() {\n        return Object.keys(this.events);\n    }\n    maybeReportError(error) {\n        var _a;\n        if (!error) {\n            return this;\n        }\n        if (this.listeningTo('error')) {\n            this.emit('error', error);\n        }\n        else {\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.error(error);\n        }\n        return this;\n    }\n}\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueConverters = void 0;\nclass ValueConverters {\n    static bool(value) {\n        if ((value === null || value === void 0 ? void 0 : value.toUpperCase()) === 'TRUE') {\n            return ValueConverters.success(true);\n        }\n        if ((value === null || value === void 0 ? void 0 : value.toUpperCase()) === 'FALSE') {\n            return ValueConverters.success(false);\n        }\n        return ValueConverters.error();\n    }\n    static number(value) {\n        const num = Number(value);\n        if (Number.isNaN(num)) {\n            return ValueConverters.error();\n        }\n        return ValueConverters.success(num);\n    }\n    static string(value) {\n        return ValueConverters.success(value);\n    }\n    static json(value) {\n        try {\n            const val = JSON.parse(value);\n            return ValueConverters.success(val);\n        }\n        catch (err) {\n            return ValueConverters.error();\n        }\n    }\n    static success(value) {\n        return {\n            isSucceeded: true,\n            value: value\n        };\n    }\n    static error() {\n        return {\n            isSucceeded: false\n        };\n    }\n}\nexports.ValueConverters = ValueConverters;\n//# sourceMappingURL=ValueConverters.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=VoidFunction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalizeUri = void 0;\n// This function is designed to remove any trailing forward slashes at the end of the provided URI string\nfunction canonicalizeUri(uri) {\n    return uri.replace(/\\/+$/, '');\n}\nexports.canonicalizeUri = canonicalizeUri;\n//# sourceMappingURL=canonicalizeUri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.debounce = void 0;\n/**\n * Wait before calling the same function. Useful for expensive calls.\n * Adapted from https://amitd.co/code/typescript/debounce.\n *\n * @return The debounced function.\n *\n * @example\n *\n * ```js\n * const debouncedFunction = debounce(e => {\n *   console.log(e);\n * }, 5000);\n *\n * // Console logs 'Hello world again ' after 5 seconds\n * debouncedFunction('Hello world');\n * debouncedFunction('Hello world again');\n * ```\n * @param fn The function to be debounced.\n * @param delayMs Defaults to 5 seconds.\n */\nconst debounce = (fn, delayMs = 5000) => {\n    let timer;\n    return (...args) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            fn(...args);\n        }, delayMs);\n    };\n};\nexports.debounce = debounce;\n//# sourceMappingURL=debounce.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.httpErrorMessage = exports.defaultHeaders = void 0;\nfunction defaultHeaders(sdkKey, info) {\n    const { userAgentBase, version } = info.sdkData();\n    const headers = {\n        'Content-Type': 'application/json',\n        'User-Agent': `${userAgentBase !== null && userAgentBase !== void 0 ? userAgentBase : info.appType}/${version}`,\n        'Authorization': sdkKey\n    };\n    return headers;\n}\nexports.defaultHeaders = defaultHeaders;\nfunction httpErrorMessage(err, context, retryMessage) {\n    let desc;\n    if (err.status) {\n        desc = `error ${err.status}${err.status === 401 ? ' (invalid SDK key)' : ''}`;\n    }\n    else {\n        desc = `I/O error (${err.message || err})`;\n    }\n    const action = retryMessage !== null && retryMessage !== void 0 ? retryMessage : 'giving up permanently';\n    return `Received ${desc} for ${context} - ${action}`;\n}\nexports.httpErrorMessage = httpErrorMessage;\n//# sourceMappingURL=http.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./isNullOrUndefined\"), exports);\n__exportStar(require(\"./sleep\"), exports);\n__exportStar(require(\"./ValueConverters\"), exports);\n__exportStar(require(\"./VoidFunction\"), exports);\n__exportStar(require(\"./serializeUser\"), exports);\n__exportStar(require(\"./debounce\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNullOrUndefined = void 0;\nfunction isNullOrUndefined(val) {\n    return val === null || val === undefined;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n//# sourceMappingURL=isNullOrUndefined.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeUser = void 0;\nfunction serializeUser(user) {\n    var _a;\n    if (!user) {\n        return '';\n    }\n    const builtInProperties = `${user.keyId},${user.name}`;\n    const customizedProperties = (_a = user.customizedProperties) === null || _a === void 0 ? void 0 : _a.sort((a, b) => {\n        const nameA = a.name.toLowerCase();\n        const nameB = b.name.toLowerCase();\n        if (nameA < nameB) {\n            return -1;\n        }\n        if (nameA > nameB) {\n            return 1;\n        }\n        return 0;\n    }).map(p => `${p.name}:${p.value}`).join(',');\n    return `${builtInProperties},${customizedProperties}`;\n}\nexports.serializeUser = serializeUser;\n//# sourceMappingURL=serializeUser.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sleep = (delayMillis = 1000) => __awaiter(void 0, void 0, void 0, function* () {\n    return new Promise((resolve) => {\n        setTimeout(resolve, delayMillis);\n    });\n});\nexports.default = sleep;\n//# sourceMappingURL=sleep.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.name = exports.version = void 0;\nexports.version = \"3.0.5\";\nexports.name = \"@featbit/js-client-sdk\";\n//# sourceMappingURL=version.js.map","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  AllProviderEvents: () => ClientProviderEvents,\n  ClientProviderEvents: () => ClientProviderEvents,\n  DefaultLogger: () => DefaultLogger,\n  ErrorCode: () => ErrorCode,\n  FlagNotFoundError: () => FlagNotFoundError,\n  GeneralError: () => GeneralError,\n  GenericEventEmitter: () => GenericEventEmitter,\n  InvalidContextError: () => InvalidContextError,\n  LOG_LEVELS: () => LOG_LEVELS,\n  OpenFeatureCommonAPI: () => OpenFeatureCommonAPI,\n  OpenFeatureError: () => OpenFeatureError,\n  ParseError: () => ParseError,\n  ProviderNotReadyError: () => ProviderNotReadyError,\n  ProviderStatus: () => ProviderStatus,\n  SafeLogger: () => SafeLogger,\n  ServerProviderEvents: () => ServerProviderEvents,\n  StandardResolutionReasons: () => StandardResolutionReasons,\n  TargetingKeyMissingError: () => TargetingKeyMissingError,\n  TypeMismatchError: () => TypeMismatchError,\n  isObject: () => isObject,\n  isString: () => isString,\n  objectOrUndefined: () => objectOrUndefined,\n  statusMatchesEvent: () => statusMatchesEvent,\n  stringOrUndefined: () => stringOrUndefined\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/errors/open-feature-error-abstract.ts\nvar OpenFeatureError = class extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, OpenFeatureError.prototype);\n    this.name = \"OpenFeatureError\";\n  }\n};\n\n// src/evaluation/evaluation.ts\nvar StandardResolutionReasons = {\n  /**\n   * The resolved value was the result of a dynamic evaluation, such as a rule or specific user-targeting.\n   */\n  TARGETING_MATCH: \"TARGETING_MATCH\",\n  /**\n   * The resolved value was the result of pseudorandom assignment.\n   */\n  SPLIT: \"SPLIT\",\n  /**\n   * The resolved value was the result of the flag being disabled in the management system.\n   */\n  DISABLED: \"DISABLED\",\n  /**\n   *  The resolved value was configured statically, or otherwise fell back to a pre-configured value.\n   */\n  DEFAULT: \"DEFAULT\",\n  /**\n   * The reason for the resolved value could not be determined.\n   */\n  UNKNOWN: \"UNKNOWN\",\n  /**\n   * The resolved value is static (no dynamic evaluation).\n   */\n  STATIC: \"STATIC\",\n  /**\n   * The resolved value was retrieved from cache.\n   */\n  CACHED: \"CACHED\",\n  /**\n   * The resolved value was the result of an error.\n   *\n   * Note: The `errorCode` and `errorMessage` fields may contain additional details of this error.\n   */\n  ERROR: \"ERROR\"\n};\nvar ErrorCode = /* @__PURE__ */ ((ErrorCode2) => {\n  ErrorCode2[\"PROVIDER_NOT_READY\"] = \"PROVIDER_NOT_READY\";\n  ErrorCode2[\"FLAG_NOT_FOUND\"] = \"FLAG_NOT_FOUND\";\n  ErrorCode2[\"PARSE_ERROR\"] = \"PARSE_ERROR\";\n  ErrorCode2[\"TYPE_MISMATCH\"] = \"TYPE_MISMATCH\";\n  ErrorCode2[\"TARGETING_KEY_MISSING\"] = \"TARGETING_KEY_MISSING\";\n  ErrorCode2[\"INVALID_CONTEXT\"] = \"INVALID_CONTEXT\";\n  ErrorCode2[\"GENERAL\"] = \"GENERAL\";\n  return ErrorCode2;\n})(ErrorCode || {});\n\n// src/errors/general-error.ts\nvar GeneralError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, GeneralError.prototype);\n    this.name = \"GeneralError\";\n    this.code = \"GENERAL\" /* GENERAL */;\n  }\n};\n\n// src/errors/flag-not-found-error.ts\nvar FlagNotFoundError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, FlagNotFoundError.prototype);\n    this.name = \"FlagNotFoundError\";\n    this.code = \"FLAG_NOT_FOUND\" /* FLAG_NOT_FOUND */;\n  }\n};\n\n// src/errors/parse-error.ts\nvar ParseError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ParseError.prototype);\n    this.name = \"ParseError\";\n    this.code = \"PARSE_ERROR\" /* PARSE_ERROR */;\n  }\n};\n\n// src/errors/type-mismatch-error.ts\nvar TypeMismatchError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TypeMismatchError.prototype);\n    this.name = \"TypeMismatchError\";\n    this.code = \"TYPE_MISMATCH\" /* TYPE_MISMATCH */;\n  }\n};\n\n// src/errors/targeting-key-missing-error.ts\nvar TargetingKeyMissingError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TargetingKeyMissingError.prototype);\n    this.name = \"TargetingKeyMissingError\";\n    this.code = \"TARGETING_KEY_MISSING\" /* TARGETING_KEY_MISSING */;\n  }\n};\n\n// src/errors/invalid-context-error.ts\nvar InvalidContextError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, InvalidContextError.prototype);\n    this.name = \"InvalidContextError\";\n    this.code = \"INVALID_CONTEXT\" /* INVALID_CONTEXT */;\n  }\n};\n\n// src/errors/provider-not-ready-error.ts\nvar ProviderNotReadyError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ProviderNotReadyError.prototype);\n    this.name = \"ProviderNotReadyError\";\n    this.code = \"PROVIDER_NOT_READY\" /* PROVIDER_NOT_READY */;\n  }\n};\n\n// src/provider/provider.ts\nvar ProviderStatus = /* @__PURE__ */ ((ProviderStatus2) => {\n  ProviderStatus2[\"NOT_READY\"] = \"NOT_READY\";\n  ProviderStatus2[\"READY\"] = \"READY\";\n  ProviderStatus2[\"ERROR\"] = \"ERROR\";\n  ProviderStatus2[\"STALE\"] = \"STALE\";\n  return ProviderStatus2;\n})(ProviderStatus || {});\n\n// src/events/events.ts\nvar ServerProviderEvents = /* @__PURE__ */ ((ServerProviderEvents2) => {\n  ServerProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ServerProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ServerProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ServerProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ServerProviderEvents2;\n})(ServerProviderEvents || {});\nvar ClientProviderEvents = /* @__PURE__ */ ((ClientProviderEvents2) => {\n  ClientProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ClientProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ClientProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ClientProviderEvents2[\"ContextChanged\"] = \"PROVIDER_CONTEXT_CHANGED\";\n  ClientProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ClientProviderEvents2;\n})(ClientProviderEvents || {});\n\n// src/events/event-utils.ts\nvar eventStatusMap = {\n  [\"READY\" /* READY */]: \"PROVIDER_READY\" /* Ready */,\n  [\"ERROR\" /* ERROR */]: \"PROVIDER_ERROR\" /* Error */,\n  [\"STALE\" /* STALE */]: \"PROVIDER_STALE\" /* Stale */,\n  [\"NOT_READY\" /* NOT_READY */]: void 0\n};\nvar statusMatchesEvent = (event, status) => {\n  return !status && event === \"PROVIDER_READY\" /* Ready */ || eventStatusMap[status] === event;\n};\n\n// src/logger/default-logger.ts\nvar DefaultLogger = class {\n  error(...args) {\n    console.error(...args);\n  }\n  warn(...args) {\n    console.warn(...args);\n  }\n  info() {\n  }\n  debug() {\n  }\n};\n\n// src/logger/safe-logger.ts\nvar LOG_LEVELS = [\"error\", \"warn\", \"info\", \"debug\"];\nvar SafeLogger = class {\n  constructor(logger) {\n    this.fallbackLogger = new DefaultLogger();\n    try {\n      for (const level of LOG_LEVELS) {\n        if (!logger[level] || typeof logger[level] !== \"function\") {\n          throw new Error(`The provided logger is missing the ${level} method.`);\n        }\n      }\n      this.logger = logger;\n    } catch (err) {\n      console.error(err);\n      console.error(\"Falling back to the default logger.\");\n      this.logger = this.fallbackLogger;\n    }\n  }\n  error(...args) {\n    this.log(\"error\", ...args);\n  }\n  warn(...args) {\n    this.log(\"warn\", ...args);\n  }\n  info(...args) {\n    this.log(\"info\", ...args);\n  }\n  debug(...args) {\n    this.log(\"debug\", ...args);\n  }\n  log(level, ...args) {\n    try {\n      this.logger[level](...args);\n    } catch (error) {\n      this.fallbackLogger[level](...args);\n    }\n  }\n};\n\n// src/events/generic-event-emitter.ts\nvar GenericEventEmitter = class {\n  constructor(globalLogger) {\n    this.globalLogger = globalLogger;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._handlers = /* @__PURE__ */ new WeakMap();\n  }\n  // here we use E, to restrict the events a provider can manually emit (PROVIDER_CONTEXT_CHANGED is emitted by the SDK)\n  emit(eventType, context) {\n    this.eventEmitter.emit(eventType, context);\n  }\n  addHandler(eventType, handler) {\n    const asyncHandler = (details) => __async(this, null, function* () {\n      yield handler(details);\n    });\n    this._handlers.set(handler, asyncHandler);\n    this.eventEmitter.on(eventType, asyncHandler);\n  }\n  removeHandler(eventType, handler) {\n    const asyncHandler = this._handlers.get(handler);\n    if (!asyncHandler) {\n      return;\n    }\n    this.eventEmitter.removeListener(eventType, asyncHandler);\n  }\n  removeAllHandlers(eventType) {\n    if (eventType) {\n      this.eventEmitter.removeAllListeners(eventType);\n    } else {\n      this.eventEmitter.removeAllListeners();\n    }\n  }\n  getHandlers(eventType) {\n    return this.eventEmitter.listeners(eventType);\n  }\n  setLogger(logger) {\n    this._eventLogger = new SafeLogger(logger);\n    return this;\n  }\n  get _logger() {\n    var _a, _b;\n    return (_b = this._eventLogger) != null ? _b : (_a = this.globalLogger) == null ? void 0 : _a.call(this);\n  }\n};\n\n// src/type-guards.ts\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nfunction stringOrUndefined(value) {\n  return isString(value) ? value : void 0;\n}\nfunction isObject(value) {\n  return typeof value === \"object\";\n}\nfunction objectOrUndefined(value) {\n  return isObject(value) ? value : void 0;\n}\n\n// src/filter.ts\nfunction isDefined(input) {\n  return typeof input !== \"undefined\" && input !== null;\n}\n\n// src/open-feature.ts\nvar OpenFeatureCommonAPI = class {\n  constructor(category) {\n    this._hooks = [];\n    this._context = {};\n    this._logger = new DefaultLogger();\n    this._clientEventHandlers = /* @__PURE__ */ new Map();\n    this._clientProviders = /* @__PURE__ */ new Map();\n    this._clientEvents = /* @__PURE__ */ new Map();\n    this._runsOn = category;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  setLogger(logger) {\n    this._logger = new SafeLogger(logger);\n    return this;\n  }\n  /**\n   * Get metadata about the default provider.\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  get providerMetadata() {\n    return this.getProviderMetadata();\n  }\n  /**\n   * Get metadata about a registered provider using the client name.\n   * An unbound or empty client name will return metadata from the default provider.\n   * @param {string} [clientName] The name to identify the client\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  getProviderMetadata(clientName) {\n    return this.getProviderForClient(clientName).metadata;\n  }\n  /**\n   * Adds a handler for the given provider event type.\n   * The handlers are called in the order they have been added.\n   * API (global) events run for all providers.\n   * @param {AnyProviderEvent} eventType The provider event type to listen to\n   * @param {EventHandler} handler The handler to run on occurrence of the event type\n   */\n  addHandler(eventType, handler) {\n    [.../* @__PURE__ */ new Map([[void 0, this._defaultProvider]]), ...this._clientProviders].forEach((keyProviderTuple) => {\n      var _a;\n      const clientName = keyProviderTuple[0];\n      const provider = keyProviderTuple[1];\n      const shouldRunNow = statusMatchesEvent(eventType, keyProviderTuple[1].status);\n      if (shouldRunNow) {\n        try {\n          handler({ clientName, providerName: provider.metadata.name });\n        } catch (err) {\n          (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n        }\n      }\n    });\n    this._events.addHandler(eventType, handler);\n  }\n  /**\n   * Removes a handler for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to remove the listener for\n   * @param {EventHandler} handler The handler to remove for the provider event type\n   */\n  removeHandler(eventType, handler) {\n    this._events.removeHandler(eventType, handler);\n  }\n  /**\n   * Removes all event handlers.\n   */\n  clearHandlers() {\n    this._events.removeAllHandlers();\n  }\n  /**\n   * Gets the current handlers for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to get the current handlers for\n   * @returns {EventHandler[]} The handlers currently attached to the given provider event type\n   */\n  getHandlers(eventType) {\n    return this._events.getHandlers(eventType);\n  }\n  setProviderAndWait(clientOrProvider, providerOrUndefined) {\n    return __async(this, null, function* () {\n      yield this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    });\n  }\n  setProvider(clientOrProvider, providerOrUndefined) {\n    const maybePromise = this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    if (maybePromise) {\n      maybePromise.catch(() => {\n      });\n    }\n    return this;\n  }\n  setAwaitableProvider(clientOrProvider, providerOrUndefined) {\n    var _a, _b, _c, _d, _e, _f;\n    const clientName = stringOrUndefined(clientOrProvider);\n    const provider = (_a = objectOrUndefined(clientOrProvider)) != null ? _a : objectOrUndefined(providerOrUndefined);\n    if (!provider) {\n      this._logger.debug(\"No provider defined, ignoring setProvider call\");\n      return;\n    }\n    const oldProvider = this.getProviderForClient(clientName);\n    const providerName = provider.metadata.name;\n    if (oldProvider === provider) {\n      this._logger.debug(\"Provider is already set, ignoring setProvider call\");\n      return;\n    }\n    if (!provider.runsOn) {\n      this._logger.debug(`Provider '${provider.metadata.name}' has not defined its intended use.`);\n    } else if (provider.runsOn !== this._runsOn) {\n      throw new GeneralError(`Provider '${provider.metadata.name}' is intended for use on the ${provider.runsOn}.`);\n    }\n    const emitters = this.getAssociatedEventEmitters(clientName);\n    if (typeof provider.initialize === \"function\" && provider.status === void 0) {\n      const activeLogger = this._logger || console;\n      activeLogger.warn(\n        `Provider ${providerName} implements 'initialize' but not 'status'. Please implement 'status'.`\n      );\n    }\n    let initializationPromise = void 0;\n    if ((provider == null ? void 0 : provider.status) === \"NOT_READY\" /* NOT_READY */ && typeof provider.initialize === \"function\") {\n      initializationPromise = (_d = (_c = (_b = provider.initialize) == null ? void 0 : _b.call(provider, this._context)) == null ? void 0 : _c.then(() => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      })) == null ? void 0 : _d.catch((error) => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        throw error;\n      });\n    } else {\n      emitters.forEach((emitter) => {\n        emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      });\n      (_e = this._events) == null ? void 0 : _e.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n    }\n    if (clientName) {\n      this._clientProviders.set(clientName, provider);\n    } else {\n      this._defaultProvider = provider;\n    }\n    this.transferListeners(oldProvider, provider, clientName, emitters);\n    if (![...this._clientProviders.values(), this._defaultProvider].includes(oldProvider)) {\n      (_f = oldProvider == null ? void 0 : oldProvider.onClose) == null ? void 0 : _f.call(oldProvider);\n    }\n    return initializationPromise;\n  }\n  getProviderForClient(name) {\n    var _a;\n    if (!name) {\n      return this._defaultProvider;\n    }\n    return (_a = this._clientProviders.get(name)) != null ? _a : this._defaultProvider;\n  }\n  buildAndCacheEventEmitterForClient(name) {\n    const emitter = this._clientEvents.get(name);\n    if (emitter) {\n      return emitter;\n    }\n    const newEmitter = this._createEventEmitter();\n    this._clientEvents.set(name, newEmitter);\n    const clientProvider = this.getProviderForClient(name);\n    Object.values(ClientProviderEvents).forEach(\n      (eventType) => {\n        var _a;\n        return (_a = clientProvider.events) == null ? void 0 : _a.addHandler(eventType, (details) => __async(this, null, function* () {\n          newEmitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName: name, providerName: clientProvider.metadata.name }));\n        }));\n      }\n    );\n    return newEmitter;\n  }\n  getUnboundEmitters() {\n    const namedProviders = [...this._clientProviders.keys()];\n    const eventEmitterNames = [...this._clientEvents.keys()].filter(isDefined);\n    const unboundEmitterNames = eventEmitterNames.filter((name) => !namedProviders.includes(name));\n    return [\n      // all unbound, named emitters\n      ...unboundEmitterNames.map((name) => this._clientEvents.get(name)),\n      // the default emitter\n      this._clientEvents.get(void 0)\n    ].filter(isDefined);\n  }\n  getAssociatedEventEmitters(clientName) {\n    return clientName ? [this.buildAndCacheEventEmitterForClient(clientName)] : this.getUnboundEmitters();\n  }\n  transferListeners(oldProvider, newProvider, clientName, emitters) {\n    var _a;\n    (_a = this._clientEventHandlers.get(clientName)) == null ? void 0 : _a.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = oldProvider.events) == null ? void 0 : _a2.removeHandler(...eventHandler);\n    });\n    const newClientHandlers = Object.values(ClientProviderEvents).map((eventType) => {\n      const handler = (details) => __async(this, null, function* () {\n        emitters.forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n        });\n        this._events.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n      });\n      return [eventType, handler];\n    });\n    this._clientEventHandlers.set(clientName, newClientHandlers);\n    newClientHandlers.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = newProvider.events) == null ? void 0 : _a2.addHandler(...eventHandler);\n    });\n  }\n  close() {\n    return __async(this, null, function* () {\n      var _a, _b;\n      try {\n        yield (_b = (_a = this == null ? void 0 : this._defaultProvider) == null ? void 0 : _a.onClose) == null ? void 0 : _b.call(_a);\n      } catch (err) {\n        this.handleShutdownError(this._defaultProvider, err);\n      }\n      const providers = Array.from(this._clientProviders);\n      yield Promise.all(\n        providers.map((_0) => __async(this, [_0], function* ([, provider]) {\n          var _a2;\n          try {\n            yield (_a2 = provider.onClose) == null ? void 0 : _a2.call(provider);\n          } catch (err) {\n            this.handleShutdownError(provider, err);\n          }\n        }))\n      );\n    });\n  }\n  clearProvidersAndSetDefault(defaultProvider) {\n    return __async(this, null, function* () {\n      try {\n        yield this.close();\n      } catch (err) {\n        this._logger.error(\"Unable to cleanly close providers. Resetting to the default configuration.\");\n      } finally {\n        this._clientProviders.clear();\n        this._defaultProvider = defaultProvider;\n      }\n    });\n  }\n  handleShutdownError(provider, err) {\n    this._logger.error(`Error during shutdown of provider ${provider.metadata.name}: ${err}`);\n    this._logger.error(err == null ? void 0 : err.stack);\n  }\n};\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __reflectGet = Reflect.get;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __superGet = (cls, obj, key) => __reflectGet(__getProtoOf(cls), key, obj);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/events/events.js\nvar require_events = __commonJS({\n  \"../../node_modules/events/events.js\"(exports, module2) {\n    \"use strict\";\n    var R = typeof Reflect === \"object\" ? Reflect : null;\n    var ReflectApply = R && typeof R.apply === \"function\" ? R.apply : function ReflectApply2(target, receiver, args) {\n      return Function.prototype.apply.call(target, receiver, args);\n    };\n    var ReflectOwnKeys;\n    if (R && typeof R.ownKeys === \"function\") {\n      ReflectOwnKeys = R.ownKeys;\n    } else if (Object.getOwnPropertySymbols) {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n      };\n    } else {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target);\n      };\n    }\n    function ProcessEmitWarning(warning) {\n      if (console && console.warn)\n        console.warn(warning);\n    }\n    var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {\n      return value !== value;\n    };\n    function EventEmitter2() {\n      EventEmitter2.init.call(this);\n    }\n    module2.exports = EventEmitter2;\n    module2.exports.once = once;\n    EventEmitter2.EventEmitter = EventEmitter2;\n    EventEmitter2.prototype._events = void 0;\n    EventEmitter2.prototype._eventsCount = 0;\n    EventEmitter2.prototype._maxListeners = void 0;\n    var defaultMaxListeners = 10;\n    function checkListener(listener) {\n      if (typeof listener !== \"function\") {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n    }\n    Object.defineProperty(EventEmitter2, \"defaultMaxListeners\", {\n      enumerable: true,\n      get: function() {\n        return defaultMaxListeners;\n      },\n      set: function(arg) {\n        if (typeof arg !== \"number\" || arg < 0 || NumberIsNaN(arg)) {\n          throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + \".\");\n        }\n        defaultMaxListeners = arg;\n      }\n    });\n    EventEmitter2.init = function() {\n      if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n      }\n      this._maxListeners = this._maxListeners || void 0;\n    };\n    EventEmitter2.prototype.setMaxListeners = function setMaxListeners(n) {\n      if (typeof n !== \"number\" || n < 0 || NumberIsNaN(n)) {\n        throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + \".\");\n      }\n      this._maxListeners = n;\n      return this;\n    };\n    function _getMaxListeners(that) {\n      if (that._maxListeners === void 0)\n        return EventEmitter2.defaultMaxListeners;\n      return that._maxListeners;\n    }\n    EventEmitter2.prototype.getMaxListeners = function getMaxListeners() {\n      return _getMaxListeners(this);\n    };\n    EventEmitter2.prototype.emit = function emit(type) {\n      var args = [];\n      for (var i = 1; i < arguments.length; i++)\n        args.push(arguments[i]);\n      var doError = type === \"error\";\n      var events = this._events;\n      if (events !== void 0)\n        doError = doError && events.error === void 0;\n      else if (!doError)\n        return false;\n      if (doError) {\n        var er;\n        if (args.length > 0)\n          er = args[0];\n        if (er instanceof Error) {\n          throw er;\n        }\n        var err = new Error(\"Unhandled error.\" + (er ? \" (\" + er.message + \")\" : \"\"));\n        err.context = er;\n        throw err;\n      }\n      var handler = events[type];\n      if (handler === void 0)\n        return false;\n      if (typeof handler === \"function\") {\n        ReflectApply(handler, this, args);\n      } else {\n        var len = handler.length;\n        var listeners = arrayClone(handler, len);\n        for (var i = 0; i < len; ++i)\n          ReflectApply(listeners[i], this, args);\n      }\n      return true;\n    };\n    function _addListener(target, type, listener, prepend) {\n      var m;\n      var events;\n      var existing;\n      checkListener(listener);\n      events = target._events;\n      if (events === void 0) {\n        events = target._events = /* @__PURE__ */ Object.create(null);\n        target._eventsCount = 0;\n      } else {\n        if (events.newListener !== void 0) {\n          target.emit(\n            \"newListener\",\n            type,\n            listener.listener ? listener.listener : listener\n          );\n          events = target._events;\n        }\n        existing = events[type];\n      }\n      if (existing === void 0) {\n        existing = events[type] = listener;\n        ++target._eventsCount;\n      } else {\n        if (typeof existing === \"function\") {\n          existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n        } else if (prepend) {\n          existing.unshift(listener);\n        } else {\n          existing.push(listener);\n        }\n        m = _getMaxListeners(target);\n        if (m > 0 && existing.length > m && !existing.warned) {\n          existing.warned = true;\n          var w = new Error(\"Possible EventEmitter memory leak detected. \" + existing.length + \" \" + String(type) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n          w.name = \"MaxListenersExceededWarning\";\n          w.emitter = target;\n          w.type = type;\n          w.count = existing.length;\n          ProcessEmitWarning(w);\n        }\n      }\n      return target;\n    }\n    EventEmitter2.prototype.addListener = function addListener(type, listener) {\n      return _addListener(this, type, listener, false);\n    };\n    EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;\n    EventEmitter2.prototype.prependListener = function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n    function onceWrapper() {\n      if (!this.fired) {\n        this.target.removeListener(this.type, this.wrapFn);\n        this.fired = true;\n        if (arguments.length === 0)\n          return this.listener.call(this.target);\n        return this.listener.apply(this.target, arguments);\n      }\n    }\n    function _onceWrap(target, type, listener) {\n      var state = { fired: false, wrapFn: void 0, target, type, listener };\n      var wrapped = onceWrapper.bind(state);\n      wrapped.listener = listener;\n      state.wrapFn = wrapped;\n      return wrapped;\n    }\n    EventEmitter2.prototype.once = function once2(type, listener) {\n      checkListener(listener);\n      this.on(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.removeListener = function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n      checkListener(listener);\n      events = this._events;\n      if (events === void 0)\n        return this;\n      list = events[type];\n      if (list === void 0)\n        return this;\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = /* @__PURE__ */ Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit(\"removeListener\", type, list.listener || listener);\n        }\n      } else if (typeof list !== \"function\") {\n        position = -1;\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n        if (position < 0)\n          return this;\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n        if (list.length === 1)\n          events[type] = list[0];\n        if (events.removeListener !== void 0)\n          this.emit(\"removeListener\", type, originalListener || listener);\n      }\n      return this;\n    };\n    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(type) {\n      var listeners, events, i;\n      events = this._events;\n      if (events === void 0)\n        return this;\n      if (events.removeListener === void 0) {\n        if (arguments.length === 0) {\n          this._events = /* @__PURE__ */ Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== void 0) {\n          if (--this._eventsCount === 0)\n            this._events = /* @__PURE__ */ Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === \"removeListener\")\n            continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners(\"removeListener\");\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n      listeners = events[type];\n      if (typeof listeners === \"function\") {\n        this.removeListener(type, listeners);\n      } else if (listeners !== void 0) {\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n      return this;\n    };\n    function _listeners(target, type, unwrap) {\n      var events = target._events;\n      if (events === void 0)\n        return [];\n      var evlistener = events[type];\n      if (evlistener === void 0)\n        return [];\n      if (typeof evlistener === \"function\")\n        return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n      return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n    }\n    EventEmitter2.prototype.listeners = function listeners(type) {\n      return _listeners(this, type, true);\n    };\n    EventEmitter2.prototype.rawListeners = function rawListeners(type) {\n      return _listeners(this, type, false);\n    };\n    EventEmitter2.listenerCount = function(emitter, type) {\n      if (typeof emitter.listenerCount === \"function\") {\n        return emitter.listenerCount(type);\n      } else {\n        return listenerCount.call(emitter, type);\n      }\n    };\n    EventEmitter2.prototype.listenerCount = listenerCount;\n    function listenerCount(type) {\n      var events = this._events;\n      if (events !== void 0) {\n        var evlistener = events[type];\n        if (typeof evlistener === \"function\") {\n          return 1;\n        } else if (evlistener !== void 0) {\n          return evlistener.length;\n        }\n      }\n      return 0;\n    }\n    EventEmitter2.prototype.eventNames = function eventNames() {\n      return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n    };\n    function arrayClone(arr, n) {\n      var copy = new Array(n);\n      for (var i = 0; i < n; ++i)\n        copy[i] = arr[i];\n      return copy;\n    }\n    function spliceOne(list, index) {\n      for (; index + 1 < list.length; index++)\n        list[index] = list[index + 1];\n      list.pop();\n    }\n    function unwrapListeners(arr) {\n      var ret = new Array(arr.length);\n      for (var i = 0; i < ret.length; ++i) {\n        ret[i] = arr[i].listener || arr[i];\n      }\n      return ret;\n    }\n    function once(emitter, name) {\n      return new Promise(function(resolve, reject) {\n        function errorListener(err) {\n          emitter.removeListener(name, resolver);\n          reject(err);\n        }\n        function resolver() {\n          if (typeof emitter.removeListener === \"function\") {\n            emitter.removeListener(\"error\", errorListener);\n          }\n          resolve([].slice.call(arguments));\n        }\n        ;\n        eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n        if (name !== \"error\") {\n          addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n        }\n      });\n    }\n    function addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n      if (typeof emitter.on === \"function\") {\n        eventTargetAgnosticAddListener(emitter, \"error\", handler, flags);\n      }\n    }\n    function eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n      if (typeof emitter.on === \"function\") {\n        if (flags.once) {\n          emitter.once(name, listener);\n        } else {\n          emitter.on(name, listener);\n        }\n      } else if (typeof emitter.addEventListener === \"function\") {\n        emitter.addEventListener(name, function wrapListener(arg) {\n          if (flags.once) {\n            emitter.removeEventListener(name, wrapListener);\n          }\n          listener(arg);\n        });\n      } else {\n        throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n      }\n    }\n  }\n});\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  InMemoryProvider: () => InMemoryProvider,\n  NOOP_PROVIDER: () => NOOP_PROVIDER,\n  OpenFeature: () => OpenFeature,\n  OpenFeatureAPI: () => OpenFeatureAPI,\n  OpenFeatureClient: () => OpenFeatureClient,\n  OpenFeatureEventEmitter: () => OpenFeatureEventEmitter,\n  ProviderEvents: () => import_core2.ClientProviderEvents\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/client/open-feature-client.ts\nvar import_core7 = require(\"@openfeature/core\");\n\n// src/open-feature.ts\nvar import_core6 = require(\"@openfeature/core\");\n\n// src/events/open-feature-event-emitter.ts\nvar import_core = require(\"@openfeature/core\");\nvar import_events = __toESM(require_events());\nvar OpenFeatureEventEmitter = class extends import_core.GenericEventEmitter {\n  constructor() {\n    super();\n    this.eventEmitter = new import_events.default({ captureRejections: true });\n    this.eventEmitter.on(\"error\", (err) => {\n      var _a;\n      (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n    });\n  }\n};\n\n// src/events/events.ts\nvar import_core2 = require(\"@openfeature/core\");\n\n// src/provider/no-op-provider.ts\nvar import_core3 = require(\"@openfeature/core\");\nvar REASON_NO_OP = \"No-op\";\nvar NoopFeatureProvider = class {\n  constructor() {\n    this.metadata = {\n      name: \"No-op Provider\"\n    };\n  }\n  get status() {\n    return import_core3.ProviderStatus.NOT_READY;\n  }\n  resolveBooleanEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveStringEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveNumberEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveObjectEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  noOp(defaultValue) {\n    return {\n      value: defaultValue,\n      reason: REASON_NO_OP\n    };\n  }\n};\nvar NOOP_PROVIDER = new NoopFeatureProvider();\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar import_core5 = require(\"@openfeature/core\");\n\n// src/provider/in-memory-provider/variant-not-found-error.ts\nvar import_core4 = require(\"@openfeature/core\");\nvar VariantNotFoundError = class extends import_core4.OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, VariantNotFoundError.prototype);\n    this.name = \"VariantNotFoundError\";\n    this.code = import_core4.ErrorCode.GENERAL;\n  }\n};\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar InMemoryProvider = class {\n  constructor(flagConfiguration = {}) {\n    this.events = new OpenFeatureEventEmitter();\n    this.runsOn = \"client\";\n    this.status = import_core5.ProviderStatus.NOT_READY;\n    this.metadata = {\n      name: \"in-memory\"\n    };\n    this._flagConfiguration = __spreadValues({}, flagConfiguration);\n  }\n  initialize(context) {\n    return __async(this, null, function* () {\n      try {\n        for (const key in this._flagConfiguration) {\n          this.resolveFlagWithReason(key, context);\n        }\n        this._context = context;\n        this.status = import_core5.ProviderStatus.READY;\n      } catch (error) {\n        this.status = import_core5.ProviderStatus.ERROR;\n        throw error;\n      }\n    });\n  }\n  /**\n   * Overwrites the configured flags.\n   * @param { FlagConfiguration } flagConfiguration new flag configuration\n   */\n  putConfiguration(flagConfiguration) {\n    return __async(this, null, function* () {\n      const flagsChanged = Object.entries(flagConfiguration).filter(([key, value]) => this._flagConfiguration[key] !== value).map(([key]) => key);\n      this.status = import_core5.ProviderStatus.STALE;\n      this.events.emit(import_core2.ClientProviderEvents.Stale);\n      this._flagConfiguration = __spreadValues({}, flagConfiguration);\n      this.events.emit(import_core2.ClientProviderEvents.ConfigurationChanged, { flagsChanged });\n      try {\n        yield this.initialize(this._context);\n        this.events.emit(import_core2.ClientProviderEvents.Ready);\n      } catch (err) {\n        this.events.emit(import_core2.ClientProviderEvents.Error);\n        throw err;\n      }\n    });\n  }\n  resolveBooleanEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveNumberEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveStringEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveObjectEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveAndCheckFlag(flagKey, defaultValue, context, logger) {\n    if (!(flagKey in this._flagConfiguration)) {\n      const message = `no flag found with key ${flagKey}`;\n      logger == null ? void 0 : logger.debug(message);\n      throw new import_core5.FlagNotFoundError(message);\n    }\n    if (this._flagConfiguration[flagKey].disabled) {\n      return { value: defaultValue, reason: import_core5.StandardResolutionReasons.DISABLED };\n    }\n    const resolvedFlag = this.resolveFlagWithReason(flagKey, context);\n    if (resolvedFlag.value === void 0) {\n      const message = `no value associated with variant provided for ${flagKey} found`;\n      logger == null ? void 0 : logger.error(message);\n      throw new VariantNotFoundError(message);\n    }\n    if (typeof resolvedFlag.value != typeof defaultValue) {\n      throw new import_core5.TypeMismatchError();\n    }\n    return resolvedFlag;\n  }\n  resolveFlagWithReason(flagKey, ctx) {\n    try {\n      const resolutionResult = this.lookupFlagValue(flagKey, ctx);\n      return resolutionResult;\n    } catch (error) {\n      if (!(error instanceof import_core5.OpenFeatureError)) {\n        throw new import_core5.GeneralError((error == null ? void 0 : error.message) || \"unknown error\");\n      }\n      throw error;\n    }\n  }\n  lookupFlagValue(flagKey, ctx) {\n    var _a;\n    const flagSpec = this._flagConfiguration[flagKey];\n    const isContextEval = ctx && (flagSpec == null ? void 0 : flagSpec.contextEvaluator);\n    const variant = isContextEval ? (_a = flagSpec.contextEvaluator) == null ? void 0 : _a.call(flagSpec, ctx) : flagSpec.defaultVariant;\n    const value = variant && (flagSpec == null ? void 0 : flagSpec.variants[variant]);\n    const evalReason = isContextEval ? import_core5.StandardResolutionReasons.TARGETING_MATCH : import_core5.StandardResolutionReasons.STATIC;\n    const reason = this.status === import_core5.ProviderStatus.STALE ? import_core5.StandardResolutionReasons.CACHED : evalReason;\n    return __spreadProps(__spreadValues({\n      value\n    }, variant && { variant }), {\n      reason\n    });\n  }\n};\n\n// src/open-feature.ts\nvar GLOBAL_OPENFEATURE_API_KEY = Symbol.for(\"@openfeature/web-sdk/api\");\nvar _globalThis = globalThis;\nvar OpenFeatureAPI = class extends import_core6.OpenFeatureCommonAPI {\n  constructor() {\n    super(\"client\");\n    this._events = new OpenFeatureEventEmitter();\n    this._defaultProvider = NOOP_PROVIDER;\n    this._createEventEmitter = () => new OpenFeatureEventEmitter();\n    this._namedProviderContext = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Gets a singleton instance of the OpenFeature API.\n   * @ignore\n   * @returns {OpenFeatureAPI} OpenFeature API\n   */\n  static getInstance() {\n    const globalApi = _globalThis[GLOBAL_OPENFEATURE_API_KEY];\n    if (globalApi) {\n      return globalApi;\n    }\n    const instance = new OpenFeatureAPI();\n    _globalThis[GLOBAL_OPENFEATURE_API_KEY] = instance;\n    return instance;\n  }\n  setContext(nameOrContext, contextOrUndefined) {\n    return __async(this, null, function* () {\n      var _a, _b;\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrContext);\n      const context = (_b = (_a = (0, import_core6.objectOrUndefined)(nameOrContext)) != null ? _a : (0, import_core6.objectOrUndefined)(contextOrUndefined)) != null ? _b : {};\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.set(clientName, context);\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, context);\n        } else {\n          this._namedProviderContext.set(clientName, context);\n        }\n      } else {\n        const oldContext = this._context;\n        this._context = context;\n        const defaultContextNameProviders = Array.from(this._clientProviders.entries()).filter(([name]) => !this._namedProviderContext.has(name)).reduce((acc, [name, provider]) => {\n          acc.push({ name, provider });\n          return acc;\n        }, []);\n        const allProviders = [\n          // add in the default (no name)\n          { name: void 0, provider: this._defaultProvider },\n          ...defaultContextNameProviders\n        ];\n        yield Promise.all(\n          allProviders.map(\n            (tuple) => this.runProviderContextChangeHandler(tuple.name, tuple.provider, oldContext, context)\n          )\n        );\n      }\n    });\n  }\n  getContext(nameOrUndefined) {\n    const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n    if (clientName) {\n      const context = this._namedProviderContext.get(clientName);\n      if (context) {\n        return context;\n      } else {\n        this._logger.debug(`Unable to find context for '${clientName}'.`);\n      }\n    }\n    return this._context;\n  }\n  clearContext(nameOrUndefined) {\n    return __async(this, null, function* () {\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.delete(clientName);\n          const newContext = this.getContext();\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, newContext);\n        } else {\n          this._namedProviderContext.delete(clientName);\n        }\n      } else {\n        return this.setContext({});\n      }\n    });\n  }\n  /**\n   * Resets the global evaluation context and removes the evaluation context for\n   * all named clients.\n   */\n  clearContexts() {\n    return __async(this, null, function* () {\n      yield this.clearContext();\n      yield Promise.allSettled(Array.from(this._clientProviders.keys()).map((name) => this.clearContext(name)));\n    });\n  }\n  /**\n   * A factory function for creating new named OpenFeature clients. Clients can contain\n   * their own state (e.g. logger, hook, context). Multiple clients can be used\n   * to segment feature flag configuration.\n   *\n   * If there is already a provider bound to this name via {@link this.setProvider setProvider}, this provider will be used.\n   * Otherwise, the default provider is used until a provider is assigned to that name.\n   * @param {string} name The name of the client\n   * @param {string} version The version of the client (only used for metadata)\n   * @returns {Client} OpenFeature Client\n   */\n  getClient(name, version) {\n    return new OpenFeatureClient(\n      // functions are passed here to make sure that these values are always up to date,\n      // and so we don't have to make these public properties on the API class.\n      () => this.getProviderForClient(name),\n      () => this.buildAndCacheEventEmitterForClient(name),\n      () => this._logger,\n      { name, version }\n    );\n  }\n  /**\n   * Clears all registered providers and resets the default provider.\n   * @returns {Promise<void>}\n   */\n  clearProviders() {\n    return __async(this, null, function* () {\n      yield __superGet(OpenFeatureAPI.prototype, this, \"clearProvidersAndSetDefault\").call(this, NOOP_PROVIDER);\n      this._namedProviderContext.clear();\n    });\n  }\n  runProviderContextChangeHandler(clientName, provider, oldContext, newContext) {\n    return __async(this, null, function* () {\n      var _a, _b, _c, _d, _e;\n      const providerName = provider.metadata.name;\n      try {\n        yield (_a = provider.onContextChange) == null ? void 0 : _a.call(provider, oldContext, newContext);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n        });\n        (_b = this._events) == null ? void 0 : _b.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n      } catch (err) {\n        const error = err;\n        const message = `Error running ${(_c = provider == null ? void 0 : provider.metadata) == null ? void 0 : _c.name}'s context change handler: ${error == null ? void 0 : error.message}`;\n        (_d = this._logger) == null ? void 0 : _d.error(`${message}`, err);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n        });\n        (_e = this._events) == null ? void 0 : _e.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n      }\n    });\n  }\n};\nvar OpenFeature = OpenFeatureAPI.getInstance();\n\n// src/client/open-feature-client.ts\nvar OpenFeatureClient = class {\n  constructor(providerAccessor, emitterAccessor, globalLogger, options) {\n    this.providerAccessor = providerAccessor;\n    this.emitterAccessor = emitterAccessor;\n    this.globalLogger = globalLogger;\n    this.options = options;\n    this._hooks = [];\n  }\n  get metadata() {\n    return {\n      name: this.options.name,\n      version: this.options.version,\n      providerMetadata: this.providerAccessor().metadata\n    };\n  }\n  get providerStatus() {\n    var _a;\n    return ((_a = this.providerAccessor()) == null ? void 0 : _a.status) || import_core7.ProviderStatus.READY;\n  }\n  addHandler(eventType, handler) {\n    var _a;\n    this.emitterAccessor().addHandler(eventType, handler);\n    const shouldRunNow = (0, import_core7.statusMatchesEvent)(eventType, this._provider.status);\n    if (shouldRunNow) {\n      try {\n        handler({ clientName: this.metadata.name, providerName: this._provider.metadata.name });\n      } catch (err) {\n        (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n      }\n    }\n  }\n  removeHandler(notificationType, handler) {\n    this.emitterAccessor().removeHandler(notificationType, handler);\n  }\n  getHandlers(eventType) {\n    return this.emitterAccessor().getHandlers(eventType);\n  }\n  setLogger(logger) {\n    this._clientLogger = new import_core7.SafeLogger(logger);\n    return this;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  getBooleanValue(flagKey, defaultValue, options) {\n    return this.getBooleanDetails(flagKey, defaultValue, options).value;\n  }\n  getBooleanDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveBooleanEvaluation, defaultValue, \"boolean\", options);\n  }\n  getStringValue(flagKey, defaultValue, options) {\n    return this.getStringDetails(flagKey, defaultValue, options).value;\n  }\n  getStringDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted string generic argument.\n      this._provider.resolveStringEvaluation,\n      defaultValue,\n      \"string\",\n      options\n    );\n  }\n  getNumberValue(flagKey, defaultValue, options) {\n    return this.getNumberDetails(flagKey, defaultValue, options).value;\n  }\n  getNumberDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted number generic argument.\n      this._provider.resolveNumberEvaluation,\n      defaultValue,\n      \"number\",\n      options\n    );\n  }\n  getObjectValue(flagKey, defaultValue, options) {\n    return this.getObjectDetails(flagKey, defaultValue, options).value;\n  }\n  getObjectDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveObjectEvaluation, defaultValue, \"object\", options);\n  }\n  evaluate(flagKey, resolver, defaultValue, flagType, options = {}) {\n    var _a, _b;\n    const allHooks = [\n      ...OpenFeature.getHooks(),\n      ...this.getHooks(),\n      ...options.hooks || [],\n      ...this._provider.hooks || []\n    ];\n    const allHooksReversed = [...allHooks].reverse();\n    const context = __spreadValues({}, OpenFeature.getContext((_a = this == null ? void 0 : this.options) == null ? void 0 : _a.name));\n    const hookContext = {\n      flagKey,\n      defaultValue,\n      flagValueType: flagType,\n      clientMetadata: this.metadata,\n      providerMetadata: OpenFeature.providerMetadata,\n      context,\n      logger: this._logger\n    };\n    try {\n      this.beforeHooks(allHooks, hookContext, options);\n      const resolution = resolver.call(this._provider, flagKey, defaultValue, context, this._logger);\n      const evaluationDetails = __spreadProps(__spreadValues({}, resolution), {\n        flagMetadata: Object.freeze((_b = resolution.flagMetadata) != null ? _b : {}),\n        flagKey\n      });\n      this.afterHooks(allHooksReversed, hookContext, evaluationDetails, options);\n      return evaluationDetails;\n    } catch (err) {\n      const errorMessage = err == null ? void 0 : err.message;\n      const errorCode = (err == null ? void 0 : err.code) || import_core7.ErrorCode.GENERAL;\n      this.errorHooks(allHooksReversed, hookContext, err, options);\n      return {\n        errorCode,\n        errorMessage,\n        value: defaultValue,\n        reason: import_core7.StandardResolutionReasons.ERROR,\n        flagMetadata: Object.freeze({}),\n        flagKey\n      };\n    } finally {\n      this.finallyHooks(allHooksReversed, hookContext, options);\n    }\n  }\n  beforeHooks(hooks, hookContext, options) {\n    var _a;\n    Object.freeze(hookContext);\n    Object.freeze(hookContext.context);\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.before) == null ? void 0 : _a.call(hook, hookContext, Object.freeze(options.hookHints));\n    }\n  }\n  afterHooks(hooks, hookContext, evaluationDetails, options) {\n    var _a;\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.after) == null ? void 0 : _a.call(hook, hookContext, evaluationDetails, options.hookHints);\n    }\n  }\n  errorHooks(hooks, hookContext, err, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.error) == null ? void 0 : _a.call(hook, hookContext, err, options.hookHints);\n      } catch (err2) {\n        this._logger.error(`Unhandled error during 'error' hook: ${err2}`);\n        if (err2 instanceof Error) {\n          this._logger.error(err2.stack);\n        }\n        this._logger.error(err2 == null ? void 0 : err2.stack);\n      }\n    }\n  }\n  finallyHooks(hooks, hookContext, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.finally) == null ? void 0 : _a.call(hook, hookContext, options.hookHints);\n      } catch (err) {\n        this._logger.error(`Unhandled error during 'finally' hook: ${err}`);\n        if (err instanceof Error) {\n          this._logger.error(err.stack);\n        }\n        this._logger.error(err == null ? void 0 : err.stack);\n      }\n    }\n  }\n  get _provider() {\n    return this.providerAccessor();\n  }\n  get _logger() {\n    return this._clientLogger || this.globalLogger();\n  }\n};\n\n// src/index.ts\n__reExport(src_exports, require(\"@openfeature/core\"), module.exports);\n//# sourceMappingURL=index.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3607);\n"],"names":["root","factory","exports","module","define","amd","a","i","this","__assign","Object","assign","t","s","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__importDefault","mod","__esModule","defineProperty","FbProvider","web_sdk_1","js_client_sdk_1","translateContext_1","translateResult_1","wrongTypeResult","reason","StandardResolutionReasons","ERROR","errorCode","ErrorCode","TYPE_MISMATCH","options","_a","_this","runsOn","metadata","name","_status","ProviderStatus","NOT_READY","events","OpenFeatureEventEmitter","logger","BasicLogger","level","destination","console","log","fbClient","FbClientBuilder","build","on","flagKeys","emit","ProviderEvents","ConfigurationChanged","flagsChanged","err","clientConstructionError","error","concat","initialize","error_1","Error","waitForInitialization","READY","resolveBooleanEvaluation","flagKey","defaultValue","variation","boolVariation","debug","GENERAL","default","resolveStringEvaluation","stringVariation","resolveNumberEvaluation","numberVariation","resolveObjectEvaluation","jsonVariation","undefined","onContextChange","_oldContext","newContext","_user","translateContext","identify","getClient","get","enumerable","configurable","onClose","close","FbProvider_1","builtInKeys","evaluationContext","custom","key","targetingKey","keyId","user","customizedProperties","Array","isArray","forEach","entries","includes","__defProp","__defProps","defineProperties","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropNames","getOwnPropertyNames","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","writable","__spreadValues","b","prop","__spreadProps","__async","__this","__arguments","throw","x","src_exports","target","all","__export","AllProviderEvents","ClientProviderEvents","DefaultLogger","FlagNotFoundError","GeneralError","GenericEventEmitter","InvalidContextError","LOG_LEVELS","OpenFeatureCommonAPI","OpenFeatureError","ParseError","ProviderNotReadyError","SafeLogger","ServerProviderEvents","TargetingKeyMissingError","TypeMismatchError","isObject","isString","objectOrUndefined","statusMatchesEvent","stringOrUndefined","to","from","except","desc","__copyProps","constructor","message","super","setPrototypeOf","TARGETING_MATCH","SPLIT","DISABLED","DEFAULT","UNKNOWN","STATIC","CACHED","ErrorCode2","code","ProviderStatus2","ServerProviderEvents2","ClientProviderEvents2","eventStatusMap","event","status","args","warn","info","fallbackLogger","globalLogger","_handlers","WeakMap","eventType","context","eventEmitter","addHandler","handler","asyncHandler","details","set","removeHandler","removeListener","removeAllHandlers","removeAllListeners","getHandlers","listeners","setLogger","_eventLogger","_logger","_b","isDefined","input","category","_hooks","_context","_clientEventHandlers","Map","_clientProviders","_clientEvents","_runsOn","addHooks","hooks","getHooks","clearHooks","providerMetadata","getProviderMetadata","clientName","getProviderForClient","_defaultProvider","keyProviderTuple","provider","providerName","_events","clearHandlers","setProviderAndWait","clientOrProvider","providerOrUndefined","setAwaitableProvider","setProvider","maybePromise","catch","_c","_d","_e","_f","oldProvider","emitters","getAssociatedEventEmitters","initializationPromise","_a2","emitter","transferListeners","values","buildAndCacheEventEmitterForClient","newEmitter","_createEventEmitter","clientProvider","getUnboundEmitters","namedProviders","keys","filter","map","newProvider","eventHandler","newClientHandlers","handleShutdownError","providers","_0","clearProvidersAndSetDefault","defaultProvider","clear","stack","cb","__create","create","__getProtoOf","getPrototypeOf","__reflectGet","Reflect","require_events","module2","ReflectOwnKeys","R","ReflectApply","receiver","Function","ownKeys","NumberIsNaN","Number","isNaN","EventEmitter2","init","once","errorListener","resolver","slice","eventTargetAgnosticAddListener","flags","addErrorHandlerIfEventEmitter","EventEmitter","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","type","prepend","m","existing","warning","newListener","unshift","warned","w","String","count","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","arg","removeEventListener","RangeError","setMaxListeners","getMaxListeners","doError","er","len","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","spliceOne","off","rawListeners","eventNames","InMemoryProvider","NOOP_PROVIDER","OpenFeature","OpenFeatureAPI","OpenFeatureClient","import_core2","__toCommonJS","import_core7","import_core6","import_core","import_events","isNodeMode","__toESM","captureRejections","import_core3","noOp","import_core5","import_core4","VariantNotFoundError","flagConfiguration","_flagConfiguration","resolveFlagWithReason","putConfiguration","STALE","Stale","Ready","resolveAndCheckFlag","disabled","resolvedFlag","ctx","lookupFlagValue","flagSpec","isContextEval","contextEvaluator","variant","defaultVariant","variants","evalReason","GLOBAL_OPENFEATURE_API_KEY","for","_globalThis","globalThis","_namedProviderContext","getInstance","globalApi","instance","setContext","nameOrContext","contextOrUndefined","oldContext","getContext","runProviderContextChangeHandler","defaultContextNameProviders","has","reduce","acc","allProviders","tuple","nameOrUndefined","clearContext","delete","clearContexts","allSettled","version","clearProviders","cls","ContextChanged","providerAccessor","emitterAccessor","providerStatus","_provider","notificationType","_clientLogger","getBooleanValue","getBooleanDetails","evaluate","getStringValue","getStringDetails","getNumberValue","getNumberDetails","getObjectValue","getObjectDetails","flagType","allHooks","allHooksReversed","reverse","hookContext","flagValueType","clientMetadata","beforeHooks","resolution","evaluationDetails","flagMetadata","freeze","afterHooks","errorMessage","errorHooks","finallyHooks","hook","before","hookHints","after","err2","finally","secondTarget","__reExport","option","sdkKey","streamingUri","eventsUri","eventDetails","client","defaultValues","Validators_1","OptionMessages_1","InMemoryStore_1","isNullOrUndefined_1","canonicalizeUri_1","NullBootstrapProvider_1","constants_1","DataSyncMode_1","bootstrap_1","validations","startWaitTime","TypeValidators","pollingUri","webSocketPingInterval","store","ObjectOrFactory","dataSynchronizer","flushInterval","maxEventsInQueue","pollingInterval","offline","Boolean","dataSyncMode","bootstrap","Bootstrap","User","DataSyncModeEnum","STREAMING","sendEvents","bootstrapProvider","NullBootstrapProvider","errors","validatedOptions","optionName","optionValue","validator","is","getType","wrongOptionTypeBoolean","NumberWithMinimum","min","optionBelowMinimum","UserValidator","messages","wrongOptionType","unknownOption","validateTypesAndNames","streamingUriMissing","isNullOrUndefined","EmptyString","pollingUriMissing","eventsUriMissing","partialEndpoint","POLLING","validateEndpoints","canonicalizeUri","JsonBootstrapProvider","dataSynchronizerFactory","storeFactory","Context","valid","fromUser","contextForError","trim","property","find","FbClient_1","_options","_platform","platform","mode","FbClientCore","Configuration_1","ClientContext_1","DataSourceUpdates_1","createStreamListeners_1","WebSocketDataSynchronizer_1","PollingDataSynchronizer_1","Requestor_1","DataKinds_1","Evaluator_1","ReasonKinds_1","errors_1","Context_1","ValueConverters_1","NullDataSynchronizer_1","NullEventProcessor_1","DefaultEventProcessor_1","event_1","ClientState","callbacks","Initializing","onError","onFailed","onReady","onUpdate","hasEventListeners","config","clientContext","dataSourceUpdates","evaluator","populate","eventProcessor","NullEventProcessor","NullDataSynchronizer","initSuccess","DefaultEventProcessor","createStreamListeners","put","patch","webSocket","requests","dataSourceErrorHandler","start","Flags","setTimeout","initialized","msg","Failed","rejectionReason","initReject","Initialized","initializedPromise","initResolve","evaluateCore","ValueConverters","bool","boolVariationDetail","json","jsonVariationDetail","number","numberVariationDetail","string","stringVariationDetail","variationDetail","getAllVariations","ClientError","evalResult","kind","track","eventName","metricValue","metricEvent","MetricEvent","appType","record","flush","callback","typeConverter","ReasonKinds","FlagNotFound","toEvalEvent","isSucceeded","WrongType","serialization_1","flag","variationOptions","id","data","deserializeAll","dataSet","userKeyId","__createBinding","o","k","k2","__exportStar","MinInt","onChange","allData","checkForChanges","doInit","oldData","updatedKeys","flatMap","namespace","oldDataForKind","newDataForKind","mergedData","isUpdated","upsert","doUpsert","oldItem","newData","createPatchListener","createPutListener","onPutCompleteHandler","deserializeData","processJson","initData","onPatchCompleteHandler","deserializePatch","item","onCompleteHandlers","stop","types_1","http_1","requestor","getStoreTimestamp","errorHandler","stopped","poll","startTime","Date","now","requestData","_g","elapsed","sleepFor","Math","max","isHttpRecoverable","httpErrorMessage","PollingError","featureFlags","processStreamResponse","JSON","parse","messageType","StreamResponseEventType","full","timeoutHandle","clearTimeout","headers","defaultHeaders","uri","request","requestUrl","res","fetch","text","timestamp","payload","method","stringify","StreamingError","socket","pingInterval","logConnectionStarted","connect","connectionAttemptStartTime","generateConnectionToken","alphabet","encodeNumber","param","split","join","replace","timestampCode","toString","floor","random","UnexpectedResponseError","EvalResult","flagNotFound","matched","val","Match","targetedVariation","variations","EvalEvent","sendToExperiment","EvalResult_1","VariationDataType","EventDispatcher_1","DefaultEventQueue_1","closed","eventQueue","DefaultEventQueue","eventDispatcher","EventDispatcher","flushLoop","flushEvent","FlushEvent","waitForCompletion","shutdown","ShutdownEvent","addEvent","complete","capacity","eventsSnapshot","isEmpty","DefaultEventSender","IEventSender_1","sleep_1","send","retry","DeliveryStatus","Succeeded","FailedAndMustShutDown","DefaultEventSerializer","serialize","toPayload","DefaultEventSender_1","DefaultEventSerializer_1","queue","maxEventPerRequest","buffer","sender","serializer","dispatchLoop","running","PayloadEvent","addEventToBuffer","triggerFlush","snapshot","flushEvents","total","getUniqueEvents","uniqueEvents","hashes","hash","AsyncEvent","getTime","isCompletedPromise","resolveFn","userPayload","metrics","route","numericValue","hasObject","featureFlagKey","format_1","LogPriority","none","LevelNames","logLevel","formatter","tryFormat","tryWrite","prefix","loggerRequirements","fallback","tryStringify","indexOf","escapes","d","toNumber","parseInt","toInt","parseFloat","toFloat","j","O","c","formatString","out","char","charAt","nextChar","configuration","expectedType","actualType","mandatory","invalidOptionValue","missingKeyInBootstrapValue","UserBuilder","_keyId","_name","_custom","propertyName","KindValidator","DateValidator","BootstrapValidator","NullableBoolean","StringMatchingRegex","TypeArray","Type","FactoryOrInstance","factoryOrInstance","typeOfFactory","typeName","example","typeOf","u","every","expression","match","DATE_REGEX","test","createTypeArray","numberWithMin","stringMatchingRegex","StringArray","Kind","version_1","platformData","os","additional","sdkData","userAgentBase","BrowserInfo_1","BrowserRequests_1","BrowserWebSocket_1","BrowserRequests","url","Emits_1","EventEmitter_1","utils_1","socketConnectionIntervals","Emits","retryCounter","_config","doDataSync","ws","WebSocket","sendPingMessage","reconnect","readyState","OPEN","waitTime","FbClientCore_1","BasicLogger_1","SafeLogger_1","BrowserPlatform_1","LocalStorageStore_1","FbClient","some","startsWith","store_1","BaseStore_1","serializeUser_1","LocalStorageStore","BaseStore","description","saveUser","localStorage","setItem","CurrentUserStorageKey","serializeUser","dumpStoreToStorage","storageKey","StoreStorageKey","loadStoreFromStorage","dataStoreStr","getItem","BrowserWebSocket","initCalled","addItem","items","old","ele","DataKinds","InMemoryStore","allStores","cur","Base","maybeReportError","listeningTo","onceHandler","copiedHandlers","toUpperCase","success","num","debounce","fn","delayMs","timer","retryMessage","sort","nameA","toLowerCase","nameB","delayMillis","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}