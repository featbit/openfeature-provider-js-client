{"version":3,"file":"index.js","mappings":"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","sources":["webpack://featbit-provider-example/webpack/universalModuleDefinition","webpack://featbit-provider-example/../../dist/FbProvider.js","webpack://featbit-provider-example/../../dist/index.js","webpack://featbit-provider-example/../../dist/translateContext.js","webpack://featbit-provider-example/../../dist/translateResult.js","webpack://featbit-provider-example/./node_modules/@openfeature/core/dist/cjs/index.js","webpack://featbit-provider-example/./node_modules/@openfeature/web-sdk/dist/cjs/index.js","webpack://featbit-provider-example/./src/index.ts","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/Configuration.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/Context.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/FbClientBuilder.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/FbClientCore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IContextProperty.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IDataKind.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IFbClient.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/IVersionedData.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/IBootstrapProvider.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/JsonBootstrapProvider.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/NullBootstrapProvider.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/bootstrap/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/constants.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sources/DataSourceUpdates.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sources/createStreamListeners.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sources/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/DataSyncMode.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/IDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/IRequestor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/NullDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/PollingDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/Requestor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/WebSocketDataSynchronizer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/types.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/data-sync/utils.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/errors.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/EvalResult.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/Evaluator.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/IEvalDetail.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/ReasonKinds.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/data/IFlag.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/data/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/evaluation/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventProcessor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventQueue.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventSender.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/DefaultEventSerializer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/EventDispatcher.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/EventSerializer.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/IEventProcessor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/IEventQueue.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/IEventSender.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/NullEventProcessor.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/event.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/events/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/BasicLogger.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/IBasicLoggerOptions.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/ILogger.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/LogLevel.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/SafeLogger.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/format.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/logging/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/ClientContext.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IClientContext.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IOptions.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IUser.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/IValidatedOptions.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/OptionMessages.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/UserBuilder.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/Validators.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/options/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IInfo.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IPlatform.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/IWebSocket.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserInfo.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserPlatform.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserRequests.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/BrowserWebSocket.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/FbClient.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/browser/LocalStorageStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/platform/requests.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/BaseStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/DataKinds.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/IDataSourceUpdates.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/InMemoryStore.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/serialization.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/store/store.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/Emits.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/EventEmitter.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/ValueConverters.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/VoidFunction.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/canonicalizeUri.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/debounce.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/http.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/index.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/isNullOrUndefined.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/serializeUser.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/utils/sleep.js","webpack://featbit-provider-example/../../node_modules/@featbit/js-client-sdk/dist/esm/version.js","webpack://featbit-provider-example/../../node_modules/@openfeature/core/dist/cjs/index.js","webpack://featbit-provider-example/../../node_modules/@openfeature/web-sdk/dist/cjs/index.js","webpack://featbit-provider-example/webpack/bootstrap","webpack://featbit-provider-example/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, () => {\nreturn ","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbProvider = void 0;\nvar web_sdk_1 = require(\"@openfeature/web-sdk\");\nvar js_client_sdk_1 = require(\"@featbit/js-client-sdk\");\nvar translateContext_1 = require(\"./translateContext\");\nvar translateResult_1 = __importDefault(require(\"./translateResult\"));\n/**\n * Create a ResolutionDetails for an evaluation that produced a type different\n * from the expected type.\n * @param value The default value to populate the ResolutionDetails with.\n * @returns A ResolutionDetails with the default value.\n */\nfunction wrongTypeResult(value) {\n    return {\n        value: value,\n        reason: web_sdk_1.StandardResolutionReasons.ERROR,\n        errorCode: web_sdk_1.ErrorCode.TYPE_MISMATCH,\n    };\n}\n// implement the provider interface\nvar FbProvider = /** @class */ (function () {\n    function FbProvider(options) {\n        var _this = this;\n        var _a, _b;\n        // Adds runtime validation that the provider is used with the expected SDK\n        this.runsOn = \"client\";\n        this.metadata = {\n            name: \"featbit-js-client-provider\",\n        };\n        this._status = web_sdk_1.ProviderStatus.NOT_READY;\n        this.events = new web_sdk_1.OpenFeatureEventEmitter();\n        try {\n            this.fbClient = new js_client_sdk_1.FbClientBuilder(__assign({}, options)).build();\n            this.fbClient.on('update', function (flagKeys) {\n                return _this.events.emit(web_sdk_1.ProviderEvents.ConfigurationChanged, {\n                    flagsChanged: flagKeys,\n                });\n            });\n        }\n        catch (err) {\n            this.clientConstructionError = err;\n            this.logger = ((_a = this.fbClient) === null || _a === void 0 ? void 0 : _a.logger) || ((_b = options.logger) !== null && _b !== void 0 ? _b : new js_client_sdk_1.BasicLogger({\n                level: options.logLevel || 'none',\n                destination: console.log\n            }));\n            this.logger.error(\"Encountered unrecoverable initialization error, \".concat(err));\n            this._status = web_sdk_1.ProviderStatus.ERROR;\n        }\n    }\n    FbProvider.prototype.initialize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.fbClient) {\n                            // The client could not be constructed.\n                            if (this.clientConstructionError) {\n                                throw this.clientConstructionError;\n                            }\n                            throw new Error(\"Unknown problem encountered during initialization\");\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.fbClient.waitForInitialization()];\n                    case 2:\n                        _a.sent();\n                        this._status = web_sdk_1.ProviderStatus.READY;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _a.sent();\n                        this._status = web_sdk_1.ProviderStatus.ERROR;\n                        throw error_1;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Determines the boolean variation of a feature flag for a context, along with information about\n     * how it was calculated.\n     *\n     * If the flag does not evaluate to a boolean value, then the defaultValue will be returned.\n     *\n     * @param flagKey The unique key of the feature flag.\n     * @param defaultValue The default value of the flag, to be used if the value is not available\n     *   from FeatBit.\n     * @returns A promise which will resolve to a ResolutionDetails.\n     */\n    FbProvider.prototype.resolveBooleanEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.boolVariation(flagKey, defaultValue);\n        if (typeof variation !== \"boolean\") {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n        return (0, translateResult_1.default)(variation);\n    };\n    FbProvider.prototype.resolveStringEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.stringVariation(flagKey, defaultValue);\n        if (typeof variation !== \"string\") {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n        return (0, translateResult_1.default)(variation);\n    };\n    FbProvider.prototype.resolveNumberEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.numberVariation(flagKey, defaultValue);\n        if (typeof variation !== \"number\") {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n        return (0, translateResult_1.default)(variation);\n    };\n    FbProvider.prototype.resolveObjectEvaluation = function (flagKey, defaultValue) {\n        var variation = this.fbClient.jsonVariation(flagKey, defaultValue);\n        if (variation !== undefined) {\n            return (0, translateResult_1.default)(variation);\n        }\n        else {\n            this.logger.debug(web_sdk_1.ErrorCode.GENERAL);\n            return wrongTypeResult(defaultValue);\n        }\n    };\n    FbProvider.prototype.onContextChange = function (_oldContext, newContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _user;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _user = (0, translateContext_1.translateContext)(newContext, this.logger);\n                        if (!_user) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.fbClient.identify(_user)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2: return [2 /*return*/, Promise.reject(new Error(\"Something went wrong\"))];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    FbProvider.prototype.getClient = function () {\n        return this.fbClient;\n    };\n    Object.defineProperty(FbProvider.prototype, \"status\", {\n        get: function () {\n            return this._status;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FbProvider.prototype.onClose = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: \n                    // code to shut down your\n                    return [4 /*yield*/, this.fbClient.close()];\n                    case 1:\n                        // code to shut down your\n                        _a.sent();\n                        this._status = web_sdk_1.ProviderStatus.NOT_READY;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return FbProvider;\n}());\nexports.FbProvider = FbProvider;\n//# sourceMappingURL=FbProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbProvider = void 0;\nvar FbProvider_1 = require(\"./FbProvider\");\nObject.defineProperty(exports, \"FbProvider\", { enumerable: true, get: function () { return FbProvider_1.FbProvider; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.translateContext = void 0;\nvar builtInKeys = [\"key\", \"name\", \"custom\", \"targetingKey\"];\nfunction translateContext(evaluationContext, logger) {\n    var custom = (evaluationContext.custom || []);\n    var name = evaluationContext.name || \"\";\n    var key = evaluationContext.targetingKey || evaluationContext.key || evaluationContext.keyId || '';\n    if (key === \"\") {\n        logger.error(\"The EvaluationContext must contain either a 'targetingKey' or a 'key' or a 'keyId' and the \" +\n            \"type must be a string.\");\n    }\n    var user = {\n        keyId: key,\n        name: name,\n        customizedProperties: [],\n    };\n    if (custom) {\n        if (Array.isArray(custom)) {\n            custom.forEach(function (_a) {\n                var name = _a.name, value = _a.value;\n                if (name) {\n                    user.customizedProperties.push({\n                        name: name,\n                        value: value,\n                    });\n                }\n            });\n        }\n        else if (typeof custom === \"object\") {\n            Object.entries(custom).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (key) {\n                    user.customizedProperties.push({\n                        name: key,\n                        value: value,\n                    });\n                }\n            });\n        }\n    }\n    // add properties from evalContext to custom\n    Object.entries(evaluationContext).forEach(function (_a) {\n        var key = _a[0], value = _a[1];\n        if (!builtInKeys.includes(key)) {\n            user.customizedProperties.push({\n                name: key,\n                value: value,\n            });\n        }\n    });\n    return user;\n}\nexports.translateContext = translateContext;\n//# sourceMappingURL=translateContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction translateResult(result) {\n    var resolution = {\n        value: result\n    };\n    return resolution;\n}\nexports.default = translateResult;\n//# sourceMappingURL=translateResult.js.map","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  AllProviderEvents: () => ClientProviderEvents,\n  ClientProviderEvents: () => ClientProviderEvents,\n  DefaultLogger: () => DefaultLogger,\n  ErrorCode: () => ErrorCode,\n  FlagNotFoundError: () => FlagNotFoundError,\n  GeneralError: () => GeneralError,\n  GenericEventEmitter: () => GenericEventEmitter,\n  InvalidContextError: () => InvalidContextError,\n  LOG_LEVELS: () => LOG_LEVELS,\n  OpenFeatureCommonAPI: () => OpenFeatureCommonAPI,\n  OpenFeatureError: () => OpenFeatureError,\n  ParseError: () => ParseError,\n  ProviderNotReadyError: () => ProviderNotReadyError,\n  ProviderStatus: () => ProviderStatus,\n  SafeLogger: () => SafeLogger,\n  ServerProviderEvents: () => ServerProviderEvents,\n  StandardResolutionReasons: () => StandardResolutionReasons,\n  TargetingKeyMissingError: () => TargetingKeyMissingError,\n  TypeMismatchError: () => TypeMismatchError,\n  isObject: () => isObject,\n  isString: () => isString,\n  objectOrUndefined: () => objectOrUndefined,\n  statusMatchesEvent: () => statusMatchesEvent,\n  stringOrUndefined: () => stringOrUndefined\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/errors/open-feature-error-abstract.ts\nvar OpenFeatureError = class extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, OpenFeatureError.prototype);\n    this.name = \"OpenFeatureError\";\n  }\n};\n\n// src/evaluation/evaluation.ts\nvar StandardResolutionReasons = {\n  /**\n   * The resolved value was the result of a dynamic evaluation, such as a rule or specific user-targeting.\n   */\n  TARGETING_MATCH: \"TARGETING_MATCH\",\n  /**\n   * The resolved value was the result of pseudorandom assignment.\n   */\n  SPLIT: \"SPLIT\",\n  /**\n   * The resolved value was the result of the flag being disabled in the management system.\n   */\n  DISABLED: \"DISABLED\",\n  /**\n   *  The resolved value was configured statically, or otherwise fell back to a pre-configured value.\n   */\n  DEFAULT: \"DEFAULT\",\n  /**\n   * The reason for the resolved value could not be determined.\n   */\n  UNKNOWN: \"UNKNOWN\",\n  /**\n   * The resolved value is static (no dynamic evaluation).\n   */\n  STATIC: \"STATIC\",\n  /**\n   * The resolved value was retrieved from cache.\n   */\n  CACHED: \"CACHED\",\n  /**\n   * The resolved value was the result of an error.\n   *\n   * Note: The `errorCode` and `errorMessage` fields may contain additional details of this error.\n   */\n  ERROR: \"ERROR\"\n};\nvar ErrorCode = /* @__PURE__ */ ((ErrorCode2) => {\n  ErrorCode2[\"PROVIDER_NOT_READY\"] = \"PROVIDER_NOT_READY\";\n  ErrorCode2[\"FLAG_NOT_FOUND\"] = \"FLAG_NOT_FOUND\";\n  ErrorCode2[\"PARSE_ERROR\"] = \"PARSE_ERROR\";\n  ErrorCode2[\"TYPE_MISMATCH\"] = \"TYPE_MISMATCH\";\n  ErrorCode2[\"TARGETING_KEY_MISSING\"] = \"TARGETING_KEY_MISSING\";\n  ErrorCode2[\"INVALID_CONTEXT\"] = \"INVALID_CONTEXT\";\n  ErrorCode2[\"GENERAL\"] = \"GENERAL\";\n  return ErrorCode2;\n})(ErrorCode || {});\n\n// src/errors/general-error.ts\nvar GeneralError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, GeneralError.prototype);\n    this.name = \"GeneralError\";\n    this.code = \"GENERAL\" /* GENERAL */;\n  }\n};\n\n// src/errors/flag-not-found-error.ts\nvar FlagNotFoundError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, FlagNotFoundError.prototype);\n    this.name = \"FlagNotFoundError\";\n    this.code = \"FLAG_NOT_FOUND\" /* FLAG_NOT_FOUND */;\n  }\n};\n\n// src/errors/parse-error.ts\nvar ParseError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ParseError.prototype);\n    this.name = \"ParseError\";\n    this.code = \"PARSE_ERROR\" /* PARSE_ERROR */;\n  }\n};\n\n// src/errors/type-mismatch-error.ts\nvar TypeMismatchError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TypeMismatchError.prototype);\n    this.name = \"TypeMismatchError\";\n    this.code = \"TYPE_MISMATCH\" /* TYPE_MISMATCH */;\n  }\n};\n\n// src/errors/targeting-key-missing-error.ts\nvar TargetingKeyMissingError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TargetingKeyMissingError.prototype);\n    this.name = \"TargetingKeyMissingError\";\n    this.code = \"TARGETING_KEY_MISSING\" /* TARGETING_KEY_MISSING */;\n  }\n};\n\n// src/errors/invalid-context-error.ts\nvar InvalidContextError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, InvalidContextError.prototype);\n    this.name = \"InvalidContextError\";\n    this.code = \"INVALID_CONTEXT\" /* INVALID_CONTEXT */;\n  }\n};\n\n// src/errors/provider-not-ready-error.ts\nvar ProviderNotReadyError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ProviderNotReadyError.prototype);\n    this.name = \"ProviderNotReadyError\";\n    this.code = \"PROVIDER_NOT_READY\" /* PROVIDER_NOT_READY */;\n  }\n};\n\n// src/provider/provider.ts\nvar ProviderStatus = /* @__PURE__ */ ((ProviderStatus2) => {\n  ProviderStatus2[\"NOT_READY\"] = \"NOT_READY\";\n  ProviderStatus2[\"READY\"] = \"READY\";\n  ProviderStatus2[\"ERROR\"] = \"ERROR\";\n  ProviderStatus2[\"STALE\"] = \"STALE\";\n  return ProviderStatus2;\n})(ProviderStatus || {});\n\n// src/events/events.ts\nvar ServerProviderEvents = /* @__PURE__ */ ((ServerProviderEvents2) => {\n  ServerProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ServerProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ServerProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ServerProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ServerProviderEvents2;\n})(ServerProviderEvents || {});\nvar ClientProviderEvents = /* @__PURE__ */ ((ClientProviderEvents2) => {\n  ClientProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ClientProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ClientProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ClientProviderEvents2[\"ContextChanged\"] = \"PROVIDER_CONTEXT_CHANGED\";\n  ClientProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ClientProviderEvents2;\n})(ClientProviderEvents || {});\n\n// src/events/event-utils.ts\nvar eventStatusMap = {\n  [\"READY\" /* READY */]: \"PROVIDER_READY\" /* Ready */,\n  [\"ERROR\" /* ERROR */]: \"PROVIDER_ERROR\" /* Error */,\n  [\"STALE\" /* STALE */]: \"PROVIDER_STALE\" /* Stale */,\n  [\"NOT_READY\" /* NOT_READY */]: void 0\n};\nvar statusMatchesEvent = (event, status) => {\n  return !status && event === \"PROVIDER_READY\" /* Ready */ || eventStatusMap[status] === event;\n};\n\n// src/logger/default-logger.ts\nvar DefaultLogger = class {\n  error(...args) {\n    console.error(...args);\n  }\n  warn(...args) {\n    console.warn(...args);\n  }\n  info() {\n  }\n  debug() {\n  }\n};\n\n// src/logger/safe-logger.ts\nvar LOG_LEVELS = [\"error\", \"warn\", \"info\", \"debug\"];\nvar SafeLogger = class {\n  constructor(logger) {\n    this.fallbackLogger = new DefaultLogger();\n    try {\n      for (const level of LOG_LEVELS) {\n        if (!logger[level] || typeof logger[level] !== \"function\") {\n          throw new Error(`The provided logger is missing the ${level} method.`);\n        }\n      }\n      this.logger = logger;\n    } catch (err) {\n      console.error(err);\n      console.error(\"Falling back to the default logger.\");\n      this.logger = this.fallbackLogger;\n    }\n  }\n  error(...args) {\n    this.log(\"error\", ...args);\n  }\n  warn(...args) {\n    this.log(\"warn\", ...args);\n  }\n  info(...args) {\n    this.log(\"info\", ...args);\n  }\n  debug(...args) {\n    this.log(\"debug\", ...args);\n  }\n  log(level, ...args) {\n    try {\n      this.logger[level](...args);\n    } catch (error) {\n      this.fallbackLogger[level](...args);\n    }\n  }\n};\n\n// src/events/generic-event-emitter.ts\nvar GenericEventEmitter = class {\n  constructor(globalLogger) {\n    this.globalLogger = globalLogger;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._handlers = /* @__PURE__ */ new WeakMap();\n  }\n  // here we use E, to restrict the events a provider can manually emit (PROVIDER_CONTEXT_CHANGED is emitted by the SDK)\n  emit(eventType, context) {\n    this.eventEmitter.emit(eventType, context);\n  }\n  addHandler(eventType, handler) {\n    const asyncHandler = (details) => __async(this, null, function* () {\n      yield handler(details);\n    });\n    this._handlers.set(handler, asyncHandler);\n    this.eventEmitter.on(eventType, asyncHandler);\n  }\n  removeHandler(eventType, handler) {\n    const asyncHandler = this._handlers.get(handler);\n    if (!asyncHandler) {\n      return;\n    }\n    this.eventEmitter.removeListener(eventType, asyncHandler);\n  }\n  removeAllHandlers(eventType) {\n    if (eventType) {\n      this.eventEmitter.removeAllListeners(eventType);\n    } else {\n      this.eventEmitter.removeAllListeners();\n    }\n  }\n  getHandlers(eventType) {\n    return this.eventEmitter.listeners(eventType);\n  }\n  setLogger(logger) {\n    this._eventLogger = new SafeLogger(logger);\n    return this;\n  }\n  get _logger() {\n    var _a, _b;\n    return (_b = this._eventLogger) != null ? _b : (_a = this.globalLogger) == null ? void 0 : _a.call(this);\n  }\n};\n\n// src/type-guards.ts\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nfunction stringOrUndefined(value) {\n  return isString(value) ? value : void 0;\n}\nfunction isObject(value) {\n  return typeof value === \"object\";\n}\nfunction objectOrUndefined(value) {\n  return isObject(value) ? value : void 0;\n}\n\n// src/filter.ts\nfunction isDefined(input) {\n  return typeof input !== \"undefined\" && input !== null;\n}\n\n// src/open-feature.ts\nvar OpenFeatureCommonAPI = class {\n  constructor(category) {\n    this._hooks = [];\n    this._context = {};\n    this._logger = new DefaultLogger();\n    this._clientEventHandlers = /* @__PURE__ */ new Map();\n    this._clientProviders = /* @__PURE__ */ new Map();\n    this._clientEvents = /* @__PURE__ */ new Map();\n    this._runsOn = category;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  setLogger(logger) {\n    this._logger = new SafeLogger(logger);\n    return this;\n  }\n  /**\n   * Get metadata about the default provider.\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  get providerMetadata() {\n    return this.getProviderMetadata();\n  }\n  /**\n   * Get metadata about a registered provider using the client name.\n   * An unbound or empty client name will return metadata from the default provider.\n   * @param {string} [clientName] The name to identify the client\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  getProviderMetadata(clientName) {\n    return this.getProviderForClient(clientName).metadata;\n  }\n  /**\n   * Adds a handler for the given provider event type.\n   * The handlers are called in the order they have been added.\n   * API (global) events run for all providers.\n   * @param {AnyProviderEvent} eventType The provider event type to listen to\n   * @param {EventHandler} handler The handler to run on occurrence of the event type\n   */\n  addHandler(eventType, handler) {\n    [.../* @__PURE__ */ new Map([[void 0, this._defaultProvider]]), ...this._clientProviders].forEach((keyProviderTuple) => {\n      var _a;\n      const clientName = keyProviderTuple[0];\n      const provider = keyProviderTuple[1];\n      const shouldRunNow = statusMatchesEvent(eventType, keyProviderTuple[1].status);\n      if (shouldRunNow) {\n        try {\n          handler({ clientName, providerName: provider.metadata.name });\n        } catch (err) {\n          (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n        }\n      }\n    });\n    this._events.addHandler(eventType, handler);\n  }\n  /**\n   * Removes a handler for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to remove the listener for\n   * @param {EventHandler} handler The handler to remove for the provider event type\n   */\n  removeHandler(eventType, handler) {\n    this._events.removeHandler(eventType, handler);\n  }\n  /**\n   * Removes all event handlers.\n   */\n  clearHandlers() {\n    this._events.removeAllHandlers();\n  }\n  /**\n   * Gets the current handlers for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to get the current handlers for\n   * @returns {EventHandler[]} The handlers currently attached to the given provider event type\n   */\n  getHandlers(eventType) {\n    return this._events.getHandlers(eventType);\n  }\n  setProviderAndWait(clientOrProvider, providerOrUndefined) {\n    return __async(this, null, function* () {\n      yield this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    });\n  }\n  setProvider(clientOrProvider, providerOrUndefined) {\n    const maybePromise = this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    if (maybePromise) {\n      maybePromise.catch(() => {\n      });\n    }\n    return this;\n  }\n  setAwaitableProvider(clientOrProvider, providerOrUndefined) {\n    var _a, _b, _c, _d, _e, _f;\n    const clientName = stringOrUndefined(clientOrProvider);\n    const provider = (_a = objectOrUndefined(clientOrProvider)) != null ? _a : objectOrUndefined(providerOrUndefined);\n    if (!provider) {\n      this._logger.debug(\"No provider defined, ignoring setProvider call\");\n      return;\n    }\n    const oldProvider = this.getProviderForClient(clientName);\n    const providerName = provider.metadata.name;\n    if (oldProvider === provider) {\n      this._logger.debug(\"Provider is already set, ignoring setProvider call\");\n      return;\n    }\n    if (!provider.runsOn) {\n      this._logger.debug(`Provider '${provider.metadata.name}' has not defined its intended use.`);\n    } else if (provider.runsOn !== this._runsOn) {\n      throw new GeneralError(`Provider '${provider.metadata.name}' is intended for use on the ${provider.runsOn}.`);\n    }\n    const emitters = this.getAssociatedEventEmitters(clientName);\n    if (typeof provider.initialize === \"function\" && provider.status === void 0) {\n      const activeLogger = this._logger || console;\n      activeLogger.warn(\n        `Provider ${providerName} implements 'initialize' but not 'status'. Please implement 'status'.`\n      );\n    }\n    let initializationPromise = void 0;\n    if ((provider == null ? void 0 : provider.status) === \"NOT_READY\" /* NOT_READY */ && typeof provider.initialize === \"function\") {\n      initializationPromise = (_d = (_c = (_b = provider.initialize) == null ? void 0 : _b.call(provider, this._context)) == null ? void 0 : _c.then(() => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      })) == null ? void 0 : _d.catch((error) => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        throw error;\n      });\n    } else {\n      emitters.forEach((emitter) => {\n        emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      });\n      (_e = this._events) == null ? void 0 : _e.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n    }\n    if (clientName) {\n      this._clientProviders.set(clientName, provider);\n    } else {\n      this._defaultProvider = provider;\n    }\n    this.transferListeners(oldProvider, provider, clientName, emitters);\n    if (![...this._clientProviders.values(), this._defaultProvider].includes(oldProvider)) {\n      (_f = oldProvider == null ? void 0 : oldProvider.onClose) == null ? void 0 : _f.call(oldProvider);\n    }\n    return initializationPromise;\n  }\n  getProviderForClient(name) {\n    var _a;\n    if (!name) {\n      return this._defaultProvider;\n    }\n    return (_a = this._clientProviders.get(name)) != null ? _a : this._defaultProvider;\n  }\n  buildAndCacheEventEmitterForClient(name) {\n    const emitter = this._clientEvents.get(name);\n    if (emitter) {\n      return emitter;\n    }\n    const newEmitter = this._createEventEmitter();\n    this._clientEvents.set(name, newEmitter);\n    const clientProvider = this.getProviderForClient(name);\n    Object.values(ClientProviderEvents).forEach(\n      (eventType) => {\n        var _a;\n        return (_a = clientProvider.events) == null ? void 0 : _a.addHandler(eventType, (details) => __async(this, null, function* () {\n          newEmitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName: name, providerName: clientProvider.metadata.name }));\n        }));\n      }\n    );\n    return newEmitter;\n  }\n  getUnboundEmitters() {\n    const namedProviders = [...this._clientProviders.keys()];\n    const eventEmitterNames = [...this._clientEvents.keys()].filter(isDefined);\n    const unboundEmitterNames = eventEmitterNames.filter((name) => !namedProviders.includes(name));\n    return [\n      // all unbound, named emitters\n      ...unboundEmitterNames.map((name) => this._clientEvents.get(name)),\n      // the default emitter\n      this._clientEvents.get(void 0)\n    ].filter(isDefined);\n  }\n  getAssociatedEventEmitters(clientName) {\n    return clientName ? [this.buildAndCacheEventEmitterForClient(clientName)] : this.getUnboundEmitters();\n  }\n  transferListeners(oldProvider, newProvider, clientName, emitters) {\n    var _a;\n    (_a = this._clientEventHandlers.get(clientName)) == null ? void 0 : _a.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = oldProvider.events) == null ? void 0 : _a2.removeHandler(...eventHandler);\n    });\n    const newClientHandlers = Object.values(ClientProviderEvents).map((eventType) => {\n      const handler = (details) => __async(this, null, function* () {\n        emitters.forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n        });\n        this._events.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n      });\n      return [eventType, handler];\n    });\n    this._clientEventHandlers.set(clientName, newClientHandlers);\n    newClientHandlers.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = newProvider.events) == null ? void 0 : _a2.addHandler(...eventHandler);\n    });\n  }\n  close() {\n    return __async(this, null, function* () {\n      var _a, _b;\n      try {\n        yield (_b = (_a = this == null ? void 0 : this._defaultProvider) == null ? void 0 : _a.onClose) == null ? void 0 : _b.call(_a);\n      } catch (err) {\n        this.handleShutdownError(this._defaultProvider, err);\n      }\n      const providers = Array.from(this._clientProviders);\n      yield Promise.all(\n        providers.map((_0) => __async(this, [_0], function* ([, provider]) {\n          var _a2;\n          try {\n            yield (_a2 = provider.onClose) == null ? void 0 : _a2.call(provider);\n          } catch (err) {\n            this.handleShutdownError(provider, err);\n          }\n        }))\n      );\n    });\n  }\n  clearProvidersAndSetDefault(defaultProvider) {\n    return __async(this, null, function* () {\n      try {\n        yield this.close();\n      } catch (err) {\n        this._logger.error(\"Unable to cleanly close providers. Resetting to the default configuration.\");\n      } finally {\n        this._clientProviders.clear();\n        this._defaultProvider = defaultProvider;\n      }\n    });\n  }\n  handleShutdownError(provider, err) {\n    this._logger.error(`Error during shutdown of provider ${provider.metadata.name}: ${err}`);\n    this._logger.error(err == null ? void 0 : err.stack);\n  }\n};\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __reflectGet = Reflect.get;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __superGet = (cls, obj, key) => __reflectGet(__getProtoOf(cls), key, obj);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/events/events.js\nvar require_events = __commonJS({\n  \"../../node_modules/events/events.js\"(exports, module2) {\n    \"use strict\";\n    var R = typeof Reflect === \"object\" ? Reflect : null;\n    var ReflectApply = R && typeof R.apply === \"function\" ? R.apply : function ReflectApply2(target, receiver, args) {\n      return Function.prototype.apply.call(target, receiver, args);\n    };\n    var ReflectOwnKeys;\n    if (R && typeof R.ownKeys === \"function\") {\n      ReflectOwnKeys = R.ownKeys;\n    } else if (Object.getOwnPropertySymbols) {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n      };\n    } else {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target);\n      };\n    }\n    function ProcessEmitWarning(warning) {\n      if (console && console.warn)\n        console.warn(warning);\n    }\n    var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {\n      return value !== value;\n    };\n    function EventEmitter2() {\n      EventEmitter2.init.call(this);\n    }\n    module2.exports = EventEmitter2;\n    module2.exports.once = once;\n    EventEmitter2.EventEmitter = EventEmitter2;\n    EventEmitter2.prototype._events = void 0;\n    EventEmitter2.prototype._eventsCount = 0;\n    EventEmitter2.prototype._maxListeners = void 0;\n    var defaultMaxListeners = 10;\n    function checkListener(listener) {\n      if (typeof listener !== \"function\") {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n    }\n    Object.defineProperty(EventEmitter2, \"defaultMaxListeners\", {\n      enumerable: true,\n      get: function() {\n        return defaultMaxListeners;\n      },\n      set: function(arg) {\n        if (typeof arg !== \"number\" || arg < 0 || NumberIsNaN(arg)) {\n          throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + \".\");\n        }\n        defaultMaxListeners = arg;\n      }\n    });\n    EventEmitter2.init = function() {\n      if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n      }\n      this._maxListeners = this._maxListeners || void 0;\n    };\n    EventEmitter2.prototype.setMaxListeners = function setMaxListeners(n) {\n      if (typeof n !== \"number\" || n < 0 || NumberIsNaN(n)) {\n        throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + \".\");\n      }\n      this._maxListeners = n;\n      return this;\n    };\n    function _getMaxListeners(that) {\n      if (that._maxListeners === void 0)\n        return EventEmitter2.defaultMaxListeners;\n      return that._maxListeners;\n    }\n    EventEmitter2.prototype.getMaxListeners = function getMaxListeners() {\n      return _getMaxListeners(this);\n    };\n    EventEmitter2.prototype.emit = function emit(type) {\n      var args = [];\n      for (var i = 1; i < arguments.length; i++)\n        args.push(arguments[i]);\n      var doError = type === \"error\";\n      var events = this._events;\n      if (events !== void 0)\n        doError = doError && events.error === void 0;\n      else if (!doError)\n        return false;\n      if (doError) {\n        var er;\n        if (args.length > 0)\n          er = args[0];\n        if (er instanceof Error) {\n          throw er;\n        }\n        var err = new Error(\"Unhandled error.\" + (er ? \" (\" + er.message + \")\" : \"\"));\n        err.context = er;\n        throw err;\n      }\n      var handler = events[type];\n      if (handler === void 0)\n        return false;\n      if (typeof handler === \"function\") {\n        ReflectApply(handler, this, args);\n      } else {\n        var len = handler.length;\n        var listeners = arrayClone(handler, len);\n        for (var i = 0; i < len; ++i)\n          ReflectApply(listeners[i], this, args);\n      }\n      return true;\n    };\n    function _addListener(target, type, listener, prepend) {\n      var m;\n      var events;\n      var existing;\n      checkListener(listener);\n      events = target._events;\n      if (events === void 0) {\n        events = target._events = /* @__PURE__ */ Object.create(null);\n        target._eventsCount = 0;\n      } else {\n        if (events.newListener !== void 0) {\n          target.emit(\n            \"newListener\",\n            type,\n            listener.listener ? listener.listener : listener\n          );\n          events = target._events;\n        }\n        existing = events[type];\n      }\n      if (existing === void 0) {\n        existing = events[type] = listener;\n        ++target._eventsCount;\n      } else {\n        if (typeof existing === \"function\") {\n          existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n        } else if (prepend) {\n          existing.unshift(listener);\n        } else {\n          existing.push(listener);\n        }\n        m = _getMaxListeners(target);\n        if (m > 0 && existing.length > m && !existing.warned) {\n          existing.warned = true;\n          var w = new Error(\"Possible EventEmitter memory leak detected. \" + existing.length + \" \" + String(type) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n          w.name = \"MaxListenersExceededWarning\";\n          w.emitter = target;\n          w.type = type;\n          w.count = existing.length;\n          ProcessEmitWarning(w);\n        }\n      }\n      return target;\n    }\n    EventEmitter2.prototype.addListener = function addListener(type, listener) {\n      return _addListener(this, type, listener, false);\n    };\n    EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;\n    EventEmitter2.prototype.prependListener = function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n    function onceWrapper() {\n      if (!this.fired) {\n        this.target.removeListener(this.type, this.wrapFn);\n        this.fired = true;\n        if (arguments.length === 0)\n          return this.listener.call(this.target);\n        return this.listener.apply(this.target, arguments);\n      }\n    }\n    function _onceWrap(target, type, listener) {\n      var state = { fired: false, wrapFn: void 0, target, type, listener };\n      var wrapped = onceWrapper.bind(state);\n      wrapped.listener = listener;\n      state.wrapFn = wrapped;\n      return wrapped;\n    }\n    EventEmitter2.prototype.once = function once2(type, listener) {\n      checkListener(listener);\n      this.on(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.removeListener = function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n      checkListener(listener);\n      events = this._events;\n      if (events === void 0)\n        return this;\n      list = events[type];\n      if (list === void 0)\n        return this;\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = /* @__PURE__ */ Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit(\"removeListener\", type, list.listener || listener);\n        }\n      } else if (typeof list !== \"function\") {\n        position = -1;\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n        if (position < 0)\n          return this;\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n        if (list.length === 1)\n          events[type] = list[0];\n        if (events.removeListener !== void 0)\n          this.emit(\"removeListener\", type, originalListener || listener);\n      }\n      return this;\n    };\n    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(type) {\n      var listeners, events, i;\n      events = this._events;\n      if (events === void 0)\n        return this;\n      if (events.removeListener === void 0) {\n        if (arguments.length === 0) {\n          this._events = /* @__PURE__ */ Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== void 0) {\n          if (--this._eventsCount === 0)\n            this._events = /* @__PURE__ */ Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === \"removeListener\")\n            continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners(\"removeListener\");\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n      listeners = events[type];\n      if (typeof listeners === \"function\") {\n        this.removeListener(type, listeners);\n      } else if (listeners !== void 0) {\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n      return this;\n    };\n    function _listeners(target, type, unwrap) {\n      var events = target._events;\n      if (events === void 0)\n        return [];\n      var evlistener = events[type];\n      if (evlistener === void 0)\n        return [];\n      if (typeof evlistener === \"function\")\n        return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n      return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n    }\n    EventEmitter2.prototype.listeners = function listeners(type) {\n      return _listeners(this, type, true);\n    };\n    EventEmitter2.prototype.rawListeners = function rawListeners(type) {\n      return _listeners(this, type, false);\n    };\n    EventEmitter2.listenerCount = function(emitter, type) {\n      if (typeof emitter.listenerCount === \"function\") {\n        return emitter.listenerCount(type);\n      } else {\n        return listenerCount.call(emitter, type);\n      }\n    };\n    EventEmitter2.prototype.listenerCount = listenerCount;\n    function listenerCount(type) {\n      var events = this._events;\n      if (events !== void 0) {\n        var evlistener = events[type];\n        if (typeof evlistener === \"function\") {\n          return 1;\n        } else if (evlistener !== void 0) {\n          return evlistener.length;\n        }\n      }\n      return 0;\n    }\n    EventEmitter2.prototype.eventNames = function eventNames() {\n      return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n    };\n    function arrayClone(arr, n) {\n      var copy = new Array(n);\n      for (var i = 0; i < n; ++i)\n        copy[i] = arr[i];\n      return copy;\n    }\n    function spliceOne(list, index) {\n      for (; index + 1 < list.length; index++)\n        list[index] = list[index + 1];\n      list.pop();\n    }\n    function unwrapListeners(arr) {\n      var ret = new Array(arr.length);\n      for (var i = 0; i < ret.length; ++i) {\n        ret[i] = arr[i].listener || arr[i];\n      }\n      return ret;\n    }\n    function once(emitter, name) {\n      return new Promise(function(resolve, reject) {\n        function errorListener(err) {\n          emitter.removeListener(name, resolver);\n          reject(err);\n        }\n        function resolver() {\n          if (typeof emitter.removeListener === \"function\") {\n            emitter.removeListener(\"error\", errorListener);\n          }\n          resolve([].slice.call(arguments));\n        }\n        ;\n        eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n        if (name !== \"error\") {\n          addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n        }\n      });\n    }\n    function addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n      if (typeof emitter.on === \"function\") {\n        eventTargetAgnosticAddListener(emitter, \"error\", handler, flags);\n      }\n    }\n    function eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n      if (typeof emitter.on === \"function\") {\n        if (flags.once) {\n          emitter.once(name, listener);\n        } else {\n          emitter.on(name, listener);\n        }\n      } else if (typeof emitter.addEventListener === \"function\") {\n        emitter.addEventListener(name, function wrapListener(arg) {\n          if (flags.once) {\n            emitter.removeEventListener(name, wrapListener);\n          }\n          listener(arg);\n        });\n      } else {\n        throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n      }\n    }\n  }\n});\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  InMemoryProvider: () => InMemoryProvider,\n  NOOP_PROVIDER: () => NOOP_PROVIDER,\n  OpenFeature: () => OpenFeature,\n  OpenFeatureAPI: () => OpenFeatureAPI,\n  OpenFeatureClient: () => OpenFeatureClient,\n  OpenFeatureEventEmitter: () => OpenFeatureEventEmitter,\n  ProviderEvents: () => import_core2.ClientProviderEvents\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/client/open-feature-client.ts\nvar import_core7 = require(\"@openfeature/core\");\n\n// src/open-feature.ts\nvar import_core6 = require(\"@openfeature/core\");\n\n// src/events/open-feature-event-emitter.ts\nvar import_core = require(\"@openfeature/core\");\nvar import_events = __toESM(require_events());\nvar OpenFeatureEventEmitter = class extends import_core.GenericEventEmitter {\n  constructor() {\n    super();\n    this.eventEmitter = new import_events.default({ captureRejections: true });\n    this.eventEmitter.on(\"error\", (err) => {\n      var _a;\n      (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n    });\n  }\n};\n\n// src/events/events.ts\nvar import_core2 = require(\"@openfeature/core\");\n\n// src/provider/no-op-provider.ts\nvar import_core3 = require(\"@openfeature/core\");\nvar REASON_NO_OP = \"No-op\";\nvar NoopFeatureProvider = class {\n  constructor() {\n    this.metadata = {\n      name: \"No-op Provider\"\n    };\n  }\n  get status() {\n    return import_core3.ProviderStatus.NOT_READY;\n  }\n  resolveBooleanEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveStringEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveNumberEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveObjectEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  noOp(defaultValue) {\n    return {\n      value: defaultValue,\n      reason: REASON_NO_OP\n    };\n  }\n};\nvar NOOP_PROVIDER = new NoopFeatureProvider();\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar import_core5 = require(\"@openfeature/core\");\n\n// src/provider/in-memory-provider/variant-not-found-error.ts\nvar import_core4 = require(\"@openfeature/core\");\nvar VariantNotFoundError = class extends import_core4.OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, VariantNotFoundError.prototype);\n    this.name = \"VariantNotFoundError\";\n    this.code = import_core4.ErrorCode.GENERAL;\n  }\n};\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar InMemoryProvider = class {\n  constructor(flagConfiguration = {}) {\n    this.events = new OpenFeatureEventEmitter();\n    this.runsOn = \"client\";\n    this.status = import_core5.ProviderStatus.NOT_READY;\n    this.metadata = {\n      name: \"in-memory\"\n    };\n    this._flagConfiguration = __spreadValues({}, flagConfiguration);\n  }\n  initialize(context) {\n    return __async(this, null, function* () {\n      try {\n        for (const key in this._flagConfiguration) {\n          this.resolveFlagWithReason(key, context);\n        }\n        this._context = context;\n        this.status = import_core5.ProviderStatus.READY;\n      } catch (error) {\n        this.status = import_core5.ProviderStatus.ERROR;\n        throw error;\n      }\n    });\n  }\n  /**\n   * Overwrites the configured flags.\n   * @param { FlagConfiguration } flagConfiguration new flag configuration\n   */\n  putConfiguration(flagConfiguration) {\n    return __async(this, null, function* () {\n      const flagsChanged = Object.entries(flagConfiguration).filter(([key, value]) => this._flagConfiguration[key] !== value).map(([key]) => key);\n      this.status = import_core5.ProviderStatus.STALE;\n      this.events.emit(import_core2.ClientProviderEvents.Stale);\n      this._flagConfiguration = __spreadValues({}, flagConfiguration);\n      this.events.emit(import_core2.ClientProviderEvents.ConfigurationChanged, { flagsChanged });\n      try {\n        yield this.initialize(this._context);\n        this.events.emit(import_core2.ClientProviderEvents.Ready);\n      } catch (err) {\n        this.events.emit(import_core2.ClientProviderEvents.Error);\n        throw err;\n      }\n    });\n  }\n  resolveBooleanEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveNumberEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveStringEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveObjectEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveAndCheckFlag(flagKey, defaultValue, context, logger) {\n    if (!(flagKey in this._flagConfiguration)) {\n      const message = `no flag found with key ${flagKey}`;\n      logger == null ? void 0 : logger.debug(message);\n      throw new import_core5.FlagNotFoundError(message);\n    }\n    if (this._flagConfiguration[flagKey].disabled) {\n      return { value: defaultValue, reason: import_core5.StandardResolutionReasons.DISABLED };\n    }\n    const resolvedFlag = this.resolveFlagWithReason(flagKey, context);\n    if (resolvedFlag.value === void 0) {\n      const message = `no value associated with variant provided for ${flagKey} found`;\n      logger == null ? void 0 : logger.error(message);\n      throw new VariantNotFoundError(message);\n    }\n    if (typeof resolvedFlag.value != typeof defaultValue) {\n      throw new import_core5.TypeMismatchError();\n    }\n    return resolvedFlag;\n  }\n  resolveFlagWithReason(flagKey, ctx) {\n    try {\n      const resolutionResult = this.lookupFlagValue(flagKey, ctx);\n      return resolutionResult;\n    } catch (error) {\n      if (!(error instanceof import_core5.OpenFeatureError)) {\n        throw new import_core5.GeneralError((error == null ? void 0 : error.message) || \"unknown error\");\n      }\n      throw error;\n    }\n  }\n  lookupFlagValue(flagKey, ctx) {\n    var _a;\n    const flagSpec = this._flagConfiguration[flagKey];\n    const isContextEval = ctx && (flagSpec == null ? void 0 : flagSpec.contextEvaluator);\n    const variant = isContextEval ? (_a = flagSpec.contextEvaluator) == null ? void 0 : _a.call(flagSpec, ctx) : flagSpec.defaultVariant;\n    const value = variant && (flagSpec == null ? void 0 : flagSpec.variants[variant]);\n    const evalReason = isContextEval ? import_core5.StandardResolutionReasons.TARGETING_MATCH : import_core5.StandardResolutionReasons.STATIC;\n    const reason = this.status === import_core5.ProviderStatus.STALE ? import_core5.StandardResolutionReasons.CACHED : evalReason;\n    return __spreadProps(__spreadValues({\n      value\n    }, variant && { variant }), {\n      reason\n    });\n  }\n};\n\n// src/open-feature.ts\nvar GLOBAL_OPENFEATURE_API_KEY = Symbol.for(\"@openfeature/web-sdk/api\");\nvar _globalThis = globalThis;\nvar OpenFeatureAPI = class extends import_core6.OpenFeatureCommonAPI {\n  constructor() {\n    super(\"client\");\n    this._events = new OpenFeatureEventEmitter();\n    this._defaultProvider = NOOP_PROVIDER;\n    this._createEventEmitter = () => new OpenFeatureEventEmitter();\n    this._namedProviderContext = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Gets a singleton instance of the OpenFeature API.\n   * @ignore\n   * @returns {OpenFeatureAPI} OpenFeature API\n   */\n  static getInstance() {\n    const globalApi = _globalThis[GLOBAL_OPENFEATURE_API_KEY];\n    if (globalApi) {\n      return globalApi;\n    }\n    const instance = new OpenFeatureAPI();\n    _globalThis[GLOBAL_OPENFEATURE_API_KEY] = instance;\n    return instance;\n  }\n  setContext(nameOrContext, contextOrUndefined) {\n    return __async(this, null, function* () {\n      var _a, _b;\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrContext);\n      const context = (_b = (_a = (0, import_core6.objectOrUndefined)(nameOrContext)) != null ? _a : (0, import_core6.objectOrUndefined)(contextOrUndefined)) != null ? _b : {};\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.set(clientName, context);\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, context);\n        } else {\n          this._namedProviderContext.set(clientName, context);\n        }\n      } else {\n        const oldContext = this._context;\n        this._context = context;\n        const defaultContextNameProviders = Array.from(this._clientProviders.entries()).filter(([name]) => !this._namedProviderContext.has(name)).reduce((acc, [name, provider]) => {\n          acc.push({ name, provider });\n          return acc;\n        }, []);\n        const allProviders = [\n          // add in the default (no name)\n          { name: void 0, provider: this._defaultProvider },\n          ...defaultContextNameProviders\n        ];\n        yield Promise.all(\n          allProviders.map(\n            (tuple) => this.runProviderContextChangeHandler(tuple.name, tuple.provider, oldContext, context)\n          )\n        );\n      }\n    });\n  }\n  getContext(nameOrUndefined) {\n    const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n    if (clientName) {\n      const context = this._namedProviderContext.get(clientName);\n      if (context) {\n        return context;\n      } else {\n        this._logger.debug(`Unable to find context for '${clientName}'.`);\n      }\n    }\n    return this._context;\n  }\n  clearContext(nameOrUndefined) {\n    return __async(this, null, function* () {\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.delete(clientName);\n          const newContext = this.getContext();\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, newContext);\n        } else {\n          this._namedProviderContext.delete(clientName);\n        }\n      } else {\n        return this.setContext({});\n      }\n    });\n  }\n  /**\n   * Resets the global evaluation context and removes the evaluation context for\n   * all named clients.\n   */\n  clearContexts() {\n    return __async(this, null, function* () {\n      yield this.clearContext();\n      yield Promise.allSettled(Array.from(this._clientProviders.keys()).map((name) => this.clearContext(name)));\n    });\n  }\n  /**\n   * A factory function for creating new named OpenFeature clients. Clients can contain\n   * their own state (e.g. logger, hook, context). Multiple clients can be used\n   * to segment feature flag configuration.\n   *\n   * If there is already a provider bound to this name via {@link this.setProvider setProvider}, this provider will be used.\n   * Otherwise, the default provider is used until a provider is assigned to that name.\n   * @param {string} name The name of the client\n   * @param {string} version The version of the client (only used for metadata)\n   * @returns {Client} OpenFeature Client\n   */\n  getClient(name, version) {\n    return new OpenFeatureClient(\n      // functions are passed here to make sure that these values are always up to date,\n      // and so we don't have to make these public properties on the API class.\n      () => this.getProviderForClient(name),\n      () => this.buildAndCacheEventEmitterForClient(name),\n      () => this._logger,\n      { name, version }\n    );\n  }\n  /**\n   * Clears all registered providers and resets the default provider.\n   * @returns {Promise<void>}\n   */\n  clearProviders() {\n    return __async(this, null, function* () {\n      yield __superGet(OpenFeatureAPI.prototype, this, \"clearProvidersAndSetDefault\").call(this, NOOP_PROVIDER);\n      this._namedProviderContext.clear();\n    });\n  }\n  runProviderContextChangeHandler(clientName, provider, oldContext, newContext) {\n    return __async(this, null, function* () {\n      var _a, _b, _c, _d, _e;\n      const providerName = provider.metadata.name;\n      try {\n        yield (_a = provider.onContextChange) == null ? void 0 : _a.call(provider, oldContext, newContext);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n        });\n        (_b = this._events) == null ? void 0 : _b.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n      } catch (err) {\n        const error = err;\n        const message = `Error running ${(_c = provider == null ? void 0 : provider.metadata) == null ? void 0 : _c.name}'s context change handler: ${error == null ? void 0 : error.message}`;\n        (_d = this._logger) == null ? void 0 : _d.error(`${message}`, err);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n        });\n        (_e = this._events) == null ? void 0 : _e.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n      }\n    });\n  }\n};\nvar OpenFeature = OpenFeatureAPI.getInstance();\n\n// src/client/open-feature-client.ts\nvar OpenFeatureClient = class {\n  constructor(providerAccessor, emitterAccessor, globalLogger, options) {\n    this.providerAccessor = providerAccessor;\n    this.emitterAccessor = emitterAccessor;\n    this.globalLogger = globalLogger;\n    this.options = options;\n    this._hooks = [];\n  }\n  get metadata() {\n    return {\n      name: this.options.name,\n      version: this.options.version,\n      providerMetadata: this.providerAccessor().metadata\n    };\n  }\n  get providerStatus() {\n    var _a;\n    return ((_a = this.providerAccessor()) == null ? void 0 : _a.status) || import_core7.ProviderStatus.READY;\n  }\n  addHandler(eventType, handler) {\n    var _a;\n    this.emitterAccessor().addHandler(eventType, handler);\n    const shouldRunNow = (0, import_core7.statusMatchesEvent)(eventType, this._provider.status);\n    if (shouldRunNow) {\n      try {\n        handler({ clientName: this.metadata.name, providerName: this._provider.metadata.name });\n      } catch (err) {\n        (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n      }\n    }\n  }\n  removeHandler(notificationType, handler) {\n    this.emitterAccessor().removeHandler(notificationType, handler);\n  }\n  getHandlers(eventType) {\n    return this.emitterAccessor().getHandlers(eventType);\n  }\n  setLogger(logger) {\n    this._clientLogger = new import_core7.SafeLogger(logger);\n    return this;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  getBooleanValue(flagKey, defaultValue, options) {\n    return this.getBooleanDetails(flagKey, defaultValue, options).value;\n  }\n  getBooleanDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveBooleanEvaluation, defaultValue, \"boolean\", options);\n  }\n  getStringValue(flagKey, defaultValue, options) {\n    return this.getStringDetails(flagKey, defaultValue, options).value;\n  }\n  getStringDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted string generic argument.\n      this._provider.resolveStringEvaluation,\n      defaultValue,\n      \"string\",\n      options\n    );\n  }\n  getNumberValue(flagKey, defaultValue, options) {\n    return this.getNumberDetails(flagKey, defaultValue, options).value;\n  }\n  getNumberDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted number generic argument.\n      this._provider.resolveNumberEvaluation,\n      defaultValue,\n      \"number\",\n      options\n    );\n  }\n  getObjectValue(flagKey, defaultValue, options) {\n    return this.getObjectDetails(flagKey, defaultValue, options).value;\n  }\n  getObjectDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveObjectEvaluation, defaultValue, \"object\", options);\n  }\n  evaluate(flagKey, resolver, defaultValue, flagType, options = {}) {\n    var _a, _b;\n    const allHooks = [\n      ...OpenFeature.getHooks(),\n      ...this.getHooks(),\n      ...options.hooks || [],\n      ...this._provider.hooks || []\n    ];\n    const allHooksReversed = [...allHooks].reverse();\n    const context = __spreadValues({}, OpenFeature.getContext((_a = this == null ? void 0 : this.options) == null ? void 0 : _a.name));\n    const hookContext = {\n      flagKey,\n      defaultValue,\n      flagValueType: flagType,\n      clientMetadata: this.metadata,\n      providerMetadata: OpenFeature.providerMetadata,\n      context,\n      logger: this._logger\n    };\n    try {\n      this.beforeHooks(allHooks, hookContext, options);\n      const resolution = resolver.call(this._provider, flagKey, defaultValue, context, this._logger);\n      const evaluationDetails = __spreadProps(__spreadValues({}, resolution), {\n        flagMetadata: Object.freeze((_b = resolution.flagMetadata) != null ? _b : {}),\n        flagKey\n      });\n      this.afterHooks(allHooksReversed, hookContext, evaluationDetails, options);\n      return evaluationDetails;\n    } catch (err) {\n      const errorMessage = err == null ? void 0 : err.message;\n      const errorCode = (err == null ? void 0 : err.code) || import_core7.ErrorCode.GENERAL;\n      this.errorHooks(allHooksReversed, hookContext, err, options);\n      return {\n        errorCode,\n        errorMessage,\n        value: defaultValue,\n        reason: import_core7.StandardResolutionReasons.ERROR,\n        flagMetadata: Object.freeze({}),\n        flagKey\n      };\n    } finally {\n      this.finallyHooks(allHooksReversed, hookContext, options);\n    }\n  }\n  beforeHooks(hooks, hookContext, options) {\n    var _a;\n    Object.freeze(hookContext);\n    Object.freeze(hookContext.context);\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.before) == null ? void 0 : _a.call(hook, hookContext, Object.freeze(options.hookHints));\n    }\n  }\n  afterHooks(hooks, hookContext, evaluationDetails, options) {\n    var _a;\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.after) == null ? void 0 : _a.call(hook, hookContext, evaluationDetails, options.hookHints);\n    }\n  }\n  errorHooks(hooks, hookContext, err, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.error) == null ? void 0 : _a.call(hook, hookContext, err, options.hookHints);\n      } catch (err2) {\n        this._logger.error(`Unhandled error during 'error' hook: ${err2}`);\n        if (err2 instanceof Error) {\n          this._logger.error(err2.stack);\n        }\n        this._logger.error(err2 == null ? void 0 : err2.stack);\n      }\n    }\n  }\n  finallyHooks(hooks, hookContext, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.finally) == null ? void 0 : _a.call(hook, hookContext, options.hookHints);\n      } catch (err) {\n        this._logger.error(`Unhandled error during 'finally' hook: ${err}`);\n        if (err instanceof Error) {\n          this._logger.error(err.stack);\n        }\n        this._logger.error(err == null ? void 0 : err.stack);\n      }\n    }\n  }\n  get _provider() {\n    return this.providerAccessor();\n  }\n  get _logger() {\n    return this._clientLogger || this.globalLogger();\n  }\n};\n\n// src/index.ts\n__reExport(src_exports, require(\"@openfeature/core\"), module.exports);\n//# sourceMappingURL=index.js.map\n","import { FbProvider } from '@featbit/openfeature-provider-js-client';\nimport { EventDetails, OpenFeature, ProviderEvents } from '@openfeature/web-sdk';\nimport { IOptions } from \"@featbit/js-client-sdk\";\n\n(async () => {\n   const streamingUri = 'wss://app-eval.featbit.co';\n   const eventsUri = 'https://app-eval.featbit.co';\n   const sdkKey = 'Obg68EqYZk27JTxphPgy7At1aJ8GaAtEaIA1fb3IpuEA1';\n\n   const user = {\n      name: 'the-user',\n      keyId: 'the-user',\n      customizedProperties: [],\n   };\n\n   const option: IOptions = {\n      sdkKey: sdkKey,\n      streamingUri: streamingUri,\n      eventsUri: eventsUri,\n      logLevel: 'debug',\n      user: user,\n   };\n\n   const provider = new FbProvider(option);\n\n   // uncomment this line if you want to set a different context\n   // await OpenFeature.setContext(user);\n\n   await OpenFeature.setProviderAndWait(provider);\n\n   OpenFeature.addHandler(ProviderEvents.ConfigurationChanged, (eventDetails: EventDetails) => {\n      const client = OpenFeature.getClient();\n      const value = client.getStringValue('robot', 'ChatGPT');\n      console.log({...eventDetails, value});\n   });\n\n   const client = OpenFeature.getClient();\n\n   const value = client.getStringValue('robot', 'ChatGPT');\n   console.log(value);\n})()","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultValues = void 0;\nconst Validators_1 = require(\"./options/Validators\");\nconst OptionMessages_1 = __importDefault(require(\"./options/OptionMessages\"));\nconst InMemoryStore_1 = __importDefault(require(\"./store/InMemoryStore\"));\nconst isNullOrUndefined_1 = require(\"./utils/isNullOrUndefined\");\nconst canonicalizeUri_1 = require(\"./utils/canonicalizeUri\");\nconst NullBootstrapProvider_1 = require(\"./bootstrap/NullBootstrapProvider\");\nconst constants_1 = require(\"./constants\");\nconst DataSyncMode_1 = require(\"./data-sync/DataSyncMode\");\nconst bootstrap_1 = require(\"./bootstrap\");\n// Once things are internal to the implementation of the SDK we can depend on\n// types. Calls to the SDK could contain anything without any regard to typing.\n// So, data we take from external sources must be normalized into something\n// that can be trusted.\n/**\n * These perform cursory validations. Complex objects are implemented with classes\n * and these should allow for conditional construction.\n */\nconst validations = {\n    startWaitTime: Validators_1.TypeValidators.Number,\n    sdkKey: Validators_1.TypeValidators.String,\n    pollingUri: Validators_1.TypeValidators.String,\n    streamingUri: Validators_1.TypeValidators.String,\n    eventsUri: Validators_1.TypeValidators.String,\n    webSocketPingInterval: Validators_1.TypeValidators.Number,\n    logger: Validators_1.TypeValidators.Object,\n    logLevel: Validators_1.TypeValidators.String,\n    store: Validators_1.TypeValidators.ObjectOrFactory,\n    dataSynchronizer: Validators_1.TypeValidators.ObjectOrFactory,\n    flushInterval: Validators_1.TypeValidators.Number,\n    maxEventsInQueue: Validators_1.TypeValidators.Number,\n    disableEvents: Validators_1.TypeValidators.Boolean,\n    pollingInterval: Validators_1.TypeValidators.Number,\n    offline: Validators_1.TypeValidators.Boolean,\n    dataSyncMode: Validators_1.TypeValidators.String,\n    bootstrap: Validators_1.TypeValidators.Bootstrap,\n    user: Validators_1.TypeValidators.User\n};\n/**\n * @internal\n */\nexports.defaultValues = {\n    startWaitTime: 5000,\n    sdkKey: '',\n    pollingUri: '',\n    streamingUri: '',\n    eventsUri: '',\n    dataSyncMode: DataSyncMode_1.DataSyncModeEnum.STREAMING,\n    sendEvents: true,\n    webSocketPingInterval: 18 * 1000,\n    flushInterval: 2000,\n    maxEventsInQueue: 10000,\n    disableEvents: false,\n    pollingInterval: 30000,\n    offline: false,\n    store: (options) => new InMemoryStore_1.default(),\n    bootstrap: undefined,\n    user: undefined,\n};\nfunction validateTypesAndNames(options) {\n    let errors = [];\n    const validatedOptions = Object.assign({}, exports.defaultValues);\n    Object.keys(options).forEach((optionName) => {\n        var _a;\n        // We need to tell typescript it doesn't actually know what options are.\n        // If we don't then it complains we are doing crazy things with it.\n        const optionValue = options[optionName];\n        const validator = validations[optionName];\n        if (validator) {\n            if (!validator.is(optionValue)) {\n                if (validator.getType() === 'boolean') {\n                    errors.push(OptionMessages_1.default.wrongOptionTypeBoolean(optionName, typeof optionValue));\n                    validatedOptions[optionName] = !!optionValue;\n                }\n                else if (validator instanceof Validators_1.NumberWithMinimum &&\n                    Validators_1.TypeValidators.Number.is(optionValue)) {\n                    const { min } = validator;\n                    errors.push(OptionMessages_1.default.optionBelowMinimum(optionName, optionValue, min));\n                    validatedOptions[optionName] = min;\n                }\n                else if (validator instanceof Validators_1.UserValidator) {\n                    errors = [...errors, ...validator.messages];\n                    validatedOptions[optionName] = exports.defaultValues[optionName];\n                }\n                else {\n                    errors.push(OptionMessages_1.default.wrongOptionType(optionName, validator.getType(), typeof optionValue));\n                    validatedOptions[optionName] = exports.defaultValues[optionName];\n                }\n            }\n            else {\n                validatedOptions[optionName] = optionValue;\n            }\n        }\n        else {\n            (_a = options.logger) === null || _a === void 0 ? void 0 : _a.warn(OptionMessages_1.default.unknownOption(optionName));\n        }\n    });\n    return { errors, validatedOptions };\n}\nfunction validateEndpoints(options, validatedOptions) {\n    var _a, _b, _c;\n    const { streamingUri, pollingUri, eventsUri } = options;\n    const streamingUriMissing = (0, isNullOrUndefined_1.isNullOrUndefined)(streamingUri) || streamingUri === constants_1.EmptyString;\n    const pollingUriMissing = (0, isNullOrUndefined_1.isNullOrUndefined)(pollingUri) || pollingUri === constants_1.EmptyString;\n    const eventsUriMissing = (0, isNullOrUndefined_1.isNullOrUndefined)(eventsUri) || eventsUri === constants_1.EmptyString;\n    if (!validatedOptions.offline && (eventsUriMissing || (streamingUriMissing && pollingUriMissing))) {\n        if (eventsUriMissing) {\n            (_a = validatedOptions.logger) === null || _a === void 0 ? void 0 : _a.error(OptionMessages_1.default.partialEndpoint('eventsUri'));\n        }\n        if (validatedOptions.dataSyncMode === DataSyncMode_1.DataSyncModeEnum.STREAMING && streamingUriMissing) {\n            (_b = validatedOptions.logger) === null || _b === void 0 ? void 0 : _b.error(OptionMessages_1.default.partialEndpoint('streamingUri'));\n        }\n        if (validatedOptions.dataSyncMode === DataSyncMode_1.DataSyncModeEnum.POLLING && pollingUriMissing) {\n            (_c = validatedOptions.logger) === null || _c === void 0 ? void 0 : _c.error(OptionMessages_1.default.partialEndpoint('pollingUri'));\n        }\n    }\n}\nclass Configuration {\n    constructor(options = {}) {\n        var _a, _b;\n        this.bootstrapProvider = new NullBootstrapProvider_1.NullBootstrapProvider();\n        // The default will handle undefined, but not null.\n        // Because we can be called from JS we need to be extra defensive.\n        options = options || {};\n        // If there isn't a valid logger from the platform, then logs would go nowhere.\n        this.logger = options.logger;\n        const { errors, validatedOptions } = validateTypesAndNames(options);\n        errors.forEach((error) => {\n            var _a;\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.warn(error);\n        });\n        this.user = options.user;\n        validateEndpoints(options, validatedOptions);\n        this.streamingUri = `${(0, canonicalizeUri_1.canonicalizeUri)(validatedOptions.streamingUri)}/streaming`;\n        this.pollingUri = `${(0, canonicalizeUri_1.canonicalizeUri)(validatedOptions.pollingUri)}/api/public/sdk/client/latest-all`;\n        this.eventsUri = `${(0, canonicalizeUri_1.canonicalizeUri)(validatedOptions.eventsUri)}/api/public/insight/track`;\n        this.startWaitTime = validatedOptions.startWaitTime;\n        this.sdkKey = validatedOptions.sdkKey;\n        this.webSocketPingInterval = validatedOptions.webSocketPingInterval;\n        this.flushInterval = validatedOptions.flushInterval;\n        this.maxEventsInQueue = validatedOptions.maxEventsInQueue;\n        this.disableEvents = validatedOptions.disableEvents;\n        this.pollingInterval = validatedOptions.pollingInterval;\n        this.offline = validatedOptions.offline;\n        if (validatedOptions.bootstrap && validatedOptions.bootstrap.length > 0) {\n            try {\n                this.bootstrapProvider = new bootstrap_1.JsonBootstrapProvider(validatedOptions.bootstrap);\n            }\n            catch (_) {\n                (_a = this.logger) === null || _a === void 0 ? void 0 : _a.error('Failed to parse bootstrap JSON, use NullBootstrapProvider.');\n            }\n        }\n        if (this.offline) {\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.info('Offline mode enabled. No data synchronization with the FeatBit server will occur.');\n        }\n        this.dataSyncMode = validatedOptions.dataSyncMode;\n        if (Validators_1.TypeValidators.Function.is(validatedOptions.dataSynchronizer)) {\n            // @ts-ignore\n            this.dataSynchronizerFactory = validatedOptions.dataSynchronizer;\n        }\n        else {\n            // The processor is already created, just have the method return it.\n            // @ts-ignore\n            this.dataSynchronizerFactory = () => validatedOptions.dataSynchronizer;\n        }\n        if (Validators_1.TypeValidators.Function.is(validatedOptions.store)) {\n            // @ts-ignore\n            this.storeFactory = validatedOptions.store;\n        }\n        else {\n            // The store is already created, just have the method return it.\n            // @ts-ignore\n            this.storeFactory = () => validatedOptions.store;\n        }\n    }\n}\nexports.default = Configuration;\n//# sourceMappingURL=Configuration.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Context {\n    /**\n     * Contexts should be created using the static factory method {@link Context.fromUser}.\n     *\n     * The factory methods are static functions within the class because they access private\n     * implementation details, so they cannot be free functions.\n     */\n    constructor(valid, message) {\n        this.valid = valid;\n        this.message = message;\n    }\n    static fromUser(user) {\n        if (!user) {\n            return Context.contextForError('No user specified');\n        }\n        const { keyId, name } = user;\n        if (keyId === undefined || keyId === null || keyId.trim() === '') {\n            return Context.contextForError('key is mandatory');\n        }\n        const context = new Context(true);\n        context._user = user;\n        return context;\n    }\n    get user() {\n        return this._user;\n    }\n    get keyId() {\n        return this._user.keyId;\n    }\n    value(property) {\n        var _a, _b, _c, _d, _e;\n        if (property === 'keyId') {\n            return (_a = this._user) === null || _a === void 0 ? void 0 : _a.keyId;\n        }\n        else if (property === 'name') {\n            return (_b = this._user) === null || _b === void 0 ? void 0 : _b.name;\n        }\n        else {\n            return (_e = (_d = (_c = this._user) === null || _c === void 0 ? void 0 : _c.customizedProperties) === null || _d === void 0 ? void 0 : _d.find(x => x.name === property)) === null || _e === void 0 ? void 0 : _e.value;\n        }\n    }\n    static contextForError(message) {\n        return new Context(false, message);\n    }\n}\nexports.default = Context;\n//# sourceMappingURL=Context.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbClientBuilder = void 0;\nconst FbClient_1 = __importDefault(require(\"./platform/browser/FbClient\"));\n/**\n * Creates an instance of the FeatBit client.\n *\n * Applications should instantiate a single instance for the lifetime of the application.\n * The client will begin attempting to connect to FeatBit as soon as it is created. To\n * determine when it is ready to use, call {@link IFbClient.waitForInitialization}, or register an\n * event listener for the `\"ready\"` event using {@link IFbClient.on}.\n *\n * **Important:** Do **not** try to instantiate `FbClient` with its constructor\n * (`new FbClientNode()`); the SDK does not currently support\n * this.\n *\n * @return\n *   The new {@link IFbClient} instance.\n */\nclass FbClientBuilder {\n    constructor(options) {\n        this._options = options !== null && options !== void 0 ? options : {};\n    }\n    /**\n     * Creates a new instance of the FeatBit client.\n     */\n    build() {\n        return new FbClient_1.default(this._options, this._platform);\n    }\n    platform(platform) {\n        this._platform = platform;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.startWaitTime}.\n     */\n    startWaitTime(startWaitTime) {\n        this._options.startWaitTime = startWaitTime;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.sdkKey}.\n     */\n    sdkKey(sdkKey) {\n        this._options.sdkKey = sdkKey;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.user}.\n     */\n    user(user) {\n        this._options.user = user;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.streamingUri}.\n     */\n    streamingUri(streamingUri) {\n        this._options.streamingUri = streamingUri;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.pollingUri}.\n     */\n    pollingUri(pollingUri) {\n        this._options.pollingUri = pollingUri;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.eventsUri}.\n     */\n    eventsUri(eventsUri) {\n        this._options.eventsUri = eventsUri;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.dataSyncMode}.\n     */\n    dataSyncMode(mode) {\n        this._options.dataSyncMode = mode;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.pollingInterval}.\n     */\n    pollingInterval(pollingInterval) {\n        this._options.pollingInterval = pollingInterval;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.flushInterval}.\n     */\n    flushInterval(flushInterval) {\n        this._options.flushInterval = flushInterval;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.maxEventsInQueue}.\n     */\n    maxEventsInQueue(maxEventsInQueue) {\n        this._options.maxEventsInQueue = maxEventsInQueue;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.disableEvents}.\n     */\n    disableEvents(param) {\n        this._options.disableEvents = param;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.logger}.\n     */\n    logger(logger) {\n        this._options.logger = logger;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.logLevel}.\n     */\n    logLevel(level) {\n        this._options.logLevel = level;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.offline}.\n     */\n    offline(offline) {\n        this._options.offline = offline;\n        return this;\n    }\n    /**\n     * Use the JsonBootstrapProvider.\n     */\n    bootstrap(flags) {\n        this._options.bootstrap = flags;\n        return this;\n    }\n    /**\n     * Refer to {@link IOptions.dataSynchronizer}.\n     */\n    dataSynchronizer(dataSynchronizer) {\n        this._options.dataSynchronizer = dataSynchronizer;\n        return this;\n    }\n}\nexports.FbClientBuilder = FbClientBuilder;\n//# sourceMappingURL=FbClientBuilder.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FbClientCore = void 0;\nconst Configuration_1 = __importDefault(require(\"./Configuration\"));\nconst ClientContext_1 = __importDefault(require(\"./options/ClientContext\"));\nconst DataSourceUpdates_1 = __importDefault(require(\"./data-sources/DataSourceUpdates\"));\nconst createStreamListeners_1 = require(\"./data-sources/createStreamListeners\");\nconst WebSocketDataSynchronizer_1 = __importDefault(require(\"./data-sync/WebSocketDataSynchronizer\"));\nconst PollingDataSynchronizer_1 = __importDefault(require(\"./data-sync/PollingDataSynchronizer\"));\nconst Requestor_1 = __importDefault(require(\"./data-sync/Requestor\"));\nconst DataKinds_1 = __importDefault(require(\"./store/DataKinds\"));\nconst Evaluator_1 = __importDefault(require(\"./evaluation/Evaluator\"));\nconst ReasonKinds_1 = require(\"./evaluation/ReasonKinds\");\nconst errors_1 = require(\"./errors\");\nconst Context_1 = __importDefault(require(\"./Context\"));\nconst ValueConverters_1 = require(\"./utils/ValueConverters\");\nconst NullDataSynchronizer_1 = require(\"./data-sync/NullDataSynchronizer\");\nconst NullEventProcessor_1 = require(\"./events/NullEventProcessor\");\nconst DefaultEventProcessor_1 = require(\"./events/DefaultEventProcessor\");\nconst event_1 = require(\"./events/event\");\nconst DataSyncMode_1 = require(\"./data-sync/DataSyncMode\");\nconst Validators_1 = require(\"./options/Validators\");\nconst evaluation_1 = require(\"./evaluation\");\nvar ClientState;\n(function (ClientState) {\n    ClientState[ClientState[\"Initializing\"] = 0] = \"Initializing\";\n    ClientState[ClientState[\"Initialized\"] = 1] = \"Initialized\";\n    ClientState[ClientState[\"Failed\"] = 2] = \"Failed\";\n})(ClientState || (ClientState = {}));\nclass FbClientCore {\n    constructor(options, platform, callbacks) {\n        this.options = options;\n        this.platform = platform;\n        this.state = ClientState.Initializing;\n        this.onError = callbacks.onError;\n        this.onFailed = callbacks.onFailed;\n        this.onReady = callbacks.onReady;\n        const { onUpdate, hasEventListeners } = callbacks;\n        const config = new Configuration_1.default(options);\n        if (!config.sdkKey && !config.offline) {\n            throw new Error('You must configure the client with an SDK key');\n        }\n        if (!config.user) {\n            throw new Error('You must configure the client with a user');\n        }\n        this.config = config;\n        this.logger = config.logger;\n        this.init(onUpdate, hasEventListeners);\n    }\n    init(onUpdate, hasEventListeners) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            const clientContext = new ClientContext_1.default(this.config.sdkKey, this.config, this.platform);\n            this.store = this.config.storeFactory(clientContext);\n            yield this.store.identify(this.config.user);\n            this.dataSourceUpdates = new DataSourceUpdates_1.default(this.store, hasEventListeners, onUpdate);\n            this.evaluator = new Evaluator_1.default(this.store);\n            // use bootstrap provider to populate store\n            yield this.config.bootstrapProvider.populate(this.config.user.keyId, this.dataSourceUpdates);\n            if (this.config.offline) {\n                this.eventProcessor = new NullEventProcessor_1.NullEventProcessor();\n                this.dataSynchronizer = new NullDataSynchronizer_1.NullDataSynchronizer();\n                this.initSuccess();\n            }\n            else {\n                if (this.config.disableEvents) {\n                    this.eventProcessor = new NullEventProcessor_1.NullEventProcessor();\n                }\n                else {\n                    this.eventProcessor = new DefaultEventProcessor_1.DefaultEventProcessor(clientContext);\n                }\n                const listeners = (0, createStreamListeners_1.createStreamListeners)(this.dataSourceUpdates, this.logger, {\n                    put: () => this.initSuccess(),\n                    patch: () => this.initSuccess()\n                });\n                const dataSynchronizer = this.config.dataSyncMode === DataSyncMode_1.DataSyncModeEnum.STREAMING\n                    ? new WebSocketDataSynchronizer_1.default(this.config.sdkKey, this.config.user, clientContext, this.platform.webSocket, () => this.store.version, listeners, this.config.webSocketPingInterval)\n                    : new PollingDataSynchronizer_1.default(this.config, new Requestor_1.default(this.config.sdkKey, this.config, this.platform.info, this.platform.requests), () => this.store.version, listeners, (e) => this.dataSourceErrorHandler(e));\n                this.dataSynchronizer = (_c = (_b = (_a = this.config).dataSynchronizerFactory) === null || _b === void 0 ? void 0 : _b.call(_a, clientContext, this.store, this.dataSourceUpdates, () => this.initSuccess(), (e) => this.dataSourceErrorHandler(e))) !== null && _c !== void 0 ? _c : dataSynchronizer;\n            }\n            this.start();\n        });\n    }\n    identify(user) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const validator = new Validators_1.UserValidator();\n            if (!validator.is(user)) {\n                validator.messages.forEach((error) => {\n                    var _a;\n                    (_a = this.logger) === null || _a === void 0 ? void 0 : _a.warn(error);\n                });\n                return;\n            }\n            const [oldFlags, oldVersion] = this.store.all(DataKinds_1.default.Flags);\n            const oldData = {\n                flags: Object.assign({}, oldFlags),\n                version: oldVersion\n            };\n            this.config.user = user;\n            yield this.store.identify(user);\n            yield this.dataSynchronizer.identify(user);\n            const [newFlags, newVersion] = this.store.all(DataKinds_1.default.Flags);\n            const newData = {\n                flags: Object.assign({}, newFlags),\n                version: newVersion\n            };\n            if (Object.keys(newFlags).length === 0) {\n                yield this.config.bootstrapProvider.populate(user.keyId, this.dataSourceUpdates);\n            }\n            else {\n                (_a = this.dataSourceUpdates) === null || _a === void 0 ? void 0 : _a.checkUpdates(oldData, newData);\n            }\n        });\n    }\n    start() {\n        if (this.config.offline) {\n            return;\n        }\n        this.dataSynchronizer.start();\n        setTimeout(() => {\n            var _a, _b;\n            if (!this.initialized()) {\n                const msg = `FbClient failed to start successfully within ${this.config.startWaitTime} milliseconds. ` +\n                    'This error usually indicates a connection issue with FeatBit or an invalid sdkKey.' +\n                    'Please double-check your sdkKey and streamingUri/pollingUri configuration. ' +\n                    'We will continue to initialize the FbClient, it still have a chance to get to work ' +\n                    'if it\\'s a temporary network issue';\n                const error = new errors_1.TimeoutError(msg);\n                this.state = ClientState.Failed;\n                this.rejectionReason = error;\n                (_a = this.initReject) === null || _a === void 0 ? void 0 : _a.call(this, error);\n                return (_b = this.logger) === null || _b === void 0 ? void 0 : _b.warn(msg);\n            }\n        }, this.config.startWaitTime);\n    }\n    initialized() {\n        return this.state === ClientState.Initialized;\n    }\n    waitForInitialization() {\n        // An initialization promise is only created if someone is going to use that promise.\n        // If we always created an initialization promise, and there was no call waitForInitialization\n        // by the time the promise was rejected, then that would result in an unhandled promise\n        // rejection.\n        // Initialization promise was created by a previous call to waitForInitialization.\n        if (this.initializedPromise) {\n            return this.initializedPromise;\n        }\n        // Initialization completed before waitForInitialization was called, so we have completed\n        // and there was no promise. So we make a resolved promise and return it.\n        if (this.state === ClientState.Initialized) {\n            this.initializedPromise = Promise.resolve(this);\n            return this.initializedPromise;\n        }\n        // Initialization failed before waitForInitialization was called, so we have completed\n        // and there was no promise. So we make a rejected promise and return it.\n        if (this.state === ClientState.Failed) {\n            this.initializedPromise = Promise.reject(this.rejectionReason);\n            return this.initializedPromise;\n        }\n        if (!this.initializedPromise) {\n            this.initializedPromise = new Promise((resolve, reject) => {\n                this.initResolve = resolve;\n                this.initReject = reject;\n            });\n        }\n        return this.initializedPromise;\n    }\n    boolVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.bool).value;\n    }\n    boolVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.bool);\n    }\n    jsonVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.json).value;\n    }\n    jsonVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.json);\n    }\n    numberVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.number).value;\n    }\n    numberVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.number);\n    }\n    stringVariation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.string).value;\n    }\n    stringVariationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue, ValueConverters_1.ValueConverters.string);\n    }\n    variation(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue).value;\n    }\n    variationDetail(key, defaultValue) {\n        return this.evaluateCore(key, defaultValue);\n    }\n    getAllVariations() {\n        var _a;\n        const context = Context_1.default.fromUser(this.config.user);\n        if (!context.valid) {\n            const error = new errors_1.ClientError(`${(_a = context.message) !== null && _a !== void 0 ? _a : 'User not valid;'} returning default value.`);\n            this.onError(error);\n            return Promise.resolve([]);\n        }\n        const [flags, _] = this.store.all(DataKinds_1.default.Flags);\n        const result = Object.keys(flags).map(flagKey => {\n            var _a;\n            const evalResult = this.evaluator.evaluate(flagKey);\n            return { flagKey, kind: evalResult.kind, reason: evalResult.reason, value: (_a = evalResult.value) === null || _a === void 0 ? void 0 : _a.variation };\n        });\n        return Promise.resolve(result);\n    }\n    close() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.eventProcessor.close();\n            (_a = this.dataSynchronizer) === null || _a === void 0 ? void 0 : _a.close();\n            this.store.close();\n        });\n    }\n    track(eventName, metricValue) {\n        const metricEvent = new event_1.MetricEvent(this.config.user, eventName, this.platform.info.appType, metricValue !== null && metricValue !== void 0 ? metricValue : 1);\n        this.eventProcessor.record(metricEvent);\n        return;\n    }\n    flush(callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.eventProcessor.flush();\n                callback === null || callback === void 0 ? void 0 : callback(true);\n                return true;\n            }\n            catch (err) {\n                callback === null || callback === void 0 ? void 0 : callback(false);\n                return false;\n            }\n        });\n    }\n    evaluateCore(flagKey, defaultValue, typeConverter) {\n        var _a, _b;\n        const context = Context_1.default.fromUser(this.config.user);\n        if (!context.valid) {\n            const error = new errors_1.ClientError(`${(_a = context.message) !== null && _a !== void 0 ? _a : 'User not valid;'} returning default value.`);\n            this.onError(error);\n            return { flagKey, kind: ReasonKinds_1.ReasonKinds.Error, reason: error.message, value: defaultValue };\n        }\n        const evalResult = this.evaluator.evaluate(flagKey);\n        if (evalResult.kind === ReasonKinds_1.ReasonKinds.FlagNotFound) {\n            // flag not found, return default value\n            const error = new errors_1.ClientError(evalResult.reason);\n            this.onError(error);\n            return { flagKey, kind: evalResult.kind, reason: evalResult.reason, value: defaultValue };\n        }\n        if (!this.initialized()) {\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.warn('Variation called before FeatBit client initialization completed (did you wait for the' +\n                \"'ready' event?)\");\n        }\n        else {\n            // send event\n            this.eventProcessor.record(evalResult.toEvalEvent(this.config.user));\n        }\n        let converter;\n        if (!typeConverter) {\n            switch (evalResult.value.variationType) {\n                case evaluation_1.VariationDataType.boolean:\n                    converter = ValueConverters_1.ValueConverters.bool;\n                    break;\n                case evaluation_1.VariationDataType.number:\n                    converter = ValueConverters_1.ValueConverters.number;\n                    break;\n                case evaluation_1.VariationDataType.json:\n                    converter = ValueConverters_1.ValueConverters.json;\n                    break;\n                case evaluation_1.VariationDataType.string:\n                    converter = ValueConverters_1.ValueConverters.string;\n                    break;\n                default:\n                    converter = ValueConverters_1.ValueConverters.string;\n            }\n        }\n        else {\n            converter = typeConverter;\n        }\n        const { isSucceeded, value } = converter(evalResult.value.variation);\n        return isSucceeded\n            ? { flagKey, kind: evalResult.kind, reason: evalResult.reason, value }\n            : { flagKey, kind: ReasonKinds_1.ReasonKinds.WrongType, reason: 'type mismatch', value: defaultValue };\n    }\n    dataSourceErrorHandler(e) {\n        var _a;\n        const error = e.code === 401 ? new Error('Authentication failed. Double check your SDK key.') : e;\n        this.onError(error);\n        this.onFailed(error);\n        if (!this.initialized()) {\n            this.state = ClientState.Failed;\n            this.rejectionReason = error;\n            (_a = this.initReject) === null || _a === void 0 ? void 0 : _a.call(this, error);\n        }\n    }\n    initSuccess() {\n        var _a, _b;\n        if (!this.initialized()) {\n            this.state = ClientState.Initialized;\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.info('FbClient started successfully.');\n            (_b = this.initResolve) === null || _b === void 0 ? void 0 : _b.call(this, this);\n            this.onReady();\n        }\n    }\n}\nexports.FbClientCore = FbClientCore;\n//# sourceMappingURL=FbClientCore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IContextProperty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDataKind.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IFbClient.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IVersionedData.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IBootstrapProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonBootstrapProvider = void 0;\nconst serialization_1 = require(\"../store/serialization\");\nconst store_1 = require(\"../store/store\");\nconst isNullOrUndefined_1 = require(\"../utils/isNullOrUndefined\");\nclass JsonBootstrapProvider {\n    constructor(bootstrap) {\n        const flags = (bootstrap || []).map((flag) => (Object.assign(Object.assign({}, flag), { origin: store_1.StoreItemOriginEnum.Local, variationOptions: flag.variationOptions || [{ id: null, variation: flag.variation }] })));\n        const data = (0, serialization_1.deserializeAll)(flags);\n        this.dataSet = {\n            flags: data.flags,\n            version: 0\n        };\n    }\n    populate(userKeyId, dataSourceUpdates, callback) {\n        return new Promise((resolve, reject) => {\n            if ((0, isNullOrUndefined_1.isNullOrUndefined)(this.dataSet)) {\n                return resolve();\n            }\n            const internalCallback = () => {\n                resolve();\n                callback === null || callback === void 0 ? void 0 : callback();\n            };\n            dataSourceUpdates.init(userKeyId, this.dataSet, internalCallback);\n        });\n    }\n}\nexports.JsonBootstrapProvider = JsonBootstrapProvider;\n//# sourceMappingURL=JsonBootstrapProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NullBootstrapProvider = void 0;\nclass NullBootstrapProvider {\n    constructor() {\n        this.dataSet = {\n            flags: {},\n            version: 0\n        };\n    }\n    populate(userKeyId, dataSourceUpdates, callback) {\n        return new Promise((resolve, reject) => {\n            resolve();\n            callback === null || callback === void 0 ? void 0 : callback();\n        });\n    }\n}\nexports.NullBootstrapProvider = NullBootstrapProvider;\n//# sourceMappingURL=NullBootstrapProvider.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./IBootstrapProvider\"), exports);\n__exportStar(require(\"./JsonBootstrapProvider\"), exports);\n__exportStar(require(\"./NullBootstrapProvider\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MinInt = exports.EmptyString = void 0;\nexports.EmptyString = '';\nexports.MinInt = 0x80000000;\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"../store/store\");\nconst DataKinds_1 = __importDefault(require(\"../store/DataKinds\"));\n/**\n * @internal\n */\nclass DataSourceUpdates {\n    constructor(store, hasEventListeners, onChange) {\n        this.store = store;\n        this.hasEventListeners = hasEventListeners;\n        this.onChange = onChange;\n    }\n    init(userKeyId, newData, callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (userKeyId !== this.store.user.keyId) {\n                callback === null || callback === void 0 ? void 0 : callback();\n                return;\n            }\n            const checkForChanges = this.hasEventListeners();\n            const doInit = (oldData) => __awaiter(this, void 0, void 0, function* () {\n                // When init method is not run from local bootstrap and if bootstrap data is configured when starting the app and the server does not return those flags\n                // We should keep the local flags in the store as it is\n                const isRunFromLocal = Object.keys(newData.flags).some((key) => newData.flags[key].origin === store_1.StoreItemOriginEnum.Local);\n                if (!isRunFromLocal && oldData) {\n                    const localOnlyFlags = Object.keys(oldData.flags).filter((key) => {\n                        return oldData.flags[key] && !newData.flags[key] && oldData.flags[key].origin === store_1.StoreItemOriginEnum.Local;\n                    }).reduce((acc, cur) => {\n                        acc[cur] = oldData.flags[cur];\n                        return acc;\n                    }, {});\n                    newData = { version: newData.version, flags: Object.assign(Object.assign({}, newData.flags), localOnlyFlags) };\n                }\n                yield this.store.init(newData);\n                Promise.resolve().then(() => {\n                    if (checkForChanges) {\n                        const updatedKeys = Object.keys(newData)\n                            .flatMap((namespace) => {\n                            const oldDataForKind = (oldData === null || oldData === void 0 ? void 0 : oldData[namespace]) || {};\n                            const newDataForKind = newData[namespace];\n                            const mergedData = Object.assign(Object.assign({}, oldDataForKind), newDataForKind);\n                            return Object.keys(mergedData)\n                                .filter((key) => this.isUpdated(oldDataForKind && oldDataForKind[key], newDataForKind && newDataForKind[key]));\n                        });\n                        updatedKeys.length > 0 && this.onChange(updatedKeys);\n                    }\n                });\n                callback === null || callback === void 0 ? void 0 : callback();\n            });\n            const [flags, version] = this.store.all(DataKinds_1.default.Flags);\n            const oldData = {\n                flags,\n                version\n            };\n            yield doInit(oldData);\n        });\n    }\n    checkUpdates(oldData, newData, callback) {\n        const checkForChanges = this.hasEventListeners();\n        if (!checkForChanges) {\n            return;\n        }\n        const updatedKeys = Object.keys(newData)\n            .flatMap((namespace) => {\n            const oldDataForKind = (oldData === null || oldData === void 0 ? void 0 : oldData[namespace]) || {};\n            const newDataForKind = newData[namespace];\n            const mergedData = Object.assign(Object.assign({}, oldDataForKind), newDataForKind);\n            return Object.keys(mergedData)\n                .filter((key) => this.isUpdated(oldDataForKind && oldDataForKind[key], newDataForKind && newDataForKind[key]));\n        });\n        updatedKeys.length > 0 && this.onChange(updatedKeys);\n        callback === null || callback === void 0 ? void 0 : callback();\n    }\n    upsert(userKeyId, kind, data, callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (userKeyId !== this.store.user.keyId) {\n                callback === null || callback === void 0 ? void 0 : callback();\n                return;\n            }\n            const { key } = data;\n            const checkForChanges = this.hasEventListeners();\n            const doUpsert = (oldItem) => __awaiter(this, void 0, void 0, function* () {\n                yield this.store.upsert(kind, data);\n                Promise.resolve().then(() => {\n                    if (checkForChanges && this.isUpdated(oldItem, data[key])) {\n                        this.onChange([key]);\n                    }\n                });\n                callback === null || callback === void 0 ? void 0 : callback();\n            });\n            if (checkForChanges) {\n                const item = this.store.get(kind, key);\n                yield doUpsert(item || undefined);\n            }\n            else {\n                yield doUpsert();\n            }\n        });\n    }\n    isUpdated(oldData, newData) {\n        if (!oldData && !newData) {\n            return false;\n        }\n        if (!oldData || !newData) {\n            return true;\n        }\n        return newData.version >= oldData.version && newData.variation !== oldData.variation;\n    }\n}\nexports.default = DataSourceUpdates;\n//# sourceMappingURL=DataSourceUpdates.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createStreamListeners = void 0;\nconst serialization_1 = require(\"../store/serialization\");\nconst createPutListener = (dataSourceUpdates, logger, onPutCompleteHandler = () => {\n}) => ({\n    deserializeData: serialization_1.deserializeAll,\n    processJson: (userKeyId, { flags }) => __awaiter(void 0, void 0, void 0, function* () {\n        const initData = {\n            flags: flags,\n            version: 0\n        };\n        logger === null || logger === void 0 ? void 0 : logger.debug('Initializing all data');\n        yield dataSourceUpdates.init(userKeyId, initData, onPutCompleteHandler);\n    }),\n});\nconst createPatchListener = (dataSourceUpdates, logger, onPatchCompleteHandler = () => {\n}) => ({\n    deserializeData: serialization_1.deserializePatch,\n    processJson: (userKeyId, data) => __awaiter(void 0, void 0, void 0, function* () {\n        if ((data === null || data === void 0 ? void 0 : data.length) === 0) {\n            onPatchCompleteHandler === null || onPatchCompleteHandler === void 0 ? void 0 : onPatchCompleteHandler();\n            return;\n        }\n        if ((data === null || data === void 0 ? void 0 : data.length) > 0) {\n            for (const item of data) {\n                logger === null || logger === void 0 ? void 0 : logger.debug(`Updating ${item.data.key} in ${item.kind.namespace}`);\n                yield dataSourceUpdates.upsert(userKeyId, item.kind, item.data, onPatchCompleteHandler);\n            }\n        }\n    }),\n});\nconst createStreamListeners = (dataSourceUpdates, logger, onCompleteHandlers) => {\n    const listeners = new Map();\n    listeners.set('put', createPutListener(dataSourceUpdates, logger, onCompleteHandlers === null || onCompleteHandlers === void 0 ? void 0 : onCompleteHandlers.put));\n    listeners.set('patch', createPatchListener(dataSourceUpdates, logger, onCompleteHandlers === null || onCompleteHandlers === void 0 ? void 0 : onCompleteHandlers.patch));\n    return listeners;\n};\nexports.createStreamListeners = createStreamListeners;\n//# sourceMappingURL=createStreamListeners.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./createStreamListeners\"), exports);\n__exportStar(require(\"./DataSourceUpdates\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataSyncModeEnum = void 0;\nvar DataSyncModeEnum;\n(function (DataSyncModeEnum) {\n    DataSyncModeEnum[\"POLLING\"] = \"polling\";\n    DataSyncModeEnum[\"STREAMING\"] = \"streaming\";\n})(DataSyncModeEnum || (exports.DataSyncModeEnum = DataSyncModeEnum = {}));\n//# sourceMappingURL=DataSyncMode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDataSynchronizer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IRequestor.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NullDataSynchronizer = void 0;\nclass NullDataSynchronizer {\n    close() {\n    }\n    start() {\n    }\n    stop() {\n    }\n    identify() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n}\nexports.NullDataSynchronizer = NullDataSynchronizer;\n//# sourceMappingURL=NullDataSynchronizer.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"../errors\");\nconst types_1 = require(\"./types\");\nconst http_1 = require(\"../utils/http\");\nconst store_1 = require(\"../store\");\nclass PollingDataSynchronizer {\n    constructor(config, requestor, getStoreTimestamp, listeners, errorHandler) {\n        this.requestor = requestor;\n        this.getStoreTimestamp = getStoreTimestamp;\n        this.listeners = listeners;\n        this.errorHandler = errorHandler;\n        this.stopped = false;\n        this.logger = config.logger;\n        this.pollingInterval = config.pollingInterval;\n        this.user = config.user;\n    }\n    poll(resolve, reject) {\n        var _a;\n        if (this.stopped) {\n            return;\n        }\n        const startTime = Date.now();\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.debug('Polling for feature flag and segments updates');\n        this.requestor.requestData(this.getStoreTimestamp(), this.user, (err, body) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c, _d, _e, _f, _g, _h;\n            const elapsed = Date.now() - startTime;\n            const sleepFor = Math.max(this.pollingInterval - elapsed, 0);\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.debug('Elapsed: %d ms, sleeping for %d ms', elapsed, sleepFor);\n            if (err) {\n                const { status } = err;\n                if (status && !(0, errors_1.isHttpRecoverable)(status)) {\n                    const message = (0, http_1.httpErrorMessage)(err, 'polling request');\n                    (_c = this.logger) === null || _c === void 0 ? void 0 : _c.error(message);\n                    (_d = this.errorHandler) === null || _d === void 0 ? void 0 : _d.call(this, new errors_1.PollingError(message, status));\n                    // It is not recoverable, return and do not trigger another\n                    // poll.\n                    reject === null || reject === void 0 ? void 0 : reject();\n                    return;\n                }\n                (_e = this.logger) === null || _e === void 0 ? void 0 : _e.warn((0, http_1.httpErrorMessage)(err, 'polling request', 'will retry'));\n                // Falling through, there was some type of error, we need to trigger\n                // a new poll.\n                this.timeoutHandle = setTimeout(() => {\n                    this.poll(resolve, reject);\n                }, sleepFor);\n            }\n            else {\n                let featureFlags = [];\n                let userKeyId = (_f = this.user) === null || _f === void 0 ? void 0 : _f.keyId;\n                let processStreamResponse = this.listeners.get('patch');\n                if (body) {\n                    const message = JSON.parse(body);\n                    if (message.messageType === 'data-sync') {\n                        switch (message.data.eventType) {\n                            case types_1.StreamResponseEventType.patch:\n                                processStreamResponse = this.listeners.get('patch');\n                                break;\n                            case types_1.StreamResponseEventType.full:\n                                processStreamResponse = this.listeners.get('put');\n                                break;\n                        }\n                        ({ featureFlags, userKeyId } = message.data);\n                        // set origin\n                        featureFlags = featureFlags.map((ff) => (Object.assign(Object.assign({}, ff), { origin: store_1.StoreItemOriginEnum.Remote })));\n                    }\n                }\n                const data = (_g = processStreamResponse === null || processStreamResponse === void 0 ? void 0 : processStreamResponse.deserializeData) === null || _g === void 0 ? void 0 : _g.call(processStreamResponse, featureFlags);\n                yield ((_h = processStreamResponse === null || processStreamResponse === void 0 ? void 0 : processStreamResponse.processJson) === null || _h === void 0 ? void 0 : _h.call(processStreamResponse, userKeyId, data));\n                resolve === null || resolve === void 0 ? void 0 : resolve();\n                // Falling through, there was some type of error, we need to trigger\n                // a new poll.\n                this.timeoutHandle = setTimeout(() => {\n                    this.poll();\n                }, sleepFor);\n            }\n        }));\n    }\n    identify(user) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.user = Object.assign({}, user);\n            if (this.timeoutHandle) {\n                clearTimeout(this.timeoutHandle);\n                this.timeoutHandle = undefined;\n            }\n            return new Promise((resolve, reject) => {\n                this.poll(resolve, reject);\n            });\n        });\n    }\n    close() {\n        this.stop();\n    }\n    start() {\n        this.poll();\n    }\n    stop() {\n        if (this.timeoutHandle) {\n            clearTimeout(this.timeoutHandle);\n            this.timeoutHandle = undefined;\n        }\n        this.stopped = true;\n    }\n}\nexports.default = PollingDataSynchronizer;\n//# sourceMappingURL=PollingDataSynchronizer.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"../errors\");\nconst http_1 = require(\"../utils/http\");\n/**\n * @internal\n */\nclass Requestor {\n    constructor(sdkKey, config, info, requests) {\n        this.requests = requests;\n        this.headers = (0, http_1.defaultHeaders)(sdkKey, info);\n        this.uri = config.pollingUri;\n    }\n    /**\n     * Perform a request and utilize the ETag cache. The ETags are cached in the\n     * requestor instance.\n     */\n    request(requestUrl, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = yield this.requests.fetch(requestUrl, options);\n            const body = yield res.text();\n            return { res, body };\n        });\n    }\n    requestData(timestamp, payload, cb) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const options = {\n                method: 'POST',\n                headers: this.headers,\n                body: JSON.stringify(payload)\n            };\n            try {\n                const { res, body } = yield this.request(`${this.uri}?timestamp=${timestamp !== null && timestamp !== void 0 ? timestamp : 0}`, options);\n                if (res.status !== 200 && res.status !== 304) {\n                    const err = new errors_1.StreamingError(`Unexpected status code: ${res.status}`, res.status);\n                    return cb(err, undefined);\n                }\n                return cb(undefined, res.status === 304 ? null : body);\n            }\n            catch (err) {\n                return cb(err, undefined);\n            }\n        });\n    }\n}\nexports.default = Requestor;\n//# sourceMappingURL=Requestor.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"../store\");\nclass WebSocketDataSynchronizer {\n    constructor(sdkKey, user, clientContext, socket, getStoreTimestamp, listeners, webSocketPingInterval) {\n        this.getStoreTimestamp = getStoreTimestamp;\n        this.listeners = listeners;\n        const { logger, streamingUri } = clientContext;\n        this.logger = logger;\n        this.socket = socket;\n        this.socket.config({\n            sdkKey,\n            streamingUri,\n            pingInterval: webSocketPingInterval,\n            user,\n            logger,\n            getStoreTimestamp\n        });\n        this.listeners.forEach(({ deserializeData, processJson }, eventName) => {\n            var _a;\n            (_a = this.socket) === null || _a === void 0 ? void 0 : _a.addListener(eventName, (event) => __awaiter(this, void 0, void 0, function* () {\n                var _b, _c;\n                (_b = this.logger) === null || _b === void 0 ? void 0 : _b.debug(`Received ${eventName} event`);\n                if (event === null || event === void 0 ? void 0 : event.data) {\n                    const { userKeyId } = event.data;\n                    // set origin\n                    const featureFlags = event.data.featureFlags.map((ff) => (Object.assign(Object.assign({}, ff), { origin: store_1.StoreItemOriginEnum.Remote })));\n                    const data = deserializeData(featureFlags);\n                    yield processJson(userKeyId, data);\n                    (_c = this.identifyResolve) === null || _c === void 0 ? void 0 : _c.call(this);\n                    this.identifyResolve = undefined;\n                }\n            }));\n        });\n    }\n    identify(user) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this.socket) === null || _a === void 0 ? void 0 : _a.identify(user);\n            return new Promise(resolve => this.identifyResolve = resolve);\n        });\n    }\n    start() {\n        var _a;\n        this.logConnectionStarted();\n        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.connect();\n    }\n    logConnectionStarted() {\n        var _a;\n        this.connectionAttemptStartTime = Date.now();\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.info(`Stream connection attempt StartTime ${this.connectionAttemptStartTime}`);\n    }\n    close() {\n        this.stop();\n    }\n    stop() {\n        var _a;\n        (_a = this.socket) === null || _a === void 0 ? void 0 : _a.close();\n        this.socket = undefined;\n    }\n}\nexports.default = WebSocketDataSynchronizer;\n//# sourceMappingURL=WebSocketDataSynchronizer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DataSyncMode\"), exports);\n__exportStar(require(\"./IDataSynchronizer\"), exports);\n__exportStar(require(\"./IRequestor\"), exports);\n__exportStar(require(\"./NullDataSynchronizer\"), exports);\n__exportStar(require(\"./PollingDataSynchronizer\"), exports);\n__exportStar(require(\"./Requestor\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./WebSocketDataSynchronizer\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamResponseEventType = void 0;\nvar StreamResponseEventType;\n(function (StreamResponseEventType) {\n    StreamResponseEventType[\"full\"] = \"full\";\n    StreamResponseEventType[\"patch\"] = \"patch\";\n})(StreamResponseEventType || (exports.StreamResponseEventType = StreamResponseEventType = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateConnectionToken = void 0;\n/********************** encode text begin *****************************/\nconst alphabet = {\n    \"0\": \"Q\",\n    \"1\": \"B\",\n    \"2\": \"W\",\n    \"3\": \"S\",\n    \"4\": \"P\",\n    \"5\": \"H\",\n    \"6\": \"D\",\n    \"7\": \"X\",\n    \"8\": \"Z\",\n    \"9\": \"U\",\n};\nfunction encodeNumber(param, length) {\n    var s = \"000000000000\" + param;\n    const numberWithLeadingZeros = s.slice(s.length - length);\n    return numberWithLeadingZeros.split('').map(n => alphabet[n]).join('');\n}\n// generate connection token\nfunction generateConnectionToken(text) {\n    text = text.replace(/=*$/, '');\n    const timestamp = Date.now();\n    const timestampCode = encodeNumber(timestamp, timestamp.toString().length);\n    // get random number less than the length of the text as the start point, and it must be greater or equal to 2\n    const start = Math.max(Math.floor(Math.random() * text.length), 2);\n    return `${encodeNumber(start, 3)}${encodeNumber(timestampCode.length, 2)}${text.slice(0, start)}${timestampCode}${text.slice(start)}`;\n}\nexports.generateConnectionToken = generateConnectionToken;\n/********************** encode text end *****************************/ \n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isHttpRecoverable = exports.TimeoutError = exports.ClientError = exports.UnexpectedResponseError = exports.StreamingError = exports.PollingError = void 0;\nclass PollingError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.status = status;\n        this.name = 'FbPollingError';\n    }\n}\nexports.PollingError = PollingError;\nclass StreamingError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n        this.name = 'FbStreamingError';\n    }\n}\nexports.StreamingError = StreamingError;\nclass UnexpectedResponseError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'FbUnexpectedResponseError';\n    }\n}\nexports.UnexpectedResponseError = UnexpectedResponseError;\nclass ClientError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'FbClientError';\n    }\n}\nexports.ClientError = ClientError;\nclass TimeoutError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'FeatBitTimeoutError';\n    }\n}\nexports.TimeoutError = TimeoutError;\nfunction isHttpRecoverable(status) {\n    if (status >= 400 && status < 500) {\n        return status === 400 || status === 408 || status === 429;\n    }\n    return true;\n}\nexports.isHttpRecoverable = isHttpRecoverable;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ReasonKinds_1 = require(\"./ReasonKinds\");\nconst event_1 = require(\"../events/event\");\n/**\n * A class which encapsulates the result of an evaluation. It allows for differentiating between\n * successful and error result types.\n *\n * @internal\n */\nclass EvalResult {\n    constructor(kind, value, reason) {\n        this.kind = kind;\n        this.value = value;\n        this.reason = reason;\n    }\n    static flagNotFound(flagKey) {\n        return new EvalResult(ReasonKinds_1.ReasonKinds.FlagNotFound, null, `flag not found: ${flagKey}`);\n    }\n    static matched(val) {\n        return new EvalResult(ReasonKinds_1.ReasonKinds.Match, val, 'target match');\n    }\n    toEvalEvent(user) {\n        var _a, _b, _c;\n        if (this.kind !== ReasonKinds_1.ReasonKinds.Match) {\n            return null;\n        }\n        const targetedVariation = (_a = this.value) === null || _a === void 0 ? void 0 : _a.variations.find(v => { var _a; return v.value === ((_a = this.value) === null || _a === void 0 ? void 0 : _a.variation); });\n        return new event_1.EvalEvent(user, (_b = this.value) === null || _b === void 0 ? void 0 : _b.id, targetedVariation, (_c = this.value) === null || _c === void 0 ? void 0 : _c.sendToExperiment);\n    }\n}\nexports.default = EvalResult;\n//# sourceMappingURL=EvalResult.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EvalResult_1 = __importDefault(require(\"./EvalResult\"));\nconst DataKinds_1 = __importDefault(require(\"../store/DataKinds\"));\n/**\n * @internal\n */\nclass Evaluator {\n    constructor(store) {\n        this.store = store;\n    }\n    /**\n     * Evaluate the given flag against the given context.\n     * @param flagKey The key of the feature flag.\n     */\n    evaluate(flagKey) {\n        const flag = this.store.get(DataKinds_1.default.Flags, flagKey);\n        if (!flag) {\n            return EvalResult_1.default.flagNotFound(flagKey);\n        }\n        return EvalResult_1.default.matched(flag);\n    }\n}\nexports.default = Evaluator;\n//# sourceMappingURL=Evaluator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IEvalDetail.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReasonKinds = void 0;\n/**\n * Different kinds of error which may be encountered during evaluation.\n */\nvar ReasonKinds;\n(function (ReasonKinds) {\n    ReasonKinds[\"ClientNotReady\"] = \"ClientNotReady\";\n    ReasonKinds[\"Match\"] = \"Match\";\n    ReasonKinds[\"WrongType\"] = \"WrongType\";\n    ReasonKinds[\"FlagNotFound\"] = \"FlagNotFound\";\n    ReasonKinds[\"Error\"] = \"Error\";\n})(ReasonKinds || (exports.ReasonKinds = ReasonKinds = {}));\n//# sourceMappingURL=ReasonKinds.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VariationDataType = void 0;\nvar VariationDataType;\n(function (VariationDataType) {\n    VariationDataType[\"string\"] = \"string\";\n    VariationDataType[\"boolean\"] = \"boolean\";\n    VariationDataType[\"number\"] = \"number\";\n    VariationDataType[\"json\"] = \"json\";\n    VariationDataType[\"empty\"] = \"\";\n})(VariationDataType || (exports.VariationDataType = VariationDataType = {}));\n//# sourceMappingURL=IFlag.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./IFlag\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./data\"), exports);\n__exportStar(require(\"./EvalResult\"), exports);\n__exportStar(require(\"./Evaluator\"), exports);\n__exportStar(require(\"./IEvalDetail\"), exports);\n__exportStar(require(\"./ReasonKinds\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventProcessor = void 0;\nconst EventDispatcher_1 = require(\"./EventDispatcher\");\nconst event_1 = require(\"./event\");\nconst isNullOrUndefined_1 = require(\"../utils/isNullOrUndefined\");\nconst DefaultEventQueue_1 = require(\"./DefaultEventQueue\");\nclass DefaultEventProcessor {\n    constructor(clientContext) {\n        this.closed = false;\n        const { logger, flushInterval, maxEventsInQueue } = clientContext;\n        this.logger = logger;\n        this.flushInterval = flushInterval;\n        this.eventQueue = new DefaultEventQueue_1.DefaultEventQueue(maxEventsInQueue, this.logger);\n        this.eventDispatcher = new EventDispatcher_1.EventDispatcher(clientContext, this.eventQueue);\n        this.flushLoop();\n    }\n    flushLoop() {\n        if (this.closed) {\n            return;\n        }\n        setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.flush();\n            }\n            catch (err) {\n                this.logger.error('Unexpected error while flushing events in event processor.', err);\n            }\n            this.flushLoop();\n        }), this.flushInterval);\n    }\n    flush() {\n        const flushEvent = new event_1.FlushEvent();\n        this.record(flushEvent);\n        return flushEvent.waitForCompletion();\n    }\n    close() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.closed) {\n                return;\n            }\n            // send a shutdown event to dispatcher\n            const shutdown = new event_1.ShutdownEvent();\n            this.record(shutdown);\n            try {\n                yield shutdown.waitForCompletion();\n            }\n            catch (err) {\n                this.logger.error('Event processor shutdown but not complete.');\n            }\n            // mark the event queue as complete for adding\n            this.eventQueue.close();\n            this.closed = true;\n        });\n    }\n    record(event) {\n        if ((0, isNullOrUndefined_1.isNullOrUndefined)(event)) {\n            return false;\n        }\n        if (!this.eventQueue.addEvent(event)) {\n            if (event instanceof event_1.FlushEvent) {\n                event.complete();\n            }\n            return false;\n        }\n        return true;\n    }\n}\nexports.DefaultEventProcessor = DefaultEventProcessor;\n//# sourceMappingURL=DefaultEventProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventQueue = void 0;\nclass DefaultEventQueue {\n    constructor(capacity, logger) {\n        this.capacity = capacity;\n        this.logger = logger;\n        this.closed = false;\n        this.events = [];\n    }\n    addEvent(event) {\n        if (this.closed) {\n            return false;\n        }\n        if (this.events.length >= this.capacity) {\n            this.logger.warn(\"Events are being produced faster than they can be processed. We shouldn't see this.\");\n            return false;\n        }\n        this.events.push(event);\n        return true;\n    }\n    clear() {\n        this.events = [];\n    }\n    shift() {\n        return this.events.shift();\n    }\n    close() {\n        this.closed = true;\n    }\n    get eventsSnapshot() {\n        return [...this.events];\n    }\n    get length() {\n        return this.events.length;\n    }\n    get isEmpty() {\n        return this.length === 0;\n    }\n}\nexports.DefaultEventQueue = DefaultEventQueue;\n//# sourceMappingURL=DefaultEventQueue.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventSender = void 0;\nconst IEventSender_1 = require(\"./IEventSender\");\nconst http_1 = require(\"../utils/http\");\nconst errors_1 = require(\"../errors\");\nconst sleep_1 = __importDefault(require(\"../utils/sleep\"));\nclass DefaultEventSender {\n    constructor(clientContext) {\n        const { sdkKey, eventsUri, platform } = clientContext;\n        const { info, requests } = platform;\n        this.defaultHeaders = (0, http_1.defaultHeaders)(sdkKey, info);\n        this.eventsUri = eventsUri;\n        this.requests = requests;\n    }\n    send(payload, retry) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = {\n                status: IEventSender_1.DeliveryStatus.Succeeded,\n            };\n            const headers = Object.assign({}, this.defaultHeaders);\n            let error;\n            try {\n                const { status } = yield this.requests.fetch(this.eventsUri, {\n                    headers,\n                    body: payload,\n                    method: 'POST',\n                });\n                if (status >= 200 && status <= 299) {\n                    return res;\n                }\n                error = new errors_1.UnexpectedResponseError((0, http_1.httpErrorMessage)({ status, message: 'some events were dropped' }, 'event posting'));\n                if (!(0, errors_1.isHttpRecoverable)(status)) {\n                    res.status = IEventSender_1.DeliveryStatus.FailedAndMustShutDown;\n                    res.error = error;\n                    return res;\n                }\n            }\n            catch (err) {\n                error = err;\n            }\n            // recoverable but not retrying\n            if (error && !retry) {\n                res.status = IEventSender_1.DeliveryStatus.Failed;\n                res.error = error;\n                return res;\n            }\n            // wait 1 second before retrying\n            yield (0, sleep_1.default)();\n            return this.send(payload, false);\n        });\n    }\n}\nexports.DefaultEventSender = DefaultEventSender;\n//# sourceMappingURL=DefaultEventSender.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventSerializer = void 0;\nconst event_1 = require(\"./event\");\nclass DefaultEventSerializer {\n    serialize(events) {\n        const payload = events\n            .map(event => event instanceof event_1.EvalEvent || event instanceof event_1.MetricEvent ? event.toPayload() : null)\n            .filter(event => event !== null);\n        return JSON.stringify(payload);\n    }\n}\nexports.DefaultEventSerializer = DefaultEventSerializer;\n//# sourceMappingURL=DefaultEventSerializer.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventDispatcher = void 0;\nconst IEventSender_1 = require(\"./IEventSender\");\nconst DefaultEventQueue_1 = require(\"./DefaultEventQueue\");\nconst DefaultEventSender_1 = require(\"./DefaultEventSender\");\nconst event_1 = require(\"./event\");\nconst DefaultEventSerializer_1 = require(\"./DefaultEventSerializer\");\nconst sleep_1 = __importDefault(require(\"../utils/sleep\"));\nclass EventDispatcher {\n    constructor(clientContext, queue) {\n        this.maxEventPerRequest = 50;\n        this.stopped = false;\n        const { logger, maxEventsInQueue } = clientContext;\n        this.logger = logger;\n        this.buffer = new DefaultEventQueue_1.DefaultEventQueue(maxEventsInQueue, this.logger);\n        this.sender = new DefaultEventSender_1.DefaultEventSender(clientContext);\n        this.serializer = new DefaultEventSerializer_1.DefaultEventSerializer();\n        this.dispatchLoop(queue).then();\n    }\n    dispatchLoop(queue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.logger.debug('Start dispatch loop.');\n            let running = true;\n            while (running) {\n                try {\n                    const event = queue.shift();\n                    if (event === undefined) {\n                        yield (0, sleep_1.default)(1000);\n                        continue;\n                    }\n                    if (event instanceof event_1.PayloadEvent) {\n                        this.addEventToBuffer(event);\n                    }\n                    else if (event instanceof event_1.FlushEvent) {\n                        yield this.triggerFlush(event);\n                    }\n                    else if (event instanceof event_1.ShutdownEvent) {\n                        yield this.triggerFlush(event);\n                        this.stopped = true;\n                        running = false;\n                    }\n                }\n                catch (err) {\n                    this.logger.error('Unexpected error in event dispatcher.', err);\n                }\n            }\n            this.logger.debug('Finish dispatch loop.');\n        });\n    }\n    addEventToBuffer(event) {\n        if (this.stopped) {\n            return;\n        }\n        if (this.buffer.addEvent(event)) {\n            this.logger.debug('Added event to buffer.');\n        }\n        else {\n            this.logger.warn('Exceeded event queue capacity, event will be dropped. Increase capacity to avoid dropping events.');\n        }\n    }\n    triggerFlush(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.stopped) {\n                event.complete();\n                return;\n            }\n            if (this.buffer.isEmpty) {\n                event.complete();\n                this.logger.debug('Flush empty buffer.');\n                // There are no events to flush. If we don't complete the message, then the async task may never\n                // complete (if it had a non-zero positive timeout, then it would complete after the timeout).\n                return;\n            }\n            const snapshot = this.buffer.eventsSnapshot;\n            this.buffer.clear();\n            try {\n                yield this.flushEvents(snapshot);\n                this.logger.debug(`${snapshot.length} events has been flushed.`);\n            }\n            catch (err) {\n                this.logger.warn('Exception happened when flushing events', err);\n            }\n            event.complete();\n        });\n    }\n    flushEvents(events) {\n        return __awaiter(this, void 0, void 0, function* () {\n            events = this.getUniqueEvents(events);\n            const total = events.length;\n            for (let i = 0; i < total; i += this.maxEventPerRequest) {\n                const length = Math.min(this.maxEventPerRequest, total - i);\n                const slice = events.slice(i, i + length);\n                const payload = this.serializer.serialize(slice);\n                const { status } = yield this.sender.send(payload, true);\n                if (status === IEventSender_1.DeliveryStatus.FailedAndMustShutDown) {\n                    this.stopped = true;\n                }\n            }\n        });\n    }\n    getUniqueEvents(events) {\n        const uniqueEvents = [];\n        const hashes = [];\n        for (const event of events) {\n            if (!hashes.includes(event.hash)) {\n                uniqueEvents.push(event);\n                hashes.push(event.hash);\n            }\n        }\n        return uniqueEvents;\n    }\n}\nexports.EventDispatcher = EventDispatcher;\n//# sourceMappingURL=EventDispatcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=EventSerializer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IEventProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IEventQueue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeliveryStatus = void 0;\nvar DeliveryStatus;\n(function (DeliveryStatus) {\n    DeliveryStatus[DeliveryStatus[\"Succeeded\"] = 0] = \"Succeeded\";\n    DeliveryStatus[DeliveryStatus[\"Failed\"] = 1] = \"Failed\";\n    DeliveryStatus[DeliveryStatus[\"FailedAndMustShutDown\"] = 2] = \"FailedAndMustShutDown\";\n})(DeliveryStatus || (exports.DeliveryStatus = DeliveryStatus = {}));\n//# sourceMappingURL=IEventSender.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NullEventProcessor = void 0;\nclass NullEventProcessor {\n    flush() {\n        return Promise.resolve();\n    }\n    close() {\n        return Promise.resolve();\n    }\n    record(event) {\n        return false;\n    }\n}\nexports.NullEventProcessor = NullEventProcessor;\n//# sourceMappingURL=NullEventProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EvalEvent = exports.MetricEvent = exports.PayloadEvent = exports.ShutdownEvent = exports.FlushEvent = exports.AsyncEvent = void 0;\nclass AsyncEvent {\n    get hash() {\n        return this.timestamp.toString();\n    }\n    constructor() {\n        this.timestamp = (new Date()).getTime();\n        this.isCompletedPromise = new Promise((resolve) => {\n            this.resolveFn = resolve;\n        });\n    }\n    waitForCompletion() {\n        return this.isCompletedPromise;\n    }\n    complete() {\n        var _a;\n        (_a = this.resolveFn) === null || _a === void 0 ? void 0 : _a.call(this, this);\n    }\n}\nexports.AsyncEvent = AsyncEvent;\nclass FlushEvent extends AsyncEvent {\n}\nexports.FlushEvent = FlushEvent;\nclass ShutdownEvent extends AsyncEvent {\n}\nexports.ShutdownEvent = ShutdownEvent;\nclass PayloadEvent {\n    constructor() {\n        this.timestamp = (new Date()).getTime();\n    }\n    get hash() {\n        return this.timestamp.toString();\n    }\n    toPayload() {\n    }\n    ;\n}\nexports.PayloadEvent = PayloadEvent;\nclass MetricEvent extends PayloadEvent {\n    constructor(user, eventName, appType, metricValue) {\n        super();\n        this.user = user;\n        this.eventName = eventName;\n        this.appType = appType;\n        this.metricValue = metricValue;\n    }\n    userPayload() {\n        return {\n            keyId: this.user.keyId,\n            name: this.user.name,\n            customizedProperties: this.user.customizedProperties\n        };\n    }\n    toPayload() {\n        return {\n            user: this.userPayload(),\n            metrics: [{\n                    route: 'index/metric',\n                    timestamp: this.timestamp,\n                    numericValue: this.metricValue,\n                    appType: this.appType,\n                    eventName: this.eventName,\n                    type: 'CustomEvent'\n                }]\n        };\n    }\n    get hash() {\n        const payload = this.toPayload();\n        const hasObject = {\n            user: payload.user,\n            metrics: payload.metrics.map((m) => (Object.assign(Object.assign({}, m), { timestamp: undefined })))\n        };\n        return JSON.stringify(hasObject);\n    }\n}\nexports.MetricEvent = MetricEvent;\nclass EvalEvent extends PayloadEvent {\n    constructor(user, flagKey, variation, sendToExperiment) {\n        super();\n        this.user = user;\n        this.flagKey = flagKey;\n        this.variation = variation;\n        this.sendToExperiment = sendToExperiment;\n    }\n    userPayload() {\n        return {\n            keyId: this.user.keyId,\n            name: this.user.name,\n            customizedProperties: this.user.customizedProperties\n        };\n    }\n    toPayload() {\n        return {\n            user: this.userPayload(),\n            variations: [{\n                    featureFlagKey: this.flagKey,\n                    sendToExperiment: this.sendToExperiment,\n                    timestamp: this.timestamp,\n                    variation: this.variation\n                }]\n        };\n    }\n    get hash() {\n        const payload = this.toPayload();\n        const hasObject = {\n            user: payload.user,\n            variations: payload.variations.map((m) => (Object.assign(Object.assign({}, m), { timestamp: undefined })))\n        };\n        return JSON.stringify(hasObject);\n    }\n}\nexports.EvalEvent = EvalEvent;\n//# sourceMappingURL=event.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DefaultEventProcessor\"), exports);\n__exportStar(require(\"./DefaultEventQueue\"), exports);\n__exportStar(require(\"./DefaultEventSender\"), exports);\n__exportStar(require(\"./DefaultEventSerializer\"), exports);\n__exportStar(require(\"./event\"), exports);\n__exportStar(require(\"./EventDispatcher\"), exports);\n__exportStar(require(\"./EventSerializer\"), exports);\n__exportStar(require(\"./IEventProcessor\"), exports);\n__exportStar(require(\"./IEventQueue\"), exports);\n__exportStar(require(\"./IEventSender\"), exports);\n__exportStar(require(\"./NullEventProcessor\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./bootstrap\"), exports);\n__exportStar(require(\"./data-sources\"), exports);\n__exportStar(require(\"./evaluation\"), exports);\n__exportStar(require(\"./events\"), exports);\n__exportStar(require(\"./logging\"), exports);\n__exportStar(require(\"./options\"), exports);\n__exportStar(require(\"./platform\"), exports);\n__exportStar(require(\"./store\"), exports);\n__exportStar(require(\"./data-sync\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./Configuration\"), exports);\n__exportStar(require(\"./constants\"), exports);\n__exportStar(require(\"./Context\"), exports);\n__exportStar(require(\"./errors\"), exports);\n__exportStar(require(\"./FbClientBuilder\"), exports);\n__exportStar(require(\"./IContextProperty\"), exports);\n__exportStar(require(\"./IDataKind\"), exports);\n__exportStar(require(\"./IFbClient\"), exports);\n__exportStar(require(\"./IVersionedData\"), exports);\n__exportStar(require(\"./FbClientCore\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BasicLogger = void 0;\nconst format_1 = __importDefault(require(\"./format\"));\nconst LogPriority = {\n    debug: 0,\n    info: 1,\n    warn: 2,\n    error: 3,\n    none: 4,\n};\nconst LevelNames = ['debug', 'info', 'warn', 'error', 'none'];\n/**\n * A basic logger which handles filtering by level.\n *\n * With the default options it will write to `console.error`\n * and it will use the formatting provided by `console.error`.\n * If the destination is overwritten, then it will use an included\n * formatter similar to `util.format`.\n *\n * If a formatter is available, then that should be overridden\n * as well for performance.\n */\nclass BasicLogger {\n    /**\n     * This should only be used as a default fallback and not as a convenient\n     * solution. In most cases you should construct a new instance with the\n     * appropriate options for your specific needs.\n     */\n    static get() {\n        return new BasicLogger({});\n    }\n    constructor(options) {\n        var _a, _b, _c, _d;\n        this.logLevel = (_b = LogPriority[(_a = options.level) !== null && _a !== void 0 ? _a : 'info']) !== null && _b !== void 0 ? _b : LogPriority.info;\n        this.name = (_c = options.name) !== null && _c !== void 0 ? _c : 'FeatBit';\n        // eslint-disable-next-line no-console\n        this.destination = (_d = options.destination) !== null && _d !== void 0 ? _d : console.log;\n        this.formatter = options.formatter;\n    }\n    tryFormat(...args) {\n        var _a;\n        try {\n            if (this.formatter) {\n                // In case the provided formatter fails.\n                return (_a = this.formatter) === null || _a === void 0 ? void 0 : _a.call(this, ...args);\n            }\n            return (0, format_1.default)(...args);\n        }\n        catch (_b) {\n            return (0, format_1.default)(...args);\n        }\n    }\n    tryWrite(msg) {\n        try {\n            this.destination(msg);\n        }\n        catch (_a) {\n            // eslint-disable-next-line no-console\n            console.error(msg);\n        }\n    }\n    log(level, args) {\n        if (level >= this.logLevel) {\n            const prefix = `${LevelNames[level]}: [${this.name}]`;\n            try {\n                if (this.destination) {\n                    this.tryWrite(`${prefix} ${this.tryFormat(...args)}`);\n                }\n                else {\n                    // `console.error` has its own formatter.\n                    // So we don't need to do anything.\n                    // eslint-disable-next-line no-console\n                    console.error(...args);\n                }\n            }\n            catch (_a) {\n                // If all else fails do not break.\n                // eslint-disable-next-line no-console\n                console.error(...args);\n            }\n        }\n    }\n    error(...args) {\n        this.log(LogPriority.error, args);\n    }\n    warn(...args) {\n        this.log(LogPriority.warn, args);\n    }\n    info(...args) {\n        this.log(LogPriority.info, args);\n    }\n    debug(...args) {\n        this.log(LogPriority.debug, args);\n    }\n}\nexports.BasicLogger = BasicLogger;\n//# sourceMappingURL=BasicLogger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IBasicLoggerOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=ILogger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=LogLevel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeLogger = void 0;\nconst Validators_1 = require(\"../options/Validators\");\nconst loggerRequirements = {\n    error: Validators_1.TypeValidators.Function,\n    warn: Validators_1.TypeValidators.Function,\n    info: Validators_1.TypeValidators.Function,\n    debug: Validators_1.TypeValidators.Function,\n};\n/**\n * The safeLogger logic exists because we allow the application to pass in a custom logger, but\n * there is no guarantee that the logger works correctly and if it ever throws exceptions there\n * could be serious consequences (e.g. an uncaught exception within an error event handler, due\n * to the SDK trying to log the error, can terminate the application). An exception could result\n * from faulty logic in the logger implementation, or it could be that this is not a logger at\n * all but some other kind of object; the former is handled by a catch block that logs an error\n * message to the SDK's default logger, and we can at least partly guard against the latter by\n * checking for the presence of required methods at configuration time.\n */\nclass SafeLogger {\n    /**\n     * Construct a safe logger with the specified logger.\n     * @param logger The logger to use.\n     * @param fallback A fallback logger to use in case an issue is  encountered using\n     * the provided logger.\n     */\n    constructor(logger, fallback) {\n        Object.entries(loggerRequirements).forEach(([level, validator]) => {\n            if (!validator.is(logger[level])) {\n                throw new Error(`Provided logger instance must support logger.${level}(...) method`);\n                // Note that the SDK normally does not throw exceptions to the application, but that rule\n                // does not apply to FbClientNode.init() which will throw an exception if the parameters are so\n                // invalid that we cannot proceed with creating the client. An invalid logger meets those\n                // criteria since the SDK calls the logger during nearly all of its operations.\n            }\n        });\n        this.logger = logger;\n        this.fallback = fallback;\n    }\n    log(level, args) {\n        try {\n            this.logger[level](...args);\n        }\n        catch (_a) {\n            // If all else fails do not break.\n            this.fallback[level](...args);\n        }\n    }\n    error(...args) {\n        this.log('error', args);\n    }\n    warn(...args) {\n        this.log('warn', args);\n    }\n    info(...args) {\n        this.log('info', args);\n    }\n    debug(...args) {\n        this.log('debug', args);\n    }\n}\nexports.SafeLogger = SafeLogger;\n//# sourceMappingURL=SafeLogger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Validators_1 = require(\"../options/Validators\");\n/**\n * Attempt to produce a string representation of a value.\n * The format should be roughly comparable to `util.format`\n * aside from object which will be JSON versus the `util.inspect`\n * format.\n * @param val\n * @returns A string representation of the value if possible.\n */\nfunction tryStringify(val) {\n    if (typeof val === 'string') {\n        return val;\n    }\n    if (val === undefined) {\n        return 'undefined';\n    }\n    if (val === null) {\n        return 'null';\n    }\n    if (Object.prototype.hasOwnProperty.call(val, 'toString')) {\n        try {\n            return val.toString();\n        }\n        catch (_a) {\n            /* Keep going */\n        }\n    }\n    if (typeof val === 'bigint') {\n        return `${val}n`;\n    }\n    try {\n        return JSON.stringify(val);\n    }\n    catch (error) {\n        if (error instanceof TypeError && error.message.indexOf('circular') >= 0) {\n            return '[Circular]';\n        }\n        return '[Not Stringifiable]';\n    }\n}\n/**\n * Attempt to produce a numeric representation.\n * BigInts have an `n` suffix.\n * @param val\n * @returns The numeric representation or 'NaN' if not numeric.\n */\nfunction toNumber(val) {\n    // Symbol has to be treated special because it will\n    // throw an exception if an attempt is made to convert it.\n    if (typeof val === 'symbol') {\n        return 'NaN';\n    }\n    if (typeof val === 'bigint') {\n        return `${val}n`;\n    }\n    return String(Number(val));\n}\n/**\n * Attempt to produce an integer representation.\n * BigInts have an `n` suffix.\n * @param val\n * @returns The integer representation or 'NaN' if not numeric.\n */\nfunction toInt(val) {\n    if (typeof val === 'symbol') {\n        return 'NaN';\n    }\n    if (typeof val === 'bigint') {\n        return `${val}n`;\n    }\n    return String(parseInt(val, 10));\n}\n/**\n * Attempt to produce a float representation.\n * BigInts have an `n` suffix.\n * @param val\n * @returns The integer representation or 'NaN' if not numeric.\n */\nfunction toFloat(val) {\n    if (typeof val === 'symbol') {\n        return 'NaN';\n    }\n    return String(parseFloat(val));\n}\n// Based on:\n// https://nodejs.org/api/util.html#utilformatformat-args\n// The result will not match browser exactly, but it should get the\n// right information through.\nconst escapes = {\n    s: (val) => tryStringify(val),\n    d: (val) => toNumber(val),\n    i: (val) => toInt(val),\n    f: (val) => toFloat(val),\n    j: (val) => tryStringify(val),\n    o: (val) => tryStringify(val),\n    O: (val) => tryStringify(val),\n    c: () => '',\n};\n/**\n * A basic formatted for use where `util.format` is not available.\n * This will not be as performant, but it will produce formatted\n * messages.\n *\n * @internal\n *\n * @param args\n * @returns Formatted string.\n */\nfunction format(...args) {\n    var _a;\n    const formatString = args.shift();\n    if (Validators_1.TypeValidators.String.is(formatString)) {\n        let out = '';\n        let i = 0;\n        while (i < formatString.length) {\n            const char = formatString.charAt(i);\n            if (char === '%') {\n                const nextIndex = i + 1;\n                if (nextIndex < formatString.length) {\n                    const nextChar = formatString.charAt(i + 1);\n                    if (nextChar in escapes && args.length) {\n                        const value = args.shift();\n                        // This rule is for math.\n                        // eslint-disable-next-line no-unsafe-optional-chaining\n                        out += (_a = escapes[nextChar]) === null || _a === void 0 ? void 0 : _a.call(escapes, value);\n                    }\n                    else if (nextChar === '%') {\n                        out += '%';\n                    }\n                    else {\n                        out += `%${nextChar}`;\n                    }\n                    i += 2;\n                }\n            }\n            else {\n                out += char;\n                i += 1;\n            }\n        }\n        // If there are any args left after we exhaust the format string\n        // then just stick those on the end.\n        if (args.length) {\n            if (out.length) {\n                out += ' ';\n            }\n            out += args.map(tryStringify).join(' ');\n        }\n        return out;\n    }\n    return args.map(tryStringify).join(' ');\n}\nexports.default = format;\n//# sourceMappingURL=format.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./BasicLogger\"), exports);\n__exportStar(require(\"./format\"), exports);\n__exportStar(require(\"./IBasicLoggerOptions\"), exports);\n__exportStar(require(\"./ILogger\"), exports);\n__exportStar(require(\"./LogLevel\"), exports);\n__exportStar(require(\"./SafeLogger\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The client context provides basic configuration and platform support which are required\n * when building SDK components.\n */\nclass ClientContext {\n    constructor(sdkKey, configuration, platform) {\n        this.sdkKey = sdkKey;\n        this.platform = platform;\n        this.logger = configuration.logger;\n        this.offline = configuration.offline;\n        this.flushInterval = configuration.flushInterval;\n        this.maxEventsInQueue = configuration.maxEventsInQueue;\n        this.streamingUri = configuration.streamingUri;\n        this.pollingUri = configuration.pollingUri;\n        this.eventsUri = configuration.eventsUri;\n    }\n}\nexports.default = ClientContext;\n//# sourceMappingURL=ClientContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IClientContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IUser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IValidatedOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Messages for issues which can be encountered from processing the configuration options.\n */\nclass OptionMessages {\n    static optionBelowMinimum(name, value, min) {\n        return `Config option \"${name}\" had invalid value of ${value}, using minimum of ${min} instead`;\n    }\n    static unknownOption(name) {\n        return `Ignoring unknown config option \"${name}\"`;\n    }\n    static wrongOptionType(name, expectedType, actualType) {\n        return `Config option \"${name}\" should be of type ${expectedType}, got ${actualType}, using default value`;\n    }\n    static wrongOptionTypeBoolean(name, actualType) {\n        return `Config option \"${name}\" should be a boolean, got ${actualType}, converting to boolean`;\n    }\n    static partialEndpoint(name) {\n        return `You have set custom uris without specifying the ${name} URI; connections may not work properly`;\n    }\n    static mandatory(name) {\n        return `${name} is mandatory`;\n    }\n    static invalidOptionValue(name) {\n        return `Invalid option value: ${name}`;\n    }\n    static missingKeyInBootstrapValue(key) {\n        return `Missing key \"${key}\" in bootstrap value`;\n    }\n}\nexports.default = OptionMessages;\n//# sourceMappingURL=OptionMessages.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserBuilder = void 0;\n/**\n * Creates an instance of the FeatBit user.\n *\n * @return\n *   The new {@link IUser} instance.\n */\nclass UserBuilder {\n    constructor(keyId) {\n        this._keyId = '';\n        this._name = '';\n        this._custom = [];\n        this._keyId = keyId;\n    }\n    name(name) {\n        this._name = name;\n        return this;\n    }\n    custom(propertyName, value) {\n        var _a;\n        (_a = this._custom) === null || _a === void 0 ? void 0 : _a.push({ name: propertyName, value: `${value}` });\n        return this;\n    }\n    build() {\n        return {\n            name: this._name,\n            keyId: this._keyId,\n            customizedProperties: this._custom\n        };\n    }\n}\nexports.UserBuilder = UserBuilder;\n//# sourceMappingURL=UserBuilder.js.map","\"use strict\";\n/* eslint-disable class-methods-use-this */\n/* eslint-disable max-classes-per-file */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeValidators = exports.KindValidator = exports.DateValidator = exports.UserValidator = exports.BootstrapValidator = exports.NullableBoolean = exports.Function = exports.StringMatchingRegex = exports.NumberWithMinimum = exports.TypeArray = exports.Type = exports.FactoryOrInstance = void 0;\n// The classes here are static, but needs to be instantiated to\n// support the generic functionality. Which is why we do not care about using\n// `this`\n// These validators are also of trivial complexity, so we are allowing more than\n// one per file.\nconst OptionMessages_1 = __importDefault(require(\"./OptionMessages\"));\n/**\n * Validate a factory or instance.\n */\nclass FactoryOrInstance {\n    is(factoryOrInstance) {\n        if (Array.isArray(factoryOrInstance)) {\n            return false;\n        }\n        const anyFactory = factoryOrInstance;\n        const typeOfFactory = typeof anyFactory;\n        return typeOfFactory === 'function' || typeOfFactory === 'object';\n    }\n    getType() {\n        return 'factory method or object';\n    }\n}\nexports.FactoryOrInstance = FactoryOrInstance;\n/**\n * Validate a basic type.\n */\nclass Type {\n    constructor(typeName, example) {\n        this.typeName = typeName;\n        this.typeOf = typeof example;\n    }\n    is(u) {\n        if (Array.isArray(u)) {\n            return false;\n        }\n        return typeof u === this.typeOf;\n    }\n    getType() {\n        return this.typeName;\n    }\n}\nexports.Type = Type;\n/**\n * Validate an array of the specified type.\n *\n * This does not validate instances of types. All class instances\n * of classes will simply objects.\n */\nclass TypeArray {\n    constructor(typeName, example) {\n        this.typeName = typeName;\n        this.typeOf = typeof example;\n    }\n    is(u) {\n        if (Array.isArray(u)) {\n            if (u.length > 0) {\n                return u.every((val) => typeof val === this.typeOf);\n            }\n            return true;\n        }\n        return false;\n    }\n    getType() {\n        return this.typeName;\n    }\n}\nexports.TypeArray = TypeArray;\n/**\n * Validate a value is a number and is greater or eval than a minimum.\n */\nclass NumberWithMinimum extends Type {\n    constructor(min) {\n        super(`number with minimum value of ${min}`, 0);\n        this.min = min;\n    }\n    is(u) {\n        return typeof u === this.typeOf && u >= this.min;\n    }\n}\nexports.NumberWithMinimum = NumberWithMinimum;\n/**\n * Validate a value is a string and it matches the given expression.\n */\nclass StringMatchingRegex extends Type {\n    constructor(expression) {\n        super(`string matching ${expression}`, '');\n        this.expression = expression;\n    }\n    is(u) {\n        return !!u.match(this.expression);\n    }\n}\nexports.StringMatchingRegex = StringMatchingRegex;\n/**\n * Validate a value is a function.\n */\nclass Function {\n    is(u) {\n        // We cannot inspect the parameters and there isn't really\n        // a generic function type we can instantiate.\n        // So the type guard is here just to make TS comfortable\n        // calling something after using this guard.\n        return typeof u === 'function';\n    }\n    getType() {\n        return 'function';\n    }\n}\nexports.Function = Function;\nclass NullableBoolean {\n    is(u) {\n        return typeof u === 'boolean' || typeof u === 'undefined' || u === null;\n    }\n    getType() {\n        return 'boolean | undefined | null';\n    }\n}\nexports.NullableBoolean = NullableBoolean;\nclass BootstrapValidator {\n    constructor() {\n        this.messages = [];\n    }\n    is(u) {\n        if (typeof u !== 'object' || u === null) {\n            this.messages.push(OptionMessages_1.default.invalidOptionValue('bootstrap'));\n            return false;\n        }\n        try {\n            const bootstrap = u;\n            for (let flag of bootstrap) {\n                const hasMandatoryKeys = ['id', 'variation'].every((key) => Object.keys(flag).includes(key));\n                const keys = Object.keys(flag);\n                if (keys.includes('id')) {\n                    this.messages.push(OptionMessages_1.default.missingKeyInBootstrapValue('id'));\n                }\n                if (keys.includes('variation')) {\n                    this.messages.push(OptionMessages_1.default.missingKeyInBootstrapValue('variation'));\n                }\n                if (this.messages.length > 0) {\n                    return false;\n                }\n            }\n        }\n        catch (_) {\n            this.messages.push(OptionMessages_1.default.wrongOptionType('bootstrap', this.getType(), typeof u));\n            return false;\n        }\n        return true;\n    }\n    getType() {\n        return 'IFlagBase[]';\n    }\n}\nexports.BootstrapValidator = BootstrapValidator;\nclass UserValidator {\n    constructor() {\n        this.messages = [];\n    }\n    is(u) {\n        if (typeof u !== 'object' || u === null) {\n            this.messages.push(OptionMessages_1.default.mandatory('user'));\n            return false;\n        }\n        const user = u;\n        if (typeof user.keyId !== 'string' || user.keyId.trim() === '') {\n            this.messages.push(OptionMessages_1.default.mandatory('user.keyId'));\n            return false;\n        }\n        if (typeof user.name !== 'string' || user.name.trim() === '') {\n            this.messages.push(OptionMessages_1.default.mandatory('user.name'));\n            return false;\n        }\n        return true;\n    }\n    getType() {\n        return 'user';\n    }\n}\nexports.UserValidator = UserValidator;\n// Our reference SDK, Go, parses date/time strings with the time.RFC3339Nano format.\n// This regex should match strings that are valid in that format, and no others.\n// Acceptable:\n//   2019-10-31T23:59:59Z, 2019-10-31T23:59:59.100Z,\n//   2019-10-31T23:59:59-07, 2019-10-31T23:59:59-07:00, etc.\n// Unacceptable: no \"T\", no time zone designation\nconst DATE_REGEX = /^\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d\\d*)?(Z|[-+]\\d\\d(:\\d\\d)?)/;\n/**\n * Validate a value is a date. Values which are numbers are treated as dates and any string\n * which if compliant with `time.RFC3339Nano` is a date.\n */\nclass DateValidator {\n    is(u) {\n        return typeof u === 'number' || (typeof u === 'string' && DATE_REGEX.test(u));\n    }\n    getType() {\n        return 'date';\n    }\n}\nexports.DateValidator = DateValidator;\n/**\n * Validates that a string is a valid kind.\n */\nclass KindValidator extends StringMatchingRegex {\n    constructor() {\n        super(/^(\\w|\\.|-)+$/);\n    }\n    is(u) {\n        return super.is(u) && u !== 'kind';\n    }\n}\nexports.KindValidator = KindValidator;\n/**\n * A set of standard type validators.\n */\nclass TypeValidators {\n    static createTypeArray(typeName, example) {\n        return new TypeArray(typeName, example);\n    }\n    static numberWithMin(min) {\n        return new NumberWithMinimum(min);\n    }\n    static stringMatchingRegex(expression) {\n        return new StringMatchingRegex(expression);\n    }\n}\nexports.TypeValidators = TypeValidators;\nTypeValidators.String = new Type('string', '');\nTypeValidators.Number = new Type('number', 0);\nTypeValidators.ObjectOrFactory = new FactoryOrInstance();\nTypeValidators.Object = new Type('object', {});\nTypeValidators.StringArray = new TypeArray('string[]', '');\nTypeValidators.Boolean = new Type('boolean', true);\nTypeValidators.User = new Type('object', {});\nTypeValidators.Bootstrap = new TypeArray('object[]', []);\nTypeValidators.Function = new Function();\nTypeValidators.Date = new DateValidator();\nTypeValidators.Kind = new KindValidator();\nTypeValidators.NullableBoolean = new NullableBoolean();\n//# sourceMappingURL=Validators.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ClientContext\"), exports);\n__exportStar(require(\"./IClientContext\"), exports);\n__exportStar(require(\"./IOptions\"), exports);\n__exportStar(require(\"./IUser\"), exports);\n__exportStar(require(\"./IValidatedOptions\"), exports);\n__exportStar(require(\"./OptionMessages\"), exports);\n__exportStar(require(\"./UserBuilder\"), exports);\n__exportStar(require(\"./Validators\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IInfo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IPlatform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IWebSocket.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst version_1 = require(\"../../version\");\nclass BrowserInfo {\n    get appType() {\n        return 'Browser-Client-SDK';\n    }\n    platformData() {\n        return {\n            os: {},\n            name: 'Browser',\n            additional: {},\n        };\n    }\n    sdkData() {\n        return {\n            name: version_1.name,\n            version: version_1.version,\n            userAgent: `${this.appType}/${version_1.version}`,\n        };\n    }\n}\nexports.default = BrowserInfo;\n//# sourceMappingURL=BrowserInfo.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserPlatform = void 0;\nconst BrowserInfo_1 = __importDefault(require(\"./BrowserInfo\"));\nconst BrowserRequests_1 = require(\"./BrowserRequests\");\nconst BrowserWebSocket_1 = __importDefault(require(\"./BrowserWebSocket\"));\nclass BrowserPlatform {\n    constructor(options) {\n        this.info = new BrowserInfo_1.default();\n        this.requests = new BrowserRequests_1.BrowserRequests();\n        this.webSocket = new BrowserWebSocket_1.default();\n    }\n}\nexports.BrowserPlatform = BrowserPlatform;\n//# sourceMappingURL=BrowserPlatform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserRequests = void 0;\nclass BrowserRequests {\n    fetch(url, options = {}) {\n        return fetch(url, options);\n    }\n}\nexports.BrowserRequests = BrowserRequests;\n//# sourceMappingURL=BrowserRequests.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Emits_1 = require(\"../../utils/Emits\");\nconst EventEmitter_1 = require(\"../../utils/EventEmitter\");\nconst utils_1 = require(\"../../data-sync/utils\");\nconst types_1 = require(\"../../data-sync/types\");\nconst socketConnectionIntervals = [1000, 3000, 5000, 7000, 11000, 13000, 30000, 60000];\nclass BrowserWebSocket {\n    constructor() {\n        this.retryCounter = 0;\n        this.closed = false;\n        this._config = {};\n        this.emitter = new EventEmitter_1.EventEmitter();\n    }\n    identify(user) {\n        this._config.user = user;\n        this.doDataSync();\n    }\n    connect() {\n        var _a, _b, _c, _d;\n        let that = this;\n        const startTime = Date.now();\n        const url = this._config.streamingUri.replace(/^http/, 'ws') + `?type=client&token=${(0, utils_1.generateConnectionToken)(this._config.sdkKey)}`;\n        this.ws = new WebSocket(url);\n        // Connection opened\n        (_a = that.ws) === null || _a === void 0 ? void 0 : _a.addEventListener('open', function (event) {\n            // this is the websocket instance to which the current listener is binded to, it's different from that.socket\n            that._config.logger.info(`WebSocket connection succeeded, connection time: ${Date.now() - startTime} ms`);\n            that.doDataSync();\n            that.sendPingMessage();\n        });\n        // Connection closed\n        (_b = that.ws) === null || _b === void 0 ? void 0 : _b.addEventListener('close', function (event) {\n            that._config.logger.warn('WebSocket closed');\n            if (event.code === 4003) { // do not reconnect when 4003\n                return;\n            }\n            that.reconnect();\n        });\n        // Connection error\n        (_c = that.ws) === null || _c === void 0 ? void 0 : _c.addEventListener('error', function (event) {\n            // reconnect\n            that._config.logger.debug('error');\n        });\n        // Listen for messages\n        (_d = that.ws) === null || _d === void 0 ? void 0 : _d.addEventListener('message', function (event) {\n            const message = JSON.parse(event.data);\n            if (message.messageType === 'data-sync') {\n                if (message.data.userKeyId !== that._config.user.keyId) {\n                    // abort the message if message is not for the current user\n                    return;\n                }\n                switch (message.data.eventType) {\n                    case types_1.StreamResponseEventType.patch:\n                        that.emitter.emit('patch', message);\n                        break;\n                    case types_1.StreamResponseEventType.full:\n                        that.emitter.emit('put', message);\n                        break;\n                }\n            }\n        });\n    }\n    close() {\n        var _a;\n        this.closed = true;\n        (_a = this.ws) === null || _a === void 0 ? void 0 : _a.close(4003, 'The client is closed by user');\n        this.ws = undefined;\n    }\n    config(param) {\n        if (param.emitter) {\n            this.emitter = param.emitter;\n        }\n        this._config = Object.assign({}, param);\n    }\n    sendPingMessage() {\n        const payload = {\n            messageType: 'ping',\n            data: null\n        };\n        setTimeout(() => {\n            var _a;\n            try {\n                if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.OPEN) {\n                    this._config.logger.debug('sending ping');\n                    this.ws.send(JSON.stringify(payload));\n                    this.sendPingMessage();\n                }\n                else {\n                    this._config.logger.debug(`socket closed at ${new Date()}`);\n                }\n            }\n            catch (err) {\n                this._config.logger.debug(err);\n            }\n        }, this._config.pingInterval);\n    }\n    doDataSync() {\n        var _a, _b;\n        const payload = {\n            messageType: 'data-sync',\n            data: {\n                timestamp: this._config.getStoreTimestamp(),\n                user: this._config.user\n            }\n        };\n        try {\n            if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.OPEN) {\n                this._config.logger.debug('requesting data');\n                (_b = this.ws) === null || _b === void 0 ? void 0 : _b.send(JSON.stringify(payload));\n            }\n            else {\n                this._config.logger.error(`not requesting data because socket not open`);\n            }\n        }\n        catch (err) {\n            this._config.logger.debug(err);\n        }\n    }\n    reconnect() {\n        if (!this.closed) {\n            this.ws = undefined;\n            const waitTime = socketConnectionIntervals[Math.min(this.retryCounter++, socketConnectionIntervals.length - 1)];\n            this._config.logger.info(`The client will try to reconnect in ${waitTime} milliseconds.`);\n            setTimeout(() => {\n                this._config.logger.info(`The client is trying to reconnect, flag evaluation results may be stale until reconnected, waited for: ${waitTime} milliseconds`);\n                this.connect();\n            }, waitTime);\n        }\n    }\n}\nexports.default = (0, Emits_1.Emits)(BrowserWebSocket);\n//# sourceMappingURL=BrowserWebSocket.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst FbClientCore_1 = require(\"../../FbClientCore\");\nconst BasicLogger_1 = require(\"../../logging/BasicLogger\");\nconst EventEmitter_1 = require(\"../../utils/EventEmitter\");\nconst SafeLogger_1 = require(\"../../logging/SafeLogger\");\nconst Emits_1 = require(\"../../utils/Emits\");\nconst BrowserPlatform_1 = require(\"./BrowserPlatform\");\nconst LocalStorageStore_1 = __importDefault(require(\"./LocalStorageStore\"));\n/**\n * @ignore\n */\nclass FbClient extends FbClientCore_1.FbClientCore {\n    constructor(options, platform = undefined) {\n        var _a;\n        const fallbackLogger = new BasicLogger_1.BasicLogger({\n            level: 'none',\n            destination: console.log\n        });\n        let logger;\n        if (options.logger) {\n            logger = new SafeLogger_1.SafeLogger(options.logger, fallbackLogger);\n        }\n        else {\n            logger = new BasicLogger_1.BasicLogger({\n                level: (_a = options.logLevel) !== null && _a !== void 0 ? _a : \"none\",\n                destination: console.log\n            });\n        }\n        const emitter = new EventEmitter_1.EventEmitter(logger);\n        let { store } = options;\n        if (!store) {\n            store = new LocalStorageStore_1.default(options);\n        }\n        super(Object.assign(Object.assign({}, options), { logger, store }), platform !== null && platform !== void 0 ? platform : new BrowserPlatform_1.BrowserPlatform(Object.assign(Object.assign({}, options), { logger })), {\n            onError: (err) => {\n                if (emitter.listenerCount('error')) {\n                    emitter.emit('error', err);\n                }\n            },\n            onFailed: (err) => {\n                emitter.emit('failed', err);\n            },\n            onReady: () => {\n                emitter.emit('ready');\n            },\n            onUpdate: (keys) => {\n                emitter.emit('update', [keys]);\n                keys.forEach((key) => emitter.emit(`update:${key}`, key));\n            },\n            hasEventListeners: () => emitter\n                .eventNames()\n                .some((name) => name === 'update' || (typeof name === 'string' && name.startsWith('update:'))),\n        });\n        this.emitter = emitter;\n    }\n}\nexports.default = (0, Emits_1.Emits)(FbClient);\n//# sourceMappingURL=FbClient.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"../../store/store\");\nconst BaseStore_1 = require(\"../../store/BaseStore\");\nconst serializeUser_1 = require(\"../../utils/serializeUser\");\nclass LocalStorageStore extends BaseStore_1.BaseStore {\n    constructor(options) {\n        super();\n        this.logger = options.logger;\n    }\n    /* eslint-disable class-methods-use-this */\n    close() {\n        // For the LocalStorage store this is a no-op.\n    }\n    get description() {\n        return 'local-storage-store';\n    }\n    // This method needs to be overridden in the child class\n    saveUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n            localStorage.setItem(store_1.CurrentUserStorageKey, (0, serializeUser_1.serializeUser)(this._user));\n        });\n    }\n    dumpStoreToStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            localStorage.setItem(storageKey, JSON.stringify(this.store));\n        });\n    }\n    loadStoreFromStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            const dataStoreStr = localStorage.getItem(storageKey);\n            let store = null;\n            try {\n                if (dataStoreStr && dataStoreStr.trim().length > 0) {\n                    store = JSON.parse(dataStoreStr);\n                }\n            }\n            catch (err) {\n                this.logger.error(`error while loading local data store: ${storageKey}`, err);\n            }\n            if (!!store) {\n                this.store = store;\n            }\n            else {\n                this.store = {\n                    flags: {},\n                    version: 0\n                };\n            }\n        });\n    }\n}\nexports.default = LocalStorageStore;\n//# sourceMappingURL=LocalStorageStore.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserWebSocket = void 0;\n__exportStar(require(\"./IInfo\"), exports);\n__exportStar(require(\"./IStore\"), exports);\n__exportStar(require(\"./IPlatform\"), exports);\n__exportStar(require(\"./IWebSocket\"), exports);\n__exportStar(require(\"./requests\"), exports);\n__exportStar(require(\"./browser/BrowserRequests\"), exports);\nconst BrowserWebSocket_1 = __importDefault(require(\"./browser/BrowserWebSocket\"));\nexports.BrowserWebSocket = BrowserWebSocket_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\n// These are not full specifications of the interface, but instead subsets\n// based on the functionality needed by the SDK. Exposure of the full standard\n// would require much more per platform implementation for platforms that do not\n// natively support fetch.\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=requests.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseStore = void 0;\nclass BaseStore {\n    constructor() {\n        this.store = {};\n        this.initCalled = false;\n        this._user = {};\n    }\n    identify(user) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._user = Object.assign({}, user);\n            yield this.saveUser();\n            yield this.loadStoreFromStorage();\n        });\n    }\n    get user() {\n        return this._user;\n    }\n    addItem(kind, key, item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let items = this.store[kind.namespace];\n            if (!items) {\n                items = {};\n                this.store[kind.namespace] = items;\n            }\n            if (Object.hasOwnProperty.call(items, key)) {\n                const old = items[key];\n                // we use <= here, the reason is that when a segment is changed, the upstream service would push the flag\n                // to client SDK with flag timestamp (version) instead of segment timestamp, so to ensure that the new flag value\n                // is saved, we need to use <=\n                if (!old || old.version <= item.version) {\n                    items[key] = item;\n                }\n            }\n            else {\n                items[key] = item;\n            }\n            if (item.version > this.store.version) {\n                this.store.version = item.version;\n            }\n            yield this.dumpStoreToStorage();\n        });\n    }\n    get(kind, key) {\n        const items = this.store[kind.namespace];\n        if (items) {\n            if (Object.prototype.hasOwnProperty.call(items, key)) {\n                const item = items[key];\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return null;\n    }\n    all(kind) {\n        var _a;\n        const result = {};\n        const items = (_a = this.store[kind.namespace]) !== null && _a !== void 0 ? _a : {};\n        Object.entries(items).forEach(([key, item]) => {\n            if (item) {\n                result[key] = item;\n            }\n        });\n        return [result, this.store.version];\n    }\n    init(allData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.store = allData;\n            Object.keys(allData).map(namespace => {\n                Object.entries(allData[namespace]).forEach(([_, item]) => {\n                    const ele = item;\n                    if (ele.version > this.store.version) {\n                        this.store.version = ele.version;\n                    }\n                });\n            });\n            yield this.dumpStoreToStorage();\n            this.initCalled = true;\n        });\n    }\n    upsert(kind, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.addItem(kind, data.key, data);\n        });\n    }\n    initialized() {\n        return this.initCalled;\n    }\n    /* eslint-disable class-methods-use-this */\n    close() {\n        // For the LocalStorage store this is a no-op.\n    }\n    get version() {\n        return this.store.version;\n    }\n    // This getter needs to be overridden in the child class\n    get description() {\n        return '';\n    }\n    // This method needs to be overridden in the child class\n    saveUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    // This method needs to be overridden in the child class\n    loadStoreFromStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    // This method needs to be overridden in the child class\n    dumpStoreToStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n}\nexports.BaseStore = BaseStore;\n//# sourceMappingURL=BaseStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass DataKinds {\n}\nDataKinds.Flags = {\n    namespace: 'flags'\n};\nexports.default = DataKinds;\n//# sourceMappingURL=DataKinds.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDataSourceUpdates.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"./store\");\nconst BaseStore_1 = require(\"./BaseStore\");\nclass InMemoryStore extends BaseStore_1.BaseStore {\n    constructor() {\n        super();\n        this.allStores = {};\n    }\n    /* eslint-disable class-methods-use-this */\n    close() {\n        // For the LocalStorage store this is a no-op.\n    }\n    get description() {\n        return 'in-memory-store';\n    }\n    saveUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For in-memory store, this is a no-op.\n        });\n    }\n    dumpStoreToStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            this.allStores[storageKey] = Object.assign({}, this.store);\n        });\n    }\n    loadStoreFromStorage() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const storageKey = `${store_1.StoreStorageKey}-${this._user.keyId}`;\n            this.store = (_a = this.allStores[storageKey]) !== null && _a !== void 0 ? _a : { flags: {}, version: 0 };\n        });\n    }\n}\nexports.default = InMemoryStore;\n//# sourceMappingURL=InMemoryStore.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DataKinds\"), exports);\n__exportStar(require(\"./IDataSourceUpdates\"), exports);\n__exportStar(require(\"./InMemoryStore\"), exports);\n__exportStar(require(\"./serialization\"), exports);\n__exportStar(require(\"./store\"), exports);\n__exportStar(require(\"./BaseStore\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deserializePatch = exports.deserializeAll = void 0;\nconst DataKinds_1 = __importDefault(require(\"./DataKinds\"));\n/**\n * @internal\n */\nfunction deserializeAll(flags) {\n    const result = {\n        [DataKinds_1.default.Flags.namespace]: {}\n    };\n    if (flags === null || flags === void 0 ? void 0 : flags.length) {\n        result[DataKinds_1.default.Flags.namespace] = flags.reduce((acc, cur) => {\n            acc[cur.id] = Object.assign(Object.assign({}, cur), { version: cur.timestamp || 0, key: cur.id, variations: cur.variationOptions });\n            return acc;\n        }, {});\n    }\n    return result;\n}\nexports.deserializeAll = deserializeAll;\n/**\n * @internal\n */\nfunction deserializePatch(flags) {\n    const result = [\n        ...(flags === null || flags === void 0 ? void 0 : flags.map(item => ({\n            data: Object.assign(Object.assign({}, item), { version: item.timestamp, key: item.id, variations: item.variationOptions }),\n            kind: DataKinds_1.default.Flags\n        }))) || []\n    ];\n    return result;\n}\nexports.deserializePatch = deserializePatch;\n//# sourceMappingURL=serialization.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StoreItemOriginEnum = exports.CurrentUserStorageKey = exports.StoreStorageKey = void 0;\nexports.StoreStorageKey = 'fb-datastore';\nexports.CurrentUserStorageKey = 'fb-user';\nvar StoreItemOriginEnum;\n(function (StoreItemOriginEnum) {\n    StoreItemOriginEnum[\"Local\"] = \"Local\";\n    StoreItemOriginEnum[\"Remote\"] = \"Remote\";\n})(StoreItemOriginEnum || (exports.StoreItemOriginEnum = StoreItemOriginEnum = {}));\n//# sourceMappingURL=store.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emits = void 0;\n/**\n * Adds the implementation of an event emitter to something that contains\n * a field of `emitter` with type `EventEmitter`.\n * @param Base The class to derive the mixin from.\n * @returns A class extending the base with an event emitter.\n */\nfunction Emits(Base) {\n    return class WithEvents extends Base {\n        on(eventName, listener, context) {\n            this.emitter.on(eventName, listener, context);\n            return this;\n        }\n        addListener(eventName, listener, context) {\n            this.emitter.addListener(eventName, listener, context);\n            return this;\n        }\n        once(eventName, listener, context) {\n            this.emitter.once(eventName, listener, context);\n            return this;\n        }\n        removeListener(eventName, listener, context) {\n            this.emitter.removeListener(eventName, listener, context);\n            return this;\n        }\n        off(eventName, listener, context) {\n            this.emitter.off(eventName, listener, context);\n            return this;\n        }\n        removeAllListeners(event) {\n            this.emitter.removeAllListeners(event);\n            return this;\n        }\n        listeners(eventName) {\n            return this.emitter.listeners(eventName);\n        }\n        emit(eventName, ...args) {\n            this.emitter.emit(eventName, args);\n            return this;\n        }\n        listenerCount(eventName) {\n            return this.emitter.listenerCount(eventName);\n        }\n        prependListener(eventName, listener, context) {\n            this.emitter.prependListener(eventName, listener, context);\n            return this;\n        }\n        prependOnceListener(eventName, listener, context) {\n            this.emitter.prependOnceListener(eventName, listener, context);\n            return this;\n        }\n        eventNames() {\n            return this.emitter.eventNames();\n        }\n        maybeReportError(error) {\n            this.emitter.maybeReportError(error);\n            return this;\n        }\n    };\n}\nexports.Emits = Emits;\n//# sourceMappingURL=Emits.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor(logger) {\n        this.logger = logger;\n        this.events = {};\n    }\n    listeningTo(event) {\n        return !!this.events[event];\n    }\n    on(event, handler, context) {\n        this.events[event] = this.events[event] || [];\n        this.events[event] = this.events[event].concat({\n            handler: handler,\n            context: context,\n        });\n        return this;\n    }\n    addListener(event, handler, context) {\n        return this.on(event, handler, context);\n    }\n    once(event, handler, context) {\n        const onceHandler = (...args) => {\n            this.off(event, onceHandler, context);\n            handler.apply(context, args);\n        };\n        return this.on(event, onceHandler, context);\n    }\n    off(event, handler, context) {\n        if (!this.events[event]) {\n            return this;\n        }\n        for (let i = 0; i < this.events[event].length; i++) {\n            if (this.events[event][i].handler === handler && this.events[event][i].context === context) {\n                this.events[event] = this.events[event].slice(0, i).concat(this.events[event].slice(i + 1));\n            }\n        }\n        return this;\n    }\n    removeListener(event, handler, context) {\n        return this.off(event, handler, context);\n    }\n    removeAllListeners(event) {\n        if (event) {\n            delete this.events[event];\n        }\n        else {\n            this.events = {};\n        }\n        return this;\n    }\n    listeners(event) {\n        return this.events[event] ? this.events[event].map((event) => event.handler) : [];\n    }\n    emit(event, ...args) {\n        if (!this.events[event]) {\n            return this;\n        }\n        // Copy the list of handlers before iterating, in case any handler adds or removes another handler.\n        // Any such changes should not affect what we do here-- we want to notify every handler that existed\n        // at the moment that the event was fired.\n        const copiedHandlers = [...this.events[event]];\n        for (let i = 0; i < copiedHandlers.length; i++) {\n            copiedHandlers[i].handler.apply(copiedHandlers[i].context, Array.prototype.slice.call(arguments, 1));\n        }\n        return this;\n    }\n    listenerCount(event) {\n        return this.events[event] ? this.events[event].length : 0;\n    }\n    prependListener(event, handler, context) {\n        this.events[event] = this.events[event] || [];\n        this.events[event] = [\n            {\n                handler: handler,\n                context: context,\n            },\n            ...this.events[event]\n        ];\n        return this;\n    }\n    prependOnceListener(event, handler, context) {\n        const onceHandler = (...args) => {\n            this.off(event, onceHandler, context);\n            handler.apply(context, args);\n        };\n        return this.prependListener(event, onceHandler, context);\n    }\n    eventNames() {\n        return Object.keys(this.events);\n    }\n    maybeReportError(error) {\n        var _a;\n        if (!error) {\n            return this;\n        }\n        if (this.listeningTo('error')) {\n            this.emit('error', error);\n        }\n        else {\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.error(error);\n        }\n        return this;\n    }\n}\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueConverters = void 0;\nclass ValueConverters {\n    static bool(value) {\n        if ((value === null || value === void 0 ? void 0 : value.toUpperCase()) === 'TRUE') {\n            return ValueConverters.success(true);\n        }\n        if ((value === null || value === void 0 ? void 0 : value.toUpperCase()) === 'FALSE') {\n            return ValueConverters.success(false);\n        }\n        return ValueConverters.error();\n    }\n    static number(value) {\n        const num = Number(value);\n        if (Number.isNaN(num)) {\n            return ValueConverters.error();\n        }\n        return ValueConverters.success(num);\n    }\n    static string(value) {\n        return ValueConverters.success(value);\n    }\n    static json(value) {\n        try {\n            const val = JSON.parse(value);\n            return ValueConverters.success(val);\n        }\n        catch (err) {\n            return ValueConverters.error();\n        }\n    }\n    static success(value) {\n        return {\n            isSucceeded: true,\n            value: value\n        };\n    }\n    static error() {\n        return {\n            isSucceeded: false\n        };\n    }\n}\nexports.ValueConverters = ValueConverters;\n//# sourceMappingURL=ValueConverters.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=VoidFunction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalizeUri = void 0;\n// This function is designed to remove any trailing forward slashes at the end of the provided URI string\nfunction canonicalizeUri(uri) {\n    return uri.replace(/\\/+$/, '');\n}\nexports.canonicalizeUri = canonicalizeUri;\n//# sourceMappingURL=canonicalizeUri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.debounce = void 0;\n/**\n * Wait before calling the same function. Useful for expensive calls.\n * Adapted from https://amitd.co/code/typescript/debounce.\n *\n * @return The debounced function.\n *\n * @example\n *\n * ```js\n * const debouncedFunction = debounce(e => {\n *   console.log(e);\n * }, 5000);\n *\n * // Console logs 'Hello world again ' after 5 seconds\n * debouncedFunction('Hello world');\n * debouncedFunction('Hello world again');\n * ```\n * @param fn The function to be debounced.\n * @param delayMs Defaults to 5 seconds.\n */\nconst debounce = (fn, delayMs = 5000) => {\n    let timer;\n    return (...args) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            fn(...args);\n        }, delayMs);\n    };\n};\nexports.debounce = debounce;\n//# sourceMappingURL=debounce.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.httpErrorMessage = exports.defaultHeaders = void 0;\nfunction defaultHeaders(sdkKey, info) {\n    const { userAgent, version } = info.sdkData();\n    const headers = {\n        'Content-Type': 'application/json',\n        'X-User-Agent': userAgent !== null && userAgent !== void 0 ? userAgent : `${info.appType}/${version}`,\n        'Authorization': sdkKey\n    };\n    return headers;\n}\nexports.defaultHeaders = defaultHeaders;\nfunction httpErrorMessage(err, context, retryMessage) {\n    let desc;\n    if (err.status) {\n        desc = `error ${err.status}${err.status === 401 ? ' (invalid SDK key)' : ''}`;\n    }\n    else {\n        desc = `I/O error (${err.message || err})`;\n    }\n    const action = retryMessage !== null && retryMessage !== void 0 ? retryMessage : 'giving up permanently';\n    return `Received ${desc} for ${context} - ${action}`;\n}\nexports.httpErrorMessage = httpErrorMessage;\n//# sourceMappingURL=http.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./isNullOrUndefined\"), exports);\n__exportStar(require(\"./sleep\"), exports);\n__exportStar(require(\"./ValueConverters\"), exports);\n__exportStar(require(\"./VoidFunction\"), exports);\n__exportStar(require(\"./serializeUser\"), exports);\n__exportStar(require(\"./debounce\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNullOrUndefined = void 0;\nfunction isNullOrUndefined(val) {\n    return val === null || val === undefined;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n//# sourceMappingURL=isNullOrUndefined.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeUser = void 0;\nfunction serializeUser(user) {\n    var _a;\n    if (!user) {\n        return '';\n    }\n    const builtInProperties = `${user.keyId},${user.name}`;\n    const customizedProperties = (_a = user.customizedProperties) === null || _a === void 0 ? void 0 : _a.sort((a, b) => {\n        const nameA = a.name.toLowerCase();\n        const nameB = b.name.toLowerCase();\n        if (nameA < nameB) {\n            return -1;\n        }\n        if (nameA > nameB) {\n            return 1;\n        }\n        return 0;\n    }).map(p => `${p.name}:${p.value}`).join(',');\n    return `${builtInProperties},${customizedProperties}`;\n}\nexports.serializeUser = serializeUser;\n//# sourceMappingURL=serializeUser.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sleep = (delayMillis = 1000) => __awaiter(void 0, void 0, void 0, function* () {\n    return new Promise((resolve) => {\n        setTimeout(resolve, delayMillis);\n    });\n});\nexports.default = sleep;\n//# sourceMappingURL=sleep.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.name = exports.version = void 0;\nexports.version = \"4.2.3\";\nexports.name = \"@featbit/js-client-sdk\";\n//# sourceMappingURL=version.js.map","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  AllProviderEvents: () => ClientProviderEvents,\n  ClientProviderEvents: () => ClientProviderEvents,\n  DefaultLogger: () => DefaultLogger,\n  ErrorCode: () => ErrorCode,\n  FlagNotFoundError: () => FlagNotFoundError,\n  GeneralError: () => GeneralError,\n  GenericEventEmitter: () => GenericEventEmitter,\n  InvalidContextError: () => InvalidContextError,\n  LOG_LEVELS: () => LOG_LEVELS,\n  OpenFeatureCommonAPI: () => OpenFeatureCommonAPI,\n  OpenFeatureError: () => OpenFeatureError,\n  ParseError: () => ParseError,\n  ProviderNotReadyError: () => ProviderNotReadyError,\n  ProviderStatus: () => ProviderStatus,\n  SafeLogger: () => SafeLogger,\n  ServerProviderEvents: () => ServerProviderEvents,\n  StandardResolutionReasons: () => StandardResolutionReasons,\n  TargetingKeyMissingError: () => TargetingKeyMissingError,\n  TypeMismatchError: () => TypeMismatchError,\n  isObject: () => isObject,\n  isString: () => isString,\n  objectOrUndefined: () => objectOrUndefined,\n  statusMatchesEvent: () => statusMatchesEvent,\n  stringOrUndefined: () => stringOrUndefined\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/errors/open-feature-error-abstract.ts\nvar OpenFeatureError = class extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, OpenFeatureError.prototype);\n    this.name = \"OpenFeatureError\";\n  }\n};\n\n// src/evaluation/evaluation.ts\nvar StandardResolutionReasons = {\n  /**\n   * The resolved value was the result of a dynamic evaluation, such as a rule or specific user-targeting.\n   */\n  TARGETING_MATCH: \"TARGETING_MATCH\",\n  /**\n   * The resolved value was the result of pseudorandom assignment.\n   */\n  SPLIT: \"SPLIT\",\n  /**\n   * The resolved value was the result of the flag being disabled in the management system.\n   */\n  DISABLED: \"DISABLED\",\n  /**\n   *  The resolved value was configured statically, or otherwise fell back to a pre-configured value.\n   */\n  DEFAULT: \"DEFAULT\",\n  /**\n   * The reason for the resolved value could not be determined.\n   */\n  UNKNOWN: \"UNKNOWN\",\n  /**\n   * The resolved value is static (no dynamic evaluation).\n   */\n  STATIC: \"STATIC\",\n  /**\n   * The resolved value was retrieved from cache.\n   */\n  CACHED: \"CACHED\",\n  /**\n   * The resolved value was the result of an error.\n   *\n   * Note: The `errorCode` and `errorMessage` fields may contain additional details of this error.\n   */\n  ERROR: \"ERROR\"\n};\nvar ErrorCode = /* @__PURE__ */ ((ErrorCode2) => {\n  ErrorCode2[\"PROVIDER_NOT_READY\"] = \"PROVIDER_NOT_READY\";\n  ErrorCode2[\"FLAG_NOT_FOUND\"] = \"FLAG_NOT_FOUND\";\n  ErrorCode2[\"PARSE_ERROR\"] = \"PARSE_ERROR\";\n  ErrorCode2[\"TYPE_MISMATCH\"] = \"TYPE_MISMATCH\";\n  ErrorCode2[\"TARGETING_KEY_MISSING\"] = \"TARGETING_KEY_MISSING\";\n  ErrorCode2[\"INVALID_CONTEXT\"] = \"INVALID_CONTEXT\";\n  ErrorCode2[\"GENERAL\"] = \"GENERAL\";\n  return ErrorCode2;\n})(ErrorCode || {});\n\n// src/errors/general-error.ts\nvar GeneralError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, GeneralError.prototype);\n    this.name = \"GeneralError\";\n    this.code = \"GENERAL\" /* GENERAL */;\n  }\n};\n\n// src/errors/flag-not-found-error.ts\nvar FlagNotFoundError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, FlagNotFoundError.prototype);\n    this.name = \"FlagNotFoundError\";\n    this.code = \"FLAG_NOT_FOUND\" /* FLAG_NOT_FOUND */;\n  }\n};\n\n// src/errors/parse-error.ts\nvar ParseError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ParseError.prototype);\n    this.name = \"ParseError\";\n    this.code = \"PARSE_ERROR\" /* PARSE_ERROR */;\n  }\n};\n\n// src/errors/type-mismatch-error.ts\nvar TypeMismatchError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TypeMismatchError.prototype);\n    this.name = \"TypeMismatchError\";\n    this.code = \"TYPE_MISMATCH\" /* TYPE_MISMATCH */;\n  }\n};\n\n// src/errors/targeting-key-missing-error.ts\nvar TargetingKeyMissingError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, TargetingKeyMissingError.prototype);\n    this.name = \"TargetingKeyMissingError\";\n    this.code = \"TARGETING_KEY_MISSING\" /* TARGETING_KEY_MISSING */;\n  }\n};\n\n// src/errors/invalid-context-error.ts\nvar InvalidContextError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, InvalidContextError.prototype);\n    this.name = \"InvalidContextError\";\n    this.code = \"INVALID_CONTEXT\" /* INVALID_CONTEXT */;\n  }\n};\n\n// src/errors/provider-not-ready-error.ts\nvar ProviderNotReadyError = class extends OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, ProviderNotReadyError.prototype);\n    this.name = \"ProviderNotReadyError\";\n    this.code = \"PROVIDER_NOT_READY\" /* PROVIDER_NOT_READY */;\n  }\n};\n\n// src/provider/provider.ts\nvar ProviderStatus = /* @__PURE__ */ ((ProviderStatus2) => {\n  ProviderStatus2[\"NOT_READY\"] = \"NOT_READY\";\n  ProviderStatus2[\"READY\"] = \"READY\";\n  ProviderStatus2[\"ERROR\"] = \"ERROR\";\n  ProviderStatus2[\"STALE\"] = \"STALE\";\n  return ProviderStatus2;\n})(ProviderStatus || {});\n\n// src/events/events.ts\nvar ServerProviderEvents = /* @__PURE__ */ ((ServerProviderEvents2) => {\n  ServerProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ServerProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ServerProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ServerProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ServerProviderEvents2;\n})(ServerProviderEvents || {});\nvar ClientProviderEvents = /* @__PURE__ */ ((ClientProviderEvents2) => {\n  ClientProviderEvents2[\"Ready\"] = \"PROVIDER_READY\";\n  ClientProviderEvents2[\"Error\"] = \"PROVIDER_ERROR\";\n  ClientProviderEvents2[\"ConfigurationChanged\"] = \"PROVIDER_CONFIGURATION_CHANGED\";\n  ClientProviderEvents2[\"ContextChanged\"] = \"PROVIDER_CONTEXT_CHANGED\";\n  ClientProviderEvents2[\"Stale\"] = \"PROVIDER_STALE\";\n  return ClientProviderEvents2;\n})(ClientProviderEvents || {});\n\n// src/events/event-utils.ts\nvar eventStatusMap = {\n  [\"READY\" /* READY */]: \"PROVIDER_READY\" /* Ready */,\n  [\"ERROR\" /* ERROR */]: \"PROVIDER_ERROR\" /* Error */,\n  [\"STALE\" /* STALE */]: \"PROVIDER_STALE\" /* Stale */,\n  [\"NOT_READY\" /* NOT_READY */]: void 0\n};\nvar statusMatchesEvent = (event, status) => {\n  return !status && event === \"PROVIDER_READY\" /* Ready */ || eventStatusMap[status] === event;\n};\n\n// src/logger/default-logger.ts\nvar DefaultLogger = class {\n  error(...args) {\n    console.error(...args);\n  }\n  warn(...args) {\n    console.warn(...args);\n  }\n  info() {\n  }\n  debug() {\n  }\n};\n\n// src/logger/safe-logger.ts\nvar LOG_LEVELS = [\"error\", \"warn\", \"info\", \"debug\"];\nvar SafeLogger = class {\n  constructor(logger) {\n    this.fallbackLogger = new DefaultLogger();\n    try {\n      for (const level of LOG_LEVELS) {\n        if (!logger[level] || typeof logger[level] !== \"function\") {\n          throw new Error(`The provided logger is missing the ${level} method.`);\n        }\n      }\n      this.logger = logger;\n    } catch (err) {\n      console.error(err);\n      console.error(\"Falling back to the default logger.\");\n      this.logger = this.fallbackLogger;\n    }\n  }\n  error(...args) {\n    this.log(\"error\", ...args);\n  }\n  warn(...args) {\n    this.log(\"warn\", ...args);\n  }\n  info(...args) {\n    this.log(\"info\", ...args);\n  }\n  debug(...args) {\n    this.log(\"debug\", ...args);\n  }\n  log(level, ...args) {\n    try {\n      this.logger[level](...args);\n    } catch (error) {\n      this.fallbackLogger[level](...args);\n    }\n  }\n};\n\n// src/events/generic-event-emitter.ts\nvar GenericEventEmitter = class {\n  constructor(globalLogger) {\n    this.globalLogger = globalLogger;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._handlers = /* @__PURE__ */ new WeakMap();\n  }\n  // here we use E, to restrict the events a provider can manually emit (PROVIDER_CONTEXT_CHANGED is emitted by the SDK)\n  emit(eventType, context) {\n    this.eventEmitter.emit(eventType, context);\n  }\n  addHandler(eventType, handler) {\n    const asyncHandler = (details) => __async(this, null, function* () {\n      yield handler(details);\n    });\n    this._handlers.set(handler, asyncHandler);\n    this.eventEmitter.on(eventType, asyncHandler);\n  }\n  removeHandler(eventType, handler) {\n    const asyncHandler = this._handlers.get(handler);\n    if (!asyncHandler) {\n      return;\n    }\n    this.eventEmitter.removeListener(eventType, asyncHandler);\n  }\n  removeAllHandlers(eventType) {\n    if (eventType) {\n      this.eventEmitter.removeAllListeners(eventType);\n    } else {\n      this.eventEmitter.removeAllListeners();\n    }\n  }\n  getHandlers(eventType) {\n    return this.eventEmitter.listeners(eventType);\n  }\n  setLogger(logger) {\n    this._eventLogger = new SafeLogger(logger);\n    return this;\n  }\n  get _logger() {\n    var _a, _b;\n    return (_b = this._eventLogger) != null ? _b : (_a = this.globalLogger) == null ? void 0 : _a.call(this);\n  }\n};\n\n// src/type-guards.ts\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nfunction stringOrUndefined(value) {\n  return isString(value) ? value : void 0;\n}\nfunction isObject(value) {\n  return typeof value === \"object\";\n}\nfunction objectOrUndefined(value) {\n  return isObject(value) ? value : void 0;\n}\n\n// src/filter.ts\nfunction isDefined(input) {\n  return typeof input !== \"undefined\" && input !== null;\n}\n\n// src/open-feature.ts\nvar OpenFeatureCommonAPI = class {\n  constructor(category) {\n    this._hooks = [];\n    this._context = {};\n    this._logger = new DefaultLogger();\n    this._clientEventHandlers = /* @__PURE__ */ new Map();\n    this._clientProviders = /* @__PURE__ */ new Map();\n    this._clientEvents = /* @__PURE__ */ new Map();\n    this._runsOn = category;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  setLogger(logger) {\n    this._logger = new SafeLogger(logger);\n    return this;\n  }\n  /**\n   * Get metadata about the default provider.\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  get providerMetadata() {\n    return this.getProviderMetadata();\n  }\n  /**\n   * Get metadata about a registered provider using the client name.\n   * An unbound or empty client name will return metadata from the default provider.\n   * @param {string} [clientName] The name to identify the client\n   * @returns {ProviderMetadata} Provider Metadata\n   */\n  getProviderMetadata(clientName) {\n    return this.getProviderForClient(clientName).metadata;\n  }\n  /**\n   * Adds a handler for the given provider event type.\n   * The handlers are called in the order they have been added.\n   * API (global) events run for all providers.\n   * @param {AnyProviderEvent} eventType The provider event type to listen to\n   * @param {EventHandler} handler The handler to run on occurrence of the event type\n   */\n  addHandler(eventType, handler) {\n    [.../* @__PURE__ */ new Map([[void 0, this._defaultProvider]]), ...this._clientProviders].forEach((keyProviderTuple) => {\n      var _a;\n      const clientName = keyProviderTuple[0];\n      const provider = keyProviderTuple[1];\n      const shouldRunNow = statusMatchesEvent(eventType, keyProviderTuple[1].status);\n      if (shouldRunNow) {\n        try {\n          handler({ clientName, providerName: provider.metadata.name });\n        } catch (err) {\n          (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n        }\n      }\n    });\n    this._events.addHandler(eventType, handler);\n  }\n  /**\n   * Removes a handler for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to remove the listener for\n   * @param {EventHandler} handler The handler to remove for the provider event type\n   */\n  removeHandler(eventType, handler) {\n    this._events.removeHandler(eventType, handler);\n  }\n  /**\n   * Removes all event handlers.\n   */\n  clearHandlers() {\n    this._events.removeAllHandlers();\n  }\n  /**\n   * Gets the current handlers for the given provider event type.\n   * @param {AnyProviderEvent} eventType The provider event type to get the current handlers for\n   * @returns {EventHandler[]} The handlers currently attached to the given provider event type\n   */\n  getHandlers(eventType) {\n    return this._events.getHandlers(eventType);\n  }\n  setProviderAndWait(clientOrProvider, providerOrUndefined) {\n    return __async(this, null, function* () {\n      yield this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    });\n  }\n  setProvider(clientOrProvider, providerOrUndefined) {\n    const maybePromise = this.setAwaitableProvider(clientOrProvider, providerOrUndefined);\n    if (maybePromise) {\n      maybePromise.catch(() => {\n      });\n    }\n    return this;\n  }\n  setAwaitableProvider(clientOrProvider, providerOrUndefined) {\n    var _a, _b, _c, _d, _e, _f;\n    const clientName = stringOrUndefined(clientOrProvider);\n    const provider = (_a = objectOrUndefined(clientOrProvider)) != null ? _a : objectOrUndefined(providerOrUndefined);\n    if (!provider) {\n      this._logger.debug(\"No provider defined, ignoring setProvider call\");\n      return;\n    }\n    const oldProvider = this.getProviderForClient(clientName);\n    const providerName = provider.metadata.name;\n    if (oldProvider === provider) {\n      this._logger.debug(\"Provider is already set, ignoring setProvider call\");\n      return;\n    }\n    if (!provider.runsOn) {\n      this._logger.debug(`Provider '${provider.metadata.name}' has not defined its intended use.`);\n    } else if (provider.runsOn !== this._runsOn) {\n      throw new GeneralError(`Provider '${provider.metadata.name}' is intended for use on the ${provider.runsOn}.`);\n    }\n    const emitters = this.getAssociatedEventEmitters(clientName);\n    if (typeof provider.initialize === \"function\" && provider.status === void 0) {\n      const activeLogger = this._logger || console;\n      activeLogger.warn(\n        `Provider ${providerName} implements 'initialize' but not 'status'. Please implement 'status'.`\n      );\n    }\n    let initializationPromise = void 0;\n    if ((provider == null ? void 0 : provider.status) === \"NOT_READY\" /* NOT_READY */ && typeof provider.initialize === \"function\") {\n      initializationPromise = (_d = (_c = (_b = provider.initialize) == null ? void 0 : _b.call(provider, this._context)) == null ? void 0 : _c.then(() => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      })) == null ? void 0 : _d.catch((error) => {\n        var _a2;\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        });\n        (_a2 = this._events) == null ? void 0 : _a2.emit(\"PROVIDER_ERROR\" /* Error */, { clientName, providerName, message: error == null ? void 0 : error.message });\n        throw error;\n      });\n    } else {\n      emitters.forEach((emitter) => {\n        emitter == null ? void 0 : emitter.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n      });\n      (_e = this._events) == null ? void 0 : _e.emit(\"PROVIDER_READY\" /* Ready */, { clientName, providerName });\n    }\n    if (clientName) {\n      this._clientProviders.set(clientName, provider);\n    } else {\n      this._defaultProvider = provider;\n    }\n    this.transferListeners(oldProvider, provider, clientName, emitters);\n    if (![...this._clientProviders.values(), this._defaultProvider].includes(oldProvider)) {\n      (_f = oldProvider == null ? void 0 : oldProvider.onClose) == null ? void 0 : _f.call(oldProvider);\n    }\n    return initializationPromise;\n  }\n  getProviderForClient(name) {\n    var _a;\n    if (!name) {\n      return this._defaultProvider;\n    }\n    return (_a = this._clientProviders.get(name)) != null ? _a : this._defaultProvider;\n  }\n  buildAndCacheEventEmitterForClient(name) {\n    const emitter = this._clientEvents.get(name);\n    if (emitter) {\n      return emitter;\n    }\n    const newEmitter = this._createEventEmitter();\n    this._clientEvents.set(name, newEmitter);\n    const clientProvider = this.getProviderForClient(name);\n    Object.values(ClientProviderEvents).forEach(\n      (eventType) => {\n        var _a;\n        return (_a = clientProvider.events) == null ? void 0 : _a.addHandler(eventType, (details) => __async(this, null, function* () {\n          newEmitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName: name, providerName: clientProvider.metadata.name }));\n        }));\n      }\n    );\n    return newEmitter;\n  }\n  getUnboundEmitters() {\n    const namedProviders = [...this._clientProviders.keys()];\n    const eventEmitterNames = [...this._clientEvents.keys()].filter(isDefined);\n    const unboundEmitterNames = eventEmitterNames.filter((name) => !namedProviders.includes(name));\n    return [\n      // all unbound, named emitters\n      ...unboundEmitterNames.map((name) => this._clientEvents.get(name)),\n      // the default emitter\n      this._clientEvents.get(void 0)\n    ].filter(isDefined);\n  }\n  getAssociatedEventEmitters(clientName) {\n    return clientName ? [this.buildAndCacheEventEmitterForClient(clientName)] : this.getUnboundEmitters();\n  }\n  transferListeners(oldProvider, newProvider, clientName, emitters) {\n    var _a;\n    (_a = this._clientEventHandlers.get(clientName)) == null ? void 0 : _a.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = oldProvider.events) == null ? void 0 : _a2.removeHandler(...eventHandler);\n    });\n    const newClientHandlers = Object.values(ClientProviderEvents).map((eventType) => {\n      const handler = (details) => __async(this, null, function* () {\n        emitters.forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n        });\n        this._events.emit(eventType, __spreadProps(__spreadValues({}, details), { clientName, providerName: newProvider.metadata.name }));\n      });\n      return [eventType, handler];\n    });\n    this._clientEventHandlers.set(clientName, newClientHandlers);\n    newClientHandlers.forEach((eventHandler) => {\n      var _a2;\n      return (_a2 = newProvider.events) == null ? void 0 : _a2.addHandler(...eventHandler);\n    });\n  }\n  close() {\n    return __async(this, null, function* () {\n      var _a, _b;\n      try {\n        yield (_b = (_a = this == null ? void 0 : this._defaultProvider) == null ? void 0 : _a.onClose) == null ? void 0 : _b.call(_a);\n      } catch (err) {\n        this.handleShutdownError(this._defaultProvider, err);\n      }\n      const providers = Array.from(this._clientProviders);\n      yield Promise.all(\n        providers.map((_0) => __async(this, [_0], function* ([, provider]) {\n          var _a2;\n          try {\n            yield (_a2 = provider.onClose) == null ? void 0 : _a2.call(provider);\n          } catch (err) {\n            this.handleShutdownError(provider, err);\n          }\n        }))\n      );\n    });\n  }\n  clearProvidersAndSetDefault(defaultProvider) {\n    return __async(this, null, function* () {\n      try {\n        yield this.close();\n      } catch (err) {\n        this._logger.error(\"Unable to cleanly close providers. Resetting to the default configuration.\");\n      } finally {\n        this._clientProviders.clear();\n        this._defaultProvider = defaultProvider;\n      }\n    });\n  }\n  handleShutdownError(provider, err) {\n    this._logger.error(`Error during shutdown of provider ${provider.metadata.name}: ${err}`);\n    this._logger.error(err == null ? void 0 : err.stack);\n  }\n};\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __reflectGet = Reflect.get;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __superGet = (cls, obj, key) => __reflectGet(__getProtoOf(cls), key, obj);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/events/events.js\nvar require_events = __commonJS({\n  \"../../node_modules/events/events.js\"(exports, module2) {\n    \"use strict\";\n    var R = typeof Reflect === \"object\" ? Reflect : null;\n    var ReflectApply = R && typeof R.apply === \"function\" ? R.apply : function ReflectApply2(target, receiver, args) {\n      return Function.prototype.apply.call(target, receiver, args);\n    };\n    var ReflectOwnKeys;\n    if (R && typeof R.ownKeys === \"function\") {\n      ReflectOwnKeys = R.ownKeys;\n    } else if (Object.getOwnPropertySymbols) {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n      };\n    } else {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target);\n      };\n    }\n    function ProcessEmitWarning(warning) {\n      if (console && console.warn)\n        console.warn(warning);\n    }\n    var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {\n      return value !== value;\n    };\n    function EventEmitter2() {\n      EventEmitter2.init.call(this);\n    }\n    module2.exports = EventEmitter2;\n    module2.exports.once = once;\n    EventEmitter2.EventEmitter = EventEmitter2;\n    EventEmitter2.prototype._events = void 0;\n    EventEmitter2.prototype._eventsCount = 0;\n    EventEmitter2.prototype._maxListeners = void 0;\n    var defaultMaxListeners = 10;\n    function checkListener(listener) {\n      if (typeof listener !== \"function\") {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n    }\n    Object.defineProperty(EventEmitter2, \"defaultMaxListeners\", {\n      enumerable: true,\n      get: function() {\n        return defaultMaxListeners;\n      },\n      set: function(arg) {\n        if (typeof arg !== \"number\" || arg < 0 || NumberIsNaN(arg)) {\n          throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + \".\");\n        }\n        defaultMaxListeners = arg;\n      }\n    });\n    EventEmitter2.init = function() {\n      if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n      }\n      this._maxListeners = this._maxListeners || void 0;\n    };\n    EventEmitter2.prototype.setMaxListeners = function setMaxListeners(n) {\n      if (typeof n !== \"number\" || n < 0 || NumberIsNaN(n)) {\n        throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + \".\");\n      }\n      this._maxListeners = n;\n      return this;\n    };\n    function _getMaxListeners(that) {\n      if (that._maxListeners === void 0)\n        return EventEmitter2.defaultMaxListeners;\n      return that._maxListeners;\n    }\n    EventEmitter2.prototype.getMaxListeners = function getMaxListeners() {\n      return _getMaxListeners(this);\n    };\n    EventEmitter2.prototype.emit = function emit(type) {\n      var args = [];\n      for (var i = 1; i < arguments.length; i++)\n        args.push(arguments[i]);\n      var doError = type === \"error\";\n      var events = this._events;\n      if (events !== void 0)\n        doError = doError && events.error === void 0;\n      else if (!doError)\n        return false;\n      if (doError) {\n        var er;\n        if (args.length > 0)\n          er = args[0];\n        if (er instanceof Error) {\n          throw er;\n        }\n        var err = new Error(\"Unhandled error.\" + (er ? \" (\" + er.message + \")\" : \"\"));\n        err.context = er;\n        throw err;\n      }\n      var handler = events[type];\n      if (handler === void 0)\n        return false;\n      if (typeof handler === \"function\") {\n        ReflectApply(handler, this, args);\n      } else {\n        var len = handler.length;\n        var listeners = arrayClone(handler, len);\n        for (var i = 0; i < len; ++i)\n          ReflectApply(listeners[i], this, args);\n      }\n      return true;\n    };\n    function _addListener(target, type, listener, prepend) {\n      var m;\n      var events;\n      var existing;\n      checkListener(listener);\n      events = target._events;\n      if (events === void 0) {\n        events = target._events = /* @__PURE__ */ Object.create(null);\n        target._eventsCount = 0;\n      } else {\n        if (events.newListener !== void 0) {\n          target.emit(\n            \"newListener\",\n            type,\n            listener.listener ? listener.listener : listener\n          );\n          events = target._events;\n        }\n        existing = events[type];\n      }\n      if (existing === void 0) {\n        existing = events[type] = listener;\n        ++target._eventsCount;\n      } else {\n        if (typeof existing === \"function\") {\n          existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n        } else if (prepend) {\n          existing.unshift(listener);\n        } else {\n          existing.push(listener);\n        }\n        m = _getMaxListeners(target);\n        if (m > 0 && existing.length > m && !existing.warned) {\n          existing.warned = true;\n          var w = new Error(\"Possible EventEmitter memory leak detected. \" + existing.length + \" \" + String(type) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n          w.name = \"MaxListenersExceededWarning\";\n          w.emitter = target;\n          w.type = type;\n          w.count = existing.length;\n          ProcessEmitWarning(w);\n        }\n      }\n      return target;\n    }\n    EventEmitter2.prototype.addListener = function addListener(type, listener) {\n      return _addListener(this, type, listener, false);\n    };\n    EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;\n    EventEmitter2.prototype.prependListener = function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n    function onceWrapper() {\n      if (!this.fired) {\n        this.target.removeListener(this.type, this.wrapFn);\n        this.fired = true;\n        if (arguments.length === 0)\n          return this.listener.call(this.target);\n        return this.listener.apply(this.target, arguments);\n      }\n    }\n    function _onceWrap(target, type, listener) {\n      var state = { fired: false, wrapFn: void 0, target, type, listener };\n      var wrapped = onceWrapper.bind(state);\n      wrapped.listener = listener;\n      state.wrapFn = wrapped;\n      return wrapped;\n    }\n    EventEmitter2.prototype.once = function once2(type, listener) {\n      checkListener(listener);\n      this.on(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.removeListener = function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n      checkListener(listener);\n      events = this._events;\n      if (events === void 0)\n        return this;\n      list = events[type];\n      if (list === void 0)\n        return this;\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = /* @__PURE__ */ Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit(\"removeListener\", type, list.listener || listener);\n        }\n      } else if (typeof list !== \"function\") {\n        position = -1;\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n        if (position < 0)\n          return this;\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n        if (list.length === 1)\n          events[type] = list[0];\n        if (events.removeListener !== void 0)\n          this.emit(\"removeListener\", type, originalListener || listener);\n      }\n      return this;\n    };\n    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(type) {\n      var listeners, events, i;\n      events = this._events;\n      if (events === void 0)\n        return this;\n      if (events.removeListener === void 0) {\n        if (arguments.length === 0) {\n          this._events = /* @__PURE__ */ Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== void 0) {\n          if (--this._eventsCount === 0)\n            this._events = /* @__PURE__ */ Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === \"removeListener\")\n            continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners(\"removeListener\");\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n      listeners = events[type];\n      if (typeof listeners === \"function\") {\n        this.removeListener(type, listeners);\n      } else if (listeners !== void 0) {\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n      return this;\n    };\n    function _listeners(target, type, unwrap) {\n      var events = target._events;\n      if (events === void 0)\n        return [];\n      var evlistener = events[type];\n      if (evlistener === void 0)\n        return [];\n      if (typeof evlistener === \"function\")\n        return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n      return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n    }\n    EventEmitter2.prototype.listeners = function listeners(type) {\n      return _listeners(this, type, true);\n    };\n    EventEmitter2.prototype.rawListeners = function rawListeners(type) {\n      return _listeners(this, type, false);\n    };\n    EventEmitter2.listenerCount = function(emitter, type) {\n      if (typeof emitter.listenerCount === \"function\") {\n        return emitter.listenerCount(type);\n      } else {\n        return listenerCount.call(emitter, type);\n      }\n    };\n    EventEmitter2.prototype.listenerCount = listenerCount;\n    function listenerCount(type) {\n      var events = this._events;\n      if (events !== void 0) {\n        var evlistener = events[type];\n        if (typeof evlistener === \"function\") {\n          return 1;\n        } else if (evlistener !== void 0) {\n          return evlistener.length;\n        }\n      }\n      return 0;\n    }\n    EventEmitter2.prototype.eventNames = function eventNames() {\n      return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n    };\n    function arrayClone(arr, n) {\n      var copy = new Array(n);\n      for (var i = 0; i < n; ++i)\n        copy[i] = arr[i];\n      return copy;\n    }\n    function spliceOne(list, index) {\n      for (; index + 1 < list.length; index++)\n        list[index] = list[index + 1];\n      list.pop();\n    }\n    function unwrapListeners(arr) {\n      var ret = new Array(arr.length);\n      for (var i = 0; i < ret.length; ++i) {\n        ret[i] = arr[i].listener || arr[i];\n      }\n      return ret;\n    }\n    function once(emitter, name) {\n      return new Promise(function(resolve, reject) {\n        function errorListener(err) {\n          emitter.removeListener(name, resolver);\n          reject(err);\n        }\n        function resolver() {\n          if (typeof emitter.removeListener === \"function\") {\n            emitter.removeListener(\"error\", errorListener);\n          }\n          resolve([].slice.call(arguments));\n        }\n        ;\n        eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n        if (name !== \"error\") {\n          addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n        }\n      });\n    }\n    function addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n      if (typeof emitter.on === \"function\") {\n        eventTargetAgnosticAddListener(emitter, \"error\", handler, flags);\n      }\n    }\n    function eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n      if (typeof emitter.on === \"function\") {\n        if (flags.once) {\n          emitter.once(name, listener);\n        } else {\n          emitter.on(name, listener);\n        }\n      } else if (typeof emitter.addEventListener === \"function\") {\n        emitter.addEventListener(name, function wrapListener(arg) {\n          if (flags.once) {\n            emitter.removeEventListener(name, wrapListener);\n          }\n          listener(arg);\n        });\n      } else {\n        throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n      }\n    }\n  }\n});\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  InMemoryProvider: () => InMemoryProvider,\n  NOOP_PROVIDER: () => NOOP_PROVIDER,\n  OpenFeature: () => OpenFeature,\n  OpenFeatureAPI: () => OpenFeatureAPI,\n  OpenFeatureClient: () => OpenFeatureClient,\n  OpenFeatureEventEmitter: () => OpenFeatureEventEmitter,\n  ProviderEvents: () => import_core2.ClientProviderEvents\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/client/open-feature-client.ts\nvar import_core7 = require(\"@openfeature/core\");\n\n// src/open-feature.ts\nvar import_core6 = require(\"@openfeature/core\");\n\n// src/events/open-feature-event-emitter.ts\nvar import_core = require(\"@openfeature/core\");\nvar import_events = __toESM(require_events());\nvar OpenFeatureEventEmitter = class extends import_core.GenericEventEmitter {\n  constructor() {\n    super();\n    this.eventEmitter = new import_events.default({ captureRejections: true });\n    this.eventEmitter.on(\"error\", (err) => {\n      var _a;\n      (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n    });\n  }\n};\n\n// src/events/events.ts\nvar import_core2 = require(\"@openfeature/core\");\n\n// src/provider/no-op-provider.ts\nvar import_core3 = require(\"@openfeature/core\");\nvar REASON_NO_OP = \"No-op\";\nvar NoopFeatureProvider = class {\n  constructor() {\n    this.metadata = {\n      name: \"No-op Provider\"\n    };\n  }\n  get status() {\n    return import_core3.ProviderStatus.NOT_READY;\n  }\n  resolveBooleanEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveStringEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveNumberEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  resolveObjectEvaluation(_, defaultValue) {\n    return this.noOp(defaultValue);\n  }\n  noOp(defaultValue) {\n    return {\n      value: defaultValue,\n      reason: REASON_NO_OP\n    };\n  }\n};\nvar NOOP_PROVIDER = new NoopFeatureProvider();\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar import_core5 = require(\"@openfeature/core\");\n\n// src/provider/in-memory-provider/variant-not-found-error.ts\nvar import_core4 = require(\"@openfeature/core\");\nvar VariantNotFoundError = class extends import_core4.OpenFeatureError {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, VariantNotFoundError.prototype);\n    this.name = \"VariantNotFoundError\";\n    this.code = import_core4.ErrorCode.GENERAL;\n  }\n};\n\n// src/provider/in-memory-provider/in-memory-provider.ts\nvar InMemoryProvider = class {\n  constructor(flagConfiguration = {}) {\n    this.events = new OpenFeatureEventEmitter();\n    this.runsOn = \"client\";\n    this.status = import_core5.ProviderStatus.NOT_READY;\n    this.metadata = {\n      name: \"in-memory\"\n    };\n    this._flagConfiguration = __spreadValues({}, flagConfiguration);\n  }\n  initialize(context) {\n    return __async(this, null, function* () {\n      try {\n        for (const key in this._flagConfiguration) {\n          this.resolveFlagWithReason(key, context);\n        }\n        this._context = context;\n        this.status = import_core5.ProviderStatus.READY;\n      } catch (error) {\n        this.status = import_core5.ProviderStatus.ERROR;\n        throw error;\n      }\n    });\n  }\n  /**\n   * Overwrites the configured flags.\n   * @param { FlagConfiguration } flagConfiguration new flag configuration\n   */\n  putConfiguration(flagConfiguration) {\n    return __async(this, null, function* () {\n      const flagsChanged = Object.entries(flagConfiguration).filter(([key, value]) => this._flagConfiguration[key] !== value).map(([key]) => key);\n      this.status = import_core5.ProviderStatus.STALE;\n      this.events.emit(import_core2.ClientProviderEvents.Stale);\n      this._flagConfiguration = __spreadValues({}, flagConfiguration);\n      this.events.emit(import_core2.ClientProviderEvents.ConfigurationChanged, { flagsChanged });\n      try {\n        yield this.initialize(this._context);\n        this.events.emit(import_core2.ClientProviderEvents.Ready);\n      } catch (err) {\n        this.events.emit(import_core2.ClientProviderEvents.Error);\n        throw err;\n      }\n    });\n  }\n  resolveBooleanEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveNumberEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveStringEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveObjectEvaluation(flagKey, defaultValue, context, logger) {\n    return this.resolveAndCheckFlag(flagKey, defaultValue, context || this._context, logger);\n  }\n  resolveAndCheckFlag(flagKey, defaultValue, context, logger) {\n    if (!(flagKey in this._flagConfiguration)) {\n      const message = `no flag found with key ${flagKey}`;\n      logger == null ? void 0 : logger.debug(message);\n      throw new import_core5.FlagNotFoundError(message);\n    }\n    if (this._flagConfiguration[flagKey].disabled) {\n      return { value: defaultValue, reason: import_core5.StandardResolutionReasons.DISABLED };\n    }\n    const resolvedFlag = this.resolveFlagWithReason(flagKey, context);\n    if (resolvedFlag.value === void 0) {\n      const message = `no value associated with variant provided for ${flagKey} found`;\n      logger == null ? void 0 : logger.error(message);\n      throw new VariantNotFoundError(message);\n    }\n    if (typeof resolvedFlag.value != typeof defaultValue) {\n      throw new import_core5.TypeMismatchError();\n    }\n    return resolvedFlag;\n  }\n  resolveFlagWithReason(flagKey, ctx) {\n    try {\n      const resolutionResult = this.lookupFlagValue(flagKey, ctx);\n      return resolutionResult;\n    } catch (error) {\n      if (!(error instanceof import_core5.OpenFeatureError)) {\n        throw new import_core5.GeneralError((error == null ? void 0 : error.message) || \"unknown error\");\n      }\n      throw error;\n    }\n  }\n  lookupFlagValue(flagKey, ctx) {\n    var _a;\n    const flagSpec = this._flagConfiguration[flagKey];\n    const isContextEval = ctx && (flagSpec == null ? void 0 : flagSpec.contextEvaluator);\n    const variant = isContextEval ? (_a = flagSpec.contextEvaluator) == null ? void 0 : _a.call(flagSpec, ctx) : flagSpec.defaultVariant;\n    const value = variant && (flagSpec == null ? void 0 : flagSpec.variants[variant]);\n    const evalReason = isContextEval ? import_core5.StandardResolutionReasons.TARGETING_MATCH : import_core5.StandardResolutionReasons.STATIC;\n    const reason = this.status === import_core5.ProviderStatus.STALE ? import_core5.StandardResolutionReasons.CACHED : evalReason;\n    return __spreadProps(__spreadValues({\n      value\n    }, variant && { variant }), {\n      reason\n    });\n  }\n};\n\n// src/open-feature.ts\nvar GLOBAL_OPENFEATURE_API_KEY = Symbol.for(\"@openfeature/web-sdk/api\");\nvar _globalThis = globalThis;\nvar OpenFeatureAPI = class extends import_core6.OpenFeatureCommonAPI {\n  constructor() {\n    super(\"client\");\n    this._events = new OpenFeatureEventEmitter();\n    this._defaultProvider = NOOP_PROVIDER;\n    this._createEventEmitter = () => new OpenFeatureEventEmitter();\n    this._namedProviderContext = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Gets a singleton instance of the OpenFeature API.\n   * @ignore\n   * @returns {OpenFeatureAPI} OpenFeature API\n   */\n  static getInstance() {\n    const globalApi = _globalThis[GLOBAL_OPENFEATURE_API_KEY];\n    if (globalApi) {\n      return globalApi;\n    }\n    const instance = new OpenFeatureAPI();\n    _globalThis[GLOBAL_OPENFEATURE_API_KEY] = instance;\n    return instance;\n  }\n  setContext(nameOrContext, contextOrUndefined) {\n    return __async(this, null, function* () {\n      var _a, _b;\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrContext);\n      const context = (_b = (_a = (0, import_core6.objectOrUndefined)(nameOrContext)) != null ? _a : (0, import_core6.objectOrUndefined)(contextOrUndefined)) != null ? _b : {};\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.set(clientName, context);\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, context);\n        } else {\n          this._namedProviderContext.set(clientName, context);\n        }\n      } else {\n        const oldContext = this._context;\n        this._context = context;\n        const defaultContextNameProviders = Array.from(this._clientProviders.entries()).filter(([name]) => !this._namedProviderContext.has(name)).reduce((acc, [name, provider]) => {\n          acc.push({ name, provider });\n          return acc;\n        }, []);\n        const allProviders = [\n          // add in the default (no name)\n          { name: void 0, provider: this._defaultProvider },\n          ...defaultContextNameProviders\n        ];\n        yield Promise.all(\n          allProviders.map(\n            (tuple) => this.runProviderContextChangeHandler(tuple.name, tuple.provider, oldContext, context)\n          )\n        );\n      }\n    });\n  }\n  getContext(nameOrUndefined) {\n    const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n    if (clientName) {\n      const context = this._namedProviderContext.get(clientName);\n      if (context) {\n        return context;\n      } else {\n        this._logger.debug(`Unable to find context for '${clientName}'.`);\n      }\n    }\n    return this._context;\n  }\n  clearContext(nameOrUndefined) {\n    return __async(this, null, function* () {\n      const clientName = (0, import_core6.stringOrUndefined)(nameOrUndefined);\n      if (clientName) {\n        const provider = this._clientProviders.get(clientName);\n        if (provider) {\n          const oldContext = this.getContext(clientName);\n          this._namedProviderContext.delete(clientName);\n          const newContext = this.getContext();\n          yield this.runProviderContextChangeHandler(clientName, provider, oldContext, newContext);\n        } else {\n          this._namedProviderContext.delete(clientName);\n        }\n      } else {\n        return this.setContext({});\n      }\n    });\n  }\n  /**\n   * Resets the global evaluation context and removes the evaluation context for\n   * all named clients.\n   */\n  clearContexts() {\n    return __async(this, null, function* () {\n      yield this.clearContext();\n      yield Promise.allSettled(Array.from(this._clientProviders.keys()).map((name) => this.clearContext(name)));\n    });\n  }\n  /**\n   * A factory function for creating new named OpenFeature clients. Clients can contain\n   * their own state (e.g. logger, hook, context). Multiple clients can be used\n   * to segment feature flag configuration.\n   *\n   * If there is already a provider bound to this name via {@link this.setProvider setProvider}, this provider will be used.\n   * Otherwise, the default provider is used until a provider is assigned to that name.\n   * @param {string} name The name of the client\n   * @param {string} version The version of the client (only used for metadata)\n   * @returns {Client} OpenFeature Client\n   */\n  getClient(name, version) {\n    return new OpenFeatureClient(\n      // functions are passed here to make sure that these values are always up to date,\n      // and so we don't have to make these public properties on the API class.\n      () => this.getProviderForClient(name),\n      () => this.buildAndCacheEventEmitterForClient(name),\n      () => this._logger,\n      { name, version }\n    );\n  }\n  /**\n   * Clears all registered providers and resets the default provider.\n   * @returns {Promise<void>}\n   */\n  clearProviders() {\n    return __async(this, null, function* () {\n      yield __superGet(OpenFeatureAPI.prototype, this, \"clearProvidersAndSetDefault\").call(this, NOOP_PROVIDER);\n      this._namedProviderContext.clear();\n    });\n  }\n  runProviderContextChangeHandler(clientName, provider, oldContext, newContext) {\n    return __async(this, null, function* () {\n      var _a, _b, _c, _d, _e;\n      const providerName = provider.metadata.name;\n      try {\n        yield (_a = provider.onContextChange) == null ? void 0 : _a.call(provider, oldContext, newContext);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n        });\n        (_b = this._events) == null ? void 0 : _b.emit(import_core2.ClientProviderEvents.ContextChanged, { clientName, providerName });\n      } catch (err) {\n        const error = err;\n        const message = `Error running ${(_c = provider == null ? void 0 : provider.metadata) == null ? void 0 : _c.name}'s context change handler: ${error == null ? void 0 : error.message}`;\n        (_d = this._logger) == null ? void 0 : _d.error(`${message}`, err);\n        this.getAssociatedEventEmitters(clientName).forEach((emitter) => {\n          emitter == null ? void 0 : emitter.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n        });\n        (_e = this._events) == null ? void 0 : _e.emit(import_core2.ClientProviderEvents.Error, { clientName, providerName, message });\n      }\n    });\n  }\n};\nvar OpenFeature = OpenFeatureAPI.getInstance();\n\n// src/client/open-feature-client.ts\nvar OpenFeatureClient = class {\n  constructor(providerAccessor, emitterAccessor, globalLogger, options) {\n    this.providerAccessor = providerAccessor;\n    this.emitterAccessor = emitterAccessor;\n    this.globalLogger = globalLogger;\n    this.options = options;\n    this._hooks = [];\n  }\n  get metadata() {\n    return {\n      name: this.options.name,\n      version: this.options.version,\n      providerMetadata: this.providerAccessor().metadata\n    };\n  }\n  get providerStatus() {\n    var _a;\n    return ((_a = this.providerAccessor()) == null ? void 0 : _a.status) || import_core7.ProviderStatus.READY;\n  }\n  addHandler(eventType, handler) {\n    var _a;\n    this.emitterAccessor().addHandler(eventType, handler);\n    const shouldRunNow = (0, import_core7.statusMatchesEvent)(eventType, this._provider.status);\n    if (shouldRunNow) {\n      try {\n        handler({ clientName: this.metadata.name, providerName: this._provider.metadata.name });\n      } catch (err) {\n        (_a = this._logger) == null ? void 0 : _a.error(\"Error running event handler:\", err);\n      }\n    }\n  }\n  removeHandler(notificationType, handler) {\n    this.emitterAccessor().removeHandler(notificationType, handler);\n  }\n  getHandlers(eventType) {\n    return this.emitterAccessor().getHandlers(eventType);\n  }\n  setLogger(logger) {\n    this._clientLogger = new import_core7.SafeLogger(logger);\n    return this;\n  }\n  addHooks(...hooks) {\n    this._hooks = [...this._hooks, ...hooks];\n    return this;\n  }\n  getHooks() {\n    return this._hooks;\n  }\n  clearHooks() {\n    this._hooks = [];\n    return this;\n  }\n  getBooleanValue(flagKey, defaultValue, options) {\n    return this.getBooleanDetails(flagKey, defaultValue, options).value;\n  }\n  getBooleanDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveBooleanEvaluation, defaultValue, \"boolean\", options);\n  }\n  getStringValue(flagKey, defaultValue, options) {\n    return this.getStringDetails(flagKey, defaultValue, options).value;\n  }\n  getStringDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted string generic argument.\n      this._provider.resolveStringEvaluation,\n      defaultValue,\n      \"string\",\n      options\n    );\n  }\n  getNumberValue(flagKey, defaultValue, options) {\n    return this.getNumberDetails(flagKey, defaultValue, options).value;\n  }\n  getNumberDetails(flagKey, defaultValue, options) {\n    return this.evaluate(\n      flagKey,\n      // this isolates providers from our restricted number generic argument.\n      this._provider.resolveNumberEvaluation,\n      defaultValue,\n      \"number\",\n      options\n    );\n  }\n  getObjectValue(flagKey, defaultValue, options) {\n    return this.getObjectDetails(flagKey, defaultValue, options).value;\n  }\n  getObjectDetails(flagKey, defaultValue, options) {\n    return this.evaluate(flagKey, this._provider.resolveObjectEvaluation, defaultValue, \"object\", options);\n  }\n  evaluate(flagKey, resolver, defaultValue, flagType, options = {}) {\n    var _a, _b;\n    const allHooks = [\n      ...OpenFeature.getHooks(),\n      ...this.getHooks(),\n      ...options.hooks || [],\n      ...this._provider.hooks || []\n    ];\n    const allHooksReversed = [...allHooks].reverse();\n    const context = __spreadValues({}, OpenFeature.getContext((_a = this == null ? void 0 : this.options) == null ? void 0 : _a.name));\n    const hookContext = {\n      flagKey,\n      defaultValue,\n      flagValueType: flagType,\n      clientMetadata: this.metadata,\n      providerMetadata: OpenFeature.providerMetadata,\n      context,\n      logger: this._logger\n    };\n    try {\n      this.beforeHooks(allHooks, hookContext, options);\n      const resolution = resolver.call(this._provider, flagKey, defaultValue, context, this._logger);\n      const evaluationDetails = __spreadProps(__spreadValues({}, resolution), {\n        flagMetadata: Object.freeze((_b = resolution.flagMetadata) != null ? _b : {}),\n        flagKey\n      });\n      this.afterHooks(allHooksReversed, hookContext, evaluationDetails, options);\n      return evaluationDetails;\n    } catch (err) {\n      const errorMessage = err == null ? void 0 : err.message;\n      const errorCode = (err == null ? void 0 : err.code) || import_core7.ErrorCode.GENERAL;\n      this.errorHooks(allHooksReversed, hookContext, err, options);\n      return {\n        errorCode,\n        errorMessage,\n        value: defaultValue,\n        reason: import_core7.StandardResolutionReasons.ERROR,\n        flagMetadata: Object.freeze({}),\n        flagKey\n      };\n    } finally {\n      this.finallyHooks(allHooksReversed, hookContext, options);\n    }\n  }\n  beforeHooks(hooks, hookContext, options) {\n    var _a;\n    Object.freeze(hookContext);\n    Object.freeze(hookContext.context);\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.before) == null ? void 0 : _a.call(hook, hookContext, Object.freeze(options.hookHints));\n    }\n  }\n  afterHooks(hooks, hookContext, evaluationDetails, options) {\n    var _a;\n    for (const hook of hooks) {\n      (_a = hook == null ? void 0 : hook.after) == null ? void 0 : _a.call(hook, hookContext, evaluationDetails, options.hookHints);\n    }\n  }\n  errorHooks(hooks, hookContext, err, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.error) == null ? void 0 : _a.call(hook, hookContext, err, options.hookHints);\n      } catch (err2) {\n        this._logger.error(`Unhandled error during 'error' hook: ${err2}`);\n        if (err2 instanceof Error) {\n          this._logger.error(err2.stack);\n        }\n        this._logger.error(err2 == null ? void 0 : err2.stack);\n      }\n    }\n  }\n  finallyHooks(hooks, hookContext, options) {\n    var _a;\n    for (const hook of hooks) {\n      try {\n        (_a = hook == null ? void 0 : hook.finally) == null ? void 0 : _a.call(hook, hookContext, options.hookHints);\n      } catch (err) {\n        this._logger.error(`Unhandled error during 'finally' hook: ${err}`);\n        if (err instanceof Error) {\n          this._logger.error(err.stack);\n        }\n        this._logger.error(err == null ? void 0 : err.stack);\n      }\n    }\n  }\n  get _provider() {\n    return this.providerAccessor();\n  }\n  get _logger() {\n    return this._clientLogger || this.globalLogger();\n  }\n};\n\n// src/index.ts\n__reExport(src_exports, require(\"@openfeature/core\"), module.exports);\n//# sourceMappingURL=index.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3607);\n"],"names":["root","factory","exports","module","define","amd","a","i","this","__assign","Object","assign","t","s","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__importDefault","mod","__esModule","defineProperty","FbProvider","web_sdk_1","js_client_sdk_1","translateContext_1","translateResult_1","wrongTypeResult","reason","StandardResolutionReasons","ERROR","errorCode","ErrorCode","TYPE_MISMATCH","options","_a","_b","_this","runsOn","metadata","name","_status","ProviderStatus","NOT_READY","events","OpenFeatureEventEmitter","fbClient","FbClientBuilder","build","on","flagKeys","emit","ProviderEvents","ConfigurationChanged","flagsChanged","err","clientConstructionError","logger","BasicLogger","level","logLevel","destination","console","log","error","concat","initialize","error_1","Error","waitForInitialization","READY","resolveBooleanEvaluation","flagKey","defaultValue","variation","boolVariation","debug","GENERAL","default","resolveStringEvaluation","stringVariation","resolveNumberEvaluation","numberVariation","resolveObjectEvaluation","jsonVariation","undefined","onContextChange","_oldContext","newContext","_user","translateContext","identify","getClient","get","enumerable","configurable","onClose","close","FbProvider_1","builtInKeys","evaluationContext","custom","key","targetingKey","keyId","user","customizedProperties","Array","isArray","forEach","entries","includes","__defProp","__defProps","defineProperties","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropNames","getOwnPropertyNames","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","writable","__spreadValues","b","prop","__spreadProps","__async","__this","__arguments","throw","x","src_exports","target","all","__export","AllProviderEvents","ClientProviderEvents","DefaultLogger","FlagNotFoundError","GeneralError","GenericEventEmitter","InvalidContextError","LOG_LEVELS","OpenFeatureCommonAPI","OpenFeatureError","ParseError","ProviderNotReadyError","SafeLogger","ServerProviderEvents","TargetingKeyMissingError","TypeMismatchError","isObject","isString","objectOrUndefined","statusMatchesEvent","stringOrUndefined","to","from","except","desc","__copyProps","constructor","message","super","setPrototypeOf","TARGETING_MATCH","SPLIT","DISABLED","DEFAULT","UNKNOWN","STATIC","CACHED","ErrorCode2","code","ProviderStatus2","ServerProviderEvents2","ClientProviderEvents2","eventStatusMap","event","status","args","warn","info","fallbackLogger","globalLogger","_handlers","WeakMap","eventType","context","eventEmitter","addHandler","handler","asyncHandler","details","set","removeHandler","removeListener","removeAllHandlers","removeAllListeners","getHandlers","listeners","setLogger","_eventLogger","_logger","isDefined","input","category","_hooks","_context","_clientEventHandlers","Map","_clientProviders","_clientEvents","_runsOn","addHooks","hooks","getHooks","clearHooks","providerMetadata","getProviderMetadata","clientName","getProviderForClient","_defaultProvider","keyProviderTuple","provider","providerName","_events","clearHandlers","setProviderAndWait","clientOrProvider","providerOrUndefined","setAwaitableProvider","setProvider","maybePromise","catch","_c","_d","_e","_f","oldProvider","emitters","getAssociatedEventEmitters","initializationPromise","_a2","emitter","transferListeners","values","buildAndCacheEventEmitterForClient","newEmitter","_createEventEmitter","clientProvider","getUnboundEmitters","namedProviders","keys","filter","map","newProvider","eventHandler","newClientHandlers","handleShutdownError","providers","_0","clearProvidersAndSetDefault","defaultProvider","clear","stack","cb","__create","create","__getProtoOf","getPrototypeOf","__reflectGet","Reflect","require_events","module2","ReflectOwnKeys","R","ReflectApply","receiver","Function","ownKeys","NumberIsNaN","Number","isNaN","EventEmitter2","init","once","errorListener","resolver","slice","eventTargetAgnosticAddListener","flags","addErrorHandlerIfEventEmitter","EventEmitter","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","type","prepend","m","existing","warning","newListener","unshift","warned","w","String","count","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","arg","removeEventListener","RangeError","setMaxListeners","getMaxListeners","doError","er","len","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","spliceOne","off","rawListeners","eventNames","InMemoryProvider","NOOP_PROVIDER","OpenFeature","OpenFeatureAPI","OpenFeatureClient","import_core2","__toCommonJS","import_core7","import_core6","import_core","import_events","isNodeMode","__toESM","captureRejections","import_core3","noOp","import_core5","import_core4","VariantNotFoundError","flagConfiguration","_flagConfiguration","resolveFlagWithReason","putConfiguration","STALE","Stale","Ready","resolveAndCheckFlag","disabled","resolvedFlag","ctx","lookupFlagValue","flagSpec","isContextEval","contextEvaluator","variant","defaultVariant","variants","evalReason","GLOBAL_OPENFEATURE_API_KEY","for","_globalThis","globalThis","_namedProviderContext","getInstance","globalApi","instance","setContext","nameOrContext","contextOrUndefined","oldContext","getContext","runProviderContextChangeHandler","defaultContextNameProviders","has","reduce","acc","allProviders","tuple","nameOrUndefined","clearContext","delete","clearContexts","allSettled","version","clearProviders","cls","ContextChanged","providerAccessor","emitterAccessor","providerStatus","_provider","notificationType","_clientLogger","getBooleanValue","getBooleanDetails","evaluate","getStringValue","getStringDetails","getNumberValue","getNumberDetails","getObjectValue","getObjectDetails","flagType","allHooks","allHooksReversed","reverse","hookContext","flagValueType","clientMetadata","beforeHooks","resolution","evaluationDetails","flagMetadata","freeze","afterHooks","errorMessage","errorHooks","finallyHooks","hook","before","hookHints","after","err2","finally","secondTarget","__reExport","option","sdkKey","streamingUri","eventsUri","eventDetails","client","defaultValues","Validators_1","OptionMessages_1","InMemoryStore_1","isNullOrUndefined_1","canonicalizeUri_1","NullBootstrapProvider_1","constants_1","DataSyncMode_1","bootstrap_1","validations","startWaitTime","TypeValidators","pollingUri","webSocketPingInterval","store","ObjectOrFactory","dataSynchronizer","flushInterval","maxEventsInQueue","disableEvents","Boolean","pollingInterval","offline","dataSyncMode","bootstrap","Bootstrap","User","DataSyncModeEnum","STREAMING","sendEvents","bootstrapProvider","NullBootstrapProvider","errors","validatedOptions","optionName","optionValue","validator","is","getType","wrongOptionTypeBoolean","NumberWithMinimum","min","optionBelowMinimum","UserValidator","messages","wrongOptionType","unknownOption","validateTypesAndNames","streamingUriMissing","isNullOrUndefined","EmptyString","pollingUriMissing","eventsUriMissing","partialEndpoint","POLLING","validateEndpoints","canonicalizeUri","JsonBootstrapProvider","dataSynchronizerFactory","storeFactory","Context","valid","fromUser","contextForError","trim","property","find","FbClient_1","_options","_platform","platform","mode","param","FbClientCore","Configuration_1","ClientContext_1","DataSourceUpdates_1","createStreamListeners_1","WebSocketDataSynchronizer_1","PollingDataSynchronizer_1","Requestor_1","DataKinds_1","Evaluator_1","ReasonKinds_1","errors_1","Context_1","ValueConverters_1","NullDataSynchronizer_1","NullEventProcessor_1","DefaultEventProcessor_1","event_1","evaluation_1","ClientState","callbacks","Initializing","onError","onFailed","onReady","onUpdate","hasEventListeners","config","clientContext","dataSourceUpdates","evaluator","populate","eventProcessor","NullEventProcessor","NullDataSynchronizer","initSuccess","DefaultEventProcessor","createStreamListeners","put","patch","webSocket","requests","dataSourceErrorHandler","start","oldFlags","oldVersion","Flags","oldData","newFlags","newVersion","newData","checkUpdates","setTimeout","initialized","msg","TimeoutError","Failed","rejectionReason","initReject","Initialized","initializedPromise","initResolve","evaluateCore","ValueConverters","bool","boolVariationDetail","json","jsonVariationDetail","number","numberVariationDetail","string","stringVariationDetail","variationDetail","getAllVariations","ClientError","evalResult","kind","track","eventName","metricValue","metricEvent","MetricEvent","appType","record","flush","callback","typeConverter","ReasonKinds","FlagNotFound","converter","toEvalEvent","variationType","VariationDataType","boolean","isSucceeded","WrongType","serialization_1","store_1","flag","origin","StoreItemOriginEnum","Local","variationOptions","id","data","deserializeAll","dataSet","userKeyId","__createBinding","o","k","k2","__exportStar","MinInt","onChange","checkForChanges","some","localOnlyFlags","cur","updatedKeys","flatMap","namespace","oldDataForKind","newDataForKind","mergedData","isUpdated","doInit","upsert","doUpsert","oldItem","item","onCompleteHandlers","onPutCompleteHandler","deserializeData","processJson","initData","createPutListener","onPatchCompleteHandler","deserializePatch","createPatchListener","stop","types_1","http_1","requestor","getStoreTimestamp","errorHandler","stopped","poll","startTime","Date","now","requestData","_g","_h","elapsed","sleepFor","Math","max","isHttpRecoverable","httpErrorMessage","PollingError","timeoutHandle","featureFlags","processStreamResponse","JSON","parse","messageType","StreamResponseEventType","full","ff","Remote","clearTimeout","headers","defaultHeaders","uri","request","requestUrl","res","fetch","text","timestamp","payload","method","stringify","StreamingError","socket","pingInterval","identifyResolve","logConnectionStarted","connect","connectionAttemptStartTime","generateConnectionToken","alphabet","encodeNumber","split","join","replace","timestampCode","toString","floor","random","UnexpectedResponseError","EvalResult","flagNotFound","matched","val","Match","targetedVariation","variations","EvalEvent","sendToExperiment","EvalResult_1","EventDispatcher_1","DefaultEventQueue_1","closed","eventQueue","DefaultEventQueue","eventDispatcher","EventDispatcher","flushLoop","flushEvent","FlushEvent","waitForCompletion","shutdown","ShutdownEvent","addEvent","complete","capacity","eventsSnapshot","isEmpty","DefaultEventSender","IEventSender_1","sleep_1","send","retry","DeliveryStatus","Succeeded","FailedAndMustShutDown","DefaultEventSerializer","serialize","toPayload","DefaultEventSender_1","DefaultEventSerializer_1","queue","maxEventPerRequest","buffer","sender","serializer","dispatchLoop","running","PayloadEvent","addEventToBuffer","triggerFlush","snapshot","flushEvents","total","getUniqueEvents","uniqueEvents","hashes","hash","AsyncEvent","getTime","isCompletedPromise","resolveFn","userPayload","metrics","route","numericValue","hasObject","featureFlagKey","format_1","LogPriority","none","LevelNames","formatter","tryFormat","tryWrite","prefix","loggerRequirements","fallback","tryStringify","indexOf","escapes","d","toNumber","parseInt","toInt","parseFloat","toFloat","j","O","c","formatString","out","char","charAt","nextChar","configuration","expectedType","actualType","mandatory","invalidOptionValue","missingKeyInBootstrapValue","UserBuilder","_keyId","_name","_custom","propertyName","KindValidator","DateValidator","BootstrapValidator","NullableBoolean","StringMatchingRegex","TypeArray","Type","FactoryOrInstance","factoryOrInstance","typeOfFactory","typeName","example","typeOf","u","every","expression","match","DATE_REGEX","test","createTypeArray","numberWithMin","stringMatchingRegex","StringArray","Kind","version_1","platformData","os","additional","sdkData","userAgent","BrowserPlatform","BrowserInfo_1","BrowserRequests_1","BrowserWebSocket_1","BrowserRequests","url","Emits_1","EventEmitter_1","utils_1","socketConnectionIntervals","Emits","retryCounter","_config","doDataSync","ws","WebSocket","sendPingMessage","reconnect","readyState","OPEN","waitTime","FbClientCore_1","BasicLogger_1","SafeLogger_1","BrowserPlatform_1","LocalStorageStore_1","FbClient","startsWith","BaseStore_1","serializeUser_1","LocalStorageStore","BaseStore","description","saveUser","localStorage","setItem","CurrentUserStorageKey","serializeUser","dumpStoreToStorage","storageKey","StoreStorageKey","loadStoreFromStorage","dataStoreStr","getItem","BrowserWebSocket","initCalled","addItem","items","old","allData","ele","DataKinds","InMemoryStore","allStores","Base","maybeReportError","listeningTo","onceHandler","copiedHandlers","toUpperCase","success","num","debounce","fn","delayMs","timer","retryMessage","sort","nameA","toLowerCase","nameB","delayMillis","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}